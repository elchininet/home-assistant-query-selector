(function () {
    'use strict';

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise, SuppressedError, Symbol */


    function __rest(s, e) {
        var t = {};
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
            t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                    t[p[i]] = s[p[i]];
            }
        return t;
    }

    function __classPrivateFieldGet(receiver, state, kind, f) {
        if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    }

    function __classPrivateFieldSet(receiver, state, value, kind, f) {
        if (kind === "m") throw new TypeError("Private method is not writable");
        if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
        return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
    }

    typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
        var e = new Error(message);
        return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
    };

    function cov_jnkfhc2pd(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts";var hash="3373eba7a1e2bf9c904479494fd2b391eabb15b0";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:20}},"1":{start:{line:2,column:34},end:{line:2,column:37}},"2":{start:{line:3,column:30},end:{line:6,column:1}},"3":{start:{line:8,column:0},end:{line:13,column:46}},"4":{start:{line:9,column:4},end:{line:9,column:57}},"5":{start:{line:10,column:4},end:{line:10,column:67}},"6":{start:{line:11,column:4},end:{line:11,column:47}},"7":{start:{line:12,column:4},end:{line:12,column:49}},"8":{start:{line:15,column:0},end:{line:21,column:54}},"9":{start:{line:16,column:4},end:{line:16,column:77}},"10":{start:{line:17,column:4},end:{line:17,column:67}},"11":{start:{line:18,column:4},end:{line:18,column:49}},"12":{start:{line:19,column:4},end:{line:19,column:45}},"13":{start:{line:20,column:4},end:{line:20,column:49}},"14":{start:{line:23,column:0},end:{line:30,column:50}},"15":{start:{line:24,column:4},end:{line:24,column:69}},"16":{start:{line:25,column:4},end:{line:25,column:49}},"17":{start:{line:26,column:4},end:{line:26,column:65}},"18":{start:{line:27,column:4},end:{line:27,column:79}},"19":{start:{line:28,column:4},end:{line:28,column:109}},"20":{start:{line:29,column:4},end:{line:29,column:87}},"21":{start:{line:32,column:0},end:{line:37,column:56}},"22":{start:{line:33,column:4},end:{line:33,column:75}},"23":{start:{line:34,column:4},end:{line:34,column:95}},"24":{start:{line:35,column:4},end:{line:35,column:114}},"25":{start:{line:36,column:4},end:{line:36,column:94}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:1},end:{line:8,column:2}},loc:{start:{line:8,column:28},end:{line:13,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:1},end:{line:15,column:2}},loc:{start:{line:15,column:32},end:{line:21,column:1}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:1},end:{line:23,column:2}},loc:{start:{line:23,column:30},end:{line:30,column:1}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:1},end:{line:32,column:2}},loc:{start:{line:32,column:33},end:{line:37,column:1}},line:32}},branchMap:{"0":{loc:{start:{line:13,column:3},end:{line:13,column:44}},type:"binary-expr",locations:[{start:{line:13,column:3},end:{line:13,column:18}},{start:{line:13,column:23},end:{line:13,column:43}}],line:13},"1":{loc:{start:{line:21,column:3},end:{line:21,column:52}},type:"binary-expr",locations:[{start:{line:21,column:3},end:{line:21,column:22}},{start:{line:21,column:27},end:{line:21,column:51}}],line:21},"2":{loc:{start:{line:30,column:3},end:{line:30,column:48}},type:"binary-expr",locations:[{start:{line:30,column:3},end:{line:30,column:20}},{start:{line:30,column:25},end:{line:30,column:47}}],line:30},"3":{loc:{start:{line:37,column:3},end:{line:37,column:54}},type:"binary-expr",locations:[{start:{line:37,column:3},end:{line:37,column:23}},{start:{line:37,column:28},end:{line:37,column:53}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts"],sourcesContent:["export const $ = '$';\n\nexport const TIMESTAMP_THESHOLD = 500;\n\nexport const DEFAULT_CONFIG = {\n    retries: 100,\n    delay: 50\n};\n\nexport enum HA_ROOT_ELEMENT {\n    HOME_ASSISTANT = 'HOME_ASSISTANT',\n    HOME_ASSISTANT_MAIN = 'HOME_ASSISTANT_MAIN',\n    HA_DRAWER = 'HA_DRAWER',\n    HA_SIDEBAR = 'HA_SIDEBAR'\n}\n\nexport enum HA_RESOLVER_ELEMENT {\n    PARTIAL_PANEL_RESOLVER = 'PARTIAL_PANEL_RESOLVER',\n    HA_PANEL_LOVELACE = 'HA_PANEL_LOVELACE',\n    HUI_ROOT = 'HUI_ROOT',\n    HEADER = 'HEADER',\n    HUI_VIEW = 'HUI_VIEW'\n}\n\nexport enum HA_DIALOG_ELEMENT {\n    HA_MORE_INFO_DIALOG = 'HA_MORE_INFO_DIALOG',\n    HA_DIALOG = 'HA_DIALOG',\n    HA_DIALOG_CONTENT = 'HA_DIALOG_CONTENT',\n    HA_MORE_INFO_DIALOG_INFO = 'HA_MORE_INFO_DIALOG_INFO',\n    HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK = 'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK',\n    HA_DIALOG_MORE_INFO_SETTINGS = 'HA_DIALOG_MORE_INFO_SETTINGS'\n\n}\n\nexport enum HAQuerySelectorEvent {\n    ON_LOVELACE_PANEL_LOAD = 'onLovelacePanelLoad',\n    ON_LOVELACE_MORE_INFO_DIALOG_OPEN = 'onLovelaceMoreInfoDialogOpen',\n    ON_LOVELACE_HISTORY_AND_LOGBOOK_DIALOG_OPEN = 'onLovelaceHistoryAndLogBookDialogOpen',\n    ON_LOVELACE_SETTINGS_DIALOG_OPEN = 'onLovelaceSettingsDialogOpen'\n}"],names:[],mappings:"AAAA,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC;AAErB,MAAM,CAAC,MAAM,kBAAkB,GAAG,GAAG,CAAC;AAEtC,MAAM,CAAC,MAAM,cAAc,GAAG;IAC1B,OAAO,EAAE,GAAG;IACZ,KAAK,EAAE,EAAE;CACZ,CAAC;AAEF,MAAM,CAAN,IAAY,eAKX;AALD,WAAY,eAAe;IACvB,oDAAiC,CAAA;IACjC,8DAA2C,CAAA;IAC3C,0CAAuB,CAAA;IACvB,4CAAyB,CAAA;AAC7B,CAAC,EALW,eAAe,KAAf,eAAe,QAK1B;AAED,MAAM,CAAN,IAAY,mBAMX;AAND,WAAY,mBAAmB;IAC3B,wEAAiD,CAAA;IACjD,8DAAuC,CAAA;IACvC,4CAAqB,CAAA;IACrB,wCAAiB,CAAA;IACjB,4CAAqB,CAAA;AACzB,CAAC,EANW,mBAAmB,KAAnB,mBAAmB,QAM9B;AAED,MAAM,CAAN,IAAY,iBAQX;AARD,WAAY,iBAAiB;IACzB,gEAA2C,CAAA;IAC3C,4CAAuB,CAAA;IACvB,4DAAuC,CAAA;IACvC,0EAAqD,CAAA;IACrD,wGAAmF,CAAA;IACnF,kFAA6D,CAAA;AAEjE,CAAC,EARW,iBAAiB,KAAjB,iBAAiB,QAQ5B;AAED,MAAM,CAAN,IAAY,oBAKX;AALD,WAAY,oBAAoB;IAC5B,sEAA8C,CAAA;IAC9C,0FAAkE,CAAA;IAClE,6GAAqF,CAAA;IACrF,yFAAiE,CAAA;AACrE,CAAC,EALW,oBAAoB,KAApB,oBAAoB,QAK/B",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3373eba7a1e2bf9c904479494fd2b391eabb15b0"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_jnkfhc2pd=function(){return actualCoverage;};}return actualCoverage;}cov_jnkfhc2pd();const $=(cov_jnkfhc2pd().s[0]++,'$');const TIMESTAMP_THESHOLD=(cov_jnkfhc2pd().s[1]++,500);const DEFAULT_CONFIG=(cov_jnkfhc2pd().s[2]++,{retries:100,delay:50});var HA_ROOT_ELEMENT;cov_jnkfhc2pd().s[3]++;(function(HA_ROOT_ELEMENT){cov_jnkfhc2pd().f[0]++;cov_jnkfhc2pd().s[4]++;HA_ROOT_ELEMENT["HOME_ASSISTANT"]="HOME_ASSISTANT";cov_jnkfhc2pd().s[5]++;HA_ROOT_ELEMENT["HOME_ASSISTANT_MAIN"]="HOME_ASSISTANT_MAIN";cov_jnkfhc2pd().s[6]++;HA_ROOT_ELEMENT["HA_DRAWER"]="HA_DRAWER";cov_jnkfhc2pd().s[7]++;HA_ROOT_ELEMENT["HA_SIDEBAR"]="HA_SIDEBAR";})((cov_jnkfhc2pd().b[0][0]++,HA_ROOT_ELEMENT)||(cov_jnkfhc2pd().b[0][1]++,HA_ROOT_ELEMENT={}));var HA_RESOLVER_ELEMENT;cov_jnkfhc2pd().s[8]++;(function(HA_RESOLVER_ELEMENT){cov_jnkfhc2pd().f[1]++;cov_jnkfhc2pd().s[9]++;HA_RESOLVER_ELEMENT["PARTIAL_PANEL_RESOLVER"]="PARTIAL_PANEL_RESOLVER";cov_jnkfhc2pd().s[10]++;HA_RESOLVER_ELEMENT["HA_PANEL_LOVELACE"]="HA_PANEL_LOVELACE";cov_jnkfhc2pd().s[11]++;HA_RESOLVER_ELEMENT["HUI_ROOT"]="HUI_ROOT";cov_jnkfhc2pd().s[12]++;HA_RESOLVER_ELEMENT["HEADER"]="HEADER";cov_jnkfhc2pd().s[13]++;HA_RESOLVER_ELEMENT["HUI_VIEW"]="HUI_VIEW";})((cov_jnkfhc2pd().b[1][0]++,HA_RESOLVER_ELEMENT)||(cov_jnkfhc2pd().b[1][1]++,HA_RESOLVER_ELEMENT={}));var HA_DIALOG_ELEMENT;cov_jnkfhc2pd().s[14]++;(function(HA_DIALOG_ELEMENT){cov_jnkfhc2pd().f[2]++;cov_jnkfhc2pd().s[15]++;HA_DIALOG_ELEMENT["HA_MORE_INFO_DIALOG"]="HA_MORE_INFO_DIALOG";cov_jnkfhc2pd().s[16]++;HA_DIALOG_ELEMENT["HA_DIALOG"]="HA_DIALOG";cov_jnkfhc2pd().s[17]++;HA_DIALOG_ELEMENT["HA_DIALOG_CONTENT"]="HA_DIALOG_CONTENT";cov_jnkfhc2pd().s[18]++;HA_DIALOG_ELEMENT["HA_MORE_INFO_DIALOG_INFO"]="HA_MORE_INFO_DIALOG_INFO";cov_jnkfhc2pd().s[19]++;HA_DIALOG_ELEMENT["HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK"]="HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK";cov_jnkfhc2pd().s[20]++;HA_DIALOG_ELEMENT["HA_DIALOG_MORE_INFO_SETTINGS"]="HA_DIALOG_MORE_INFO_SETTINGS";})((cov_jnkfhc2pd().b[2][0]++,HA_DIALOG_ELEMENT)||(cov_jnkfhc2pd().b[2][1]++,HA_DIALOG_ELEMENT={}));var HAQuerySelectorEvent;cov_jnkfhc2pd().s[21]++;(function(HAQuerySelectorEvent){cov_jnkfhc2pd().f[3]++;cov_jnkfhc2pd().s[22]++;HAQuerySelectorEvent["ON_LOVELACE_PANEL_LOAD"]="onLovelacePanelLoad";cov_jnkfhc2pd().s[23]++;HAQuerySelectorEvent["ON_LOVELACE_MORE_INFO_DIALOG_OPEN"]="onLovelaceMoreInfoDialogOpen";cov_jnkfhc2pd().s[24]++;HAQuerySelectorEvent["ON_LOVELACE_HISTORY_AND_LOGBOOK_DIALOG_OPEN"]="onLovelaceHistoryAndLogBookDialogOpen";cov_jnkfhc2pd().s[25]++;HAQuerySelectorEvent["ON_LOVELACE_SETTINGS_DIALOG_OPEN"]="onLovelaceSettingsDialogOpen";})((cov_jnkfhc2pd().b[3][0]++,HAQuerySelectorEvent)||(cov_jnkfhc2pd().b[3][1]++,HAQuerySelectorEvent={}));

    function cov_6tb7t1v3w(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts";var hash="b42906144c1f8f252a7c61b371bd49f8ffb953c9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts",statementMap:{"0":{start:{line:3,column:0},end:{line:19,column:46}},"1":{start:{line:4,column:4},end:{line:4,column:57}},"2":{start:{line:5,column:4},end:{line:5,column:67}},"3":{start:{line:6,column:4},end:{line:6,column:47}},"4":{start:{line:7,column:4},end:{line:7,column:49}},"5":{start:{line:8,column:4},end:{line:8,column:73}},"6":{start:{line:9,column:4},end:{line:9,column:63}},"7":{start:{line:10,column:4},end:{line:10,column:45}},"8":{start:{line:11,column:4},end:{line:11,column:42}},"9":{start:{line:12,column:4},end:{line:12,column:45}},"10":{start:{line:13,column:4},end:{line:13,column:67}},"11":{start:{line:14,column:4},end:{line:14,column:47}},"12":{start:{line:15,column:4},end:{line:15,column:54}},"13":{start:{line:16,column:4},end:{line:16,column:70}},"14":{start:{line:17,column:4},end:{line:17,column:100}},"15":{start:{line:18,column:4},end:{line:18,column:78}},"16":{start:{line:20,column:30},end:{line:54,column:1}},"17":{start:{line:55,column:34},end:{line:87,column:1}},"18":{start:{line:88,column:32},end:{line:123,column:1}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:1},end:{line:3,column:2}},loc:{start:{line:3,column:28},end:{line:19,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:19,column:3},end:{line:19,column:44}},type:"binary-expr",locations:[{start:{line:19,column:3},end:{line:19,column:18}},{start:{line:19,column:23},end:{line:19,column:43}}],line:19}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0},b:{"0":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts"],sourcesContent:["import { HomeAssistantNodeDescriptor } from '@types';\nimport {\n    $,\n    HA_ROOT_ELEMENT,\n    HA_RESOLVER_ELEMENT,\n    HA_DIALOG_ELEMENT\n} from '@constants';\n\nexport enum QUERY_SELECTORS {\n    HOME_ASSISTANT = 'home-assistant',\n    HOME_ASSISTANT_MAIN = 'home-assistant-main',\n    HA_DRAWER = 'ha-drawer',\n    HA_SIDEBAR = 'ha-sidebar',\n    PARTIAL_PANEL_RESOLVER = 'partial-panel-resolver',\n    HA_PANEL_LOVELACE = 'ha-panel-lovelace',\n    HUI_ROOT = 'hui-root',\n    HEADER = '.header',\n    HUI_VIEW = 'hui-view',\n    HA_MORE_INFO_DIALOG = 'ha-more-info-dialog',\n    HA_DIALOG = 'ha-dialog',\n    HA_DIALOG_CONTENT = '.content',\n    HA_MORE_INFO_DIALOG_INFO = 'ha-more-info-info',\n    HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK = 'ha-more-info-history-and-logbook',\n    HA_DIALOG_MORE_INFO_SETTINGS = 'ha-more-info-settings'\n}\n\nexport const ROOT_SELECTORS: HomeAssistantNodeDescriptor = {\n    [HA_ROOT_ELEMENT.HOME_ASSISTANT]: {\n        selector: QUERY_SELECTORS.HOME_ASSISTANT,\n        children: {\n            shadowRoot: {\n                selector: $,\n                children: {\n                    [HA_ROOT_ELEMENT.HOME_ASSISTANT_MAIN]: {\n                        selector: QUERY_SELECTORS.HOME_ASSISTANT_MAIN,\n                        children: {\n                            shadowRoot: {\n                                selector: $,\n                                children: {\n                                    [HA_ROOT_ELEMENT.HA_DRAWER]: {\n                                        selector: QUERY_SELECTORS.HA_DRAWER,\n                                        children: {\n                                            [HA_ROOT_ELEMENT.HA_SIDEBAR]: {\n                                                selector: QUERY_SELECTORS.HA_SIDEBAR,\n                                                children: {\n                                                    shadowRoot: {\n                                                        selector: $\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport const RESOLVER_SELECTORS: HomeAssistantNodeDescriptor = {\n    [HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER]: {\n        selector: QUERY_SELECTORS.PARTIAL_PANEL_RESOLVER,\n        children: {\n            [HA_RESOLVER_ELEMENT.HA_PANEL_LOVELACE]: {\n                selector: QUERY_SELECTORS.HA_PANEL_LOVELACE,\n                children: {\n                    shadowRoot: {\n                        selector: $,\n                        children: {\n                            [HA_RESOLVER_ELEMENT.HUI_ROOT]: {\n                                selector: QUERY_SELECTORS.HUI_ROOT,\n                                children: {\n                                    shadowRoot: {\n                                        selector: $,\n                                        children: {\n                                            [HA_RESOLVER_ELEMENT.HEADER]: {\n                                                selector: QUERY_SELECTORS.HEADER,\n                                            },\n                                            [HA_RESOLVER_ELEMENT.HUI_VIEW]: {\n                                                selector: QUERY_SELECTORS.HUI_VIEW\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport const DIALOG_SELECTORS: HomeAssistantNodeDescriptor = {\n    shadowRoot: {\n        selector: $,\n        children: {\n            [HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG]: {\n                selector: QUERY_SELECTORS.HA_MORE_INFO_DIALOG,\n                children: {\n                    shadowRoot: {\n                        selector: $,\n                        children: {\n                            [HA_DIALOG_ELEMENT.HA_DIALOG]: {\n                                selector: QUERY_SELECTORS.HA_DIALOG,\n                                children: {\n                                    [HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT]: {\n                                        selector: QUERY_SELECTORS.HA_DIALOG_CONTENT,\n                                        children: {\n                                            [HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]: {\n                                                selector: QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO\n                                            },\n                                            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]: {\n                                                selector: QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK\n                                            },\n                                            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]: {\n                                                selector: QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};"],names:[],mappings:"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",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b42906144c1f8f252a7c61b371bd49f8ffb953c9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_6tb7t1v3w=function(){return actualCoverage;};}return actualCoverage;}cov_6tb7t1v3w();var QUERY_SELECTORS;cov_6tb7t1v3w().s[0]++;(function(QUERY_SELECTORS){cov_6tb7t1v3w().f[0]++;cov_6tb7t1v3w().s[1]++;QUERY_SELECTORS["HOME_ASSISTANT"]="home-assistant";cov_6tb7t1v3w().s[2]++;QUERY_SELECTORS["HOME_ASSISTANT_MAIN"]="home-assistant-main";cov_6tb7t1v3w().s[3]++;QUERY_SELECTORS["HA_DRAWER"]="ha-drawer";cov_6tb7t1v3w().s[4]++;QUERY_SELECTORS["HA_SIDEBAR"]="ha-sidebar";cov_6tb7t1v3w().s[5]++;QUERY_SELECTORS["PARTIAL_PANEL_RESOLVER"]="partial-panel-resolver";cov_6tb7t1v3w().s[6]++;QUERY_SELECTORS["HA_PANEL_LOVELACE"]="ha-panel-lovelace";cov_6tb7t1v3w().s[7]++;QUERY_SELECTORS["HUI_ROOT"]="hui-root";cov_6tb7t1v3w().s[8]++;QUERY_SELECTORS["HEADER"]=".header";cov_6tb7t1v3w().s[9]++;QUERY_SELECTORS["HUI_VIEW"]="hui-view";cov_6tb7t1v3w().s[10]++;QUERY_SELECTORS["HA_MORE_INFO_DIALOG"]="ha-more-info-dialog";cov_6tb7t1v3w().s[11]++;QUERY_SELECTORS["HA_DIALOG"]="ha-dialog";cov_6tb7t1v3w().s[12]++;QUERY_SELECTORS["HA_DIALOG_CONTENT"]=".content";cov_6tb7t1v3w().s[13]++;QUERY_SELECTORS["HA_MORE_INFO_DIALOG_INFO"]="ha-more-info-info";cov_6tb7t1v3w().s[14]++;QUERY_SELECTORS["HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK"]="ha-more-info-history-and-logbook";cov_6tb7t1v3w().s[15]++;QUERY_SELECTORS["HA_DIALOG_MORE_INFO_SETTINGS"]="ha-more-info-settings";})((cov_6tb7t1v3w().b[0][0]++,QUERY_SELECTORS)||(cov_6tb7t1v3w().b[0][1]++,QUERY_SELECTORS={}));const ROOT_SELECTORS=(cov_6tb7t1v3w().s[16]++,{[HA_ROOT_ELEMENT.HOME_ASSISTANT]:{selector:QUERY_SELECTORS.HOME_ASSISTANT,children:{shadowRoot:{selector:$,children:{[HA_ROOT_ELEMENT.HOME_ASSISTANT_MAIN]:{selector:QUERY_SELECTORS.HOME_ASSISTANT_MAIN,children:{shadowRoot:{selector:$,children:{[HA_ROOT_ELEMENT.HA_DRAWER]:{selector:QUERY_SELECTORS.HA_DRAWER,children:{[HA_ROOT_ELEMENT.HA_SIDEBAR]:{selector:QUERY_SELECTORS.HA_SIDEBAR,children:{shadowRoot:{selector:$}}}}}}}}}}}}}});const RESOLVER_SELECTORS=(cov_6tb7t1v3w().s[17]++,{[HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER]:{selector:QUERY_SELECTORS.PARTIAL_PANEL_RESOLVER,children:{[HA_RESOLVER_ELEMENT.HA_PANEL_LOVELACE]:{selector:QUERY_SELECTORS.HA_PANEL_LOVELACE,children:{shadowRoot:{selector:$,children:{[HA_RESOLVER_ELEMENT.HUI_ROOT]:{selector:QUERY_SELECTORS.HUI_ROOT,children:{shadowRoot:{selector:$,children:{[HA_RESOLVER_ELEMENT.HEADER]:{selector:QUERY_SELECTORS.HEADER},[HA_RESOLVER_ELEMENT.HUI_VIEW]:{selector:QUERY_SELECTORS.HUI_VIEW}}}}}}}}}}}});const DIALOG_SELECTORS=(cov_6tb7t1v3w().s[18]++,{shadowRoot:{selector:$,children:{[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG]:{selector:QUERY_SELECTORS.HA_MORE_INFO_DIALOG,children:{shadowRoot:{selector:$,children:{[HA_DIALOG_ELEMENT.HA_DIALOG]:{selector:QUERY_SELECTORS.HA_DIALOG,children:{[HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT]:{selector:QUERY_SELECTORS.HA_DIALOG_CONTENT,children:{[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]:{selector:QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO},[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]:{selector:QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK},[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]:{selector:QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS}}}}}}}}}}}});

    function t(t,n,e,o){return new(e||(e=Promise))((function(r,i){function l(t){try{s(o.next(t));}catch(t){i(t);}}function u(t){try{s(o.throw(t));}catch(t){i(t);}}function s(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n);}))).then(l,u);}s((o=o.apply(t,n||[])).next());}))}function n(t,n,e,o){if("a"===e&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?t!==n||!o:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return "m"===e?o:"a"===e?o.call(t):o?o.value:n.get(t)}function e(t,n,e,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?t!==n||!r:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return "a"===o?r.call(t,e):r?r.value=e:n.set(t,e),e}"function"==typeof SuppressedError&&SuppressedError;const o="$",r=":host",i="invalid selector",l=10,u=10,s=t=>{const[n,e]=t;return (o=n)&&(o instanceof Document||o instanceof Element)&&"string"==typeof e;var o;};function c(t,n){return function(t){return t.split(",").map((t=>t.trim()))}(t).map((t=>{const e=function(t){return t.split(o).map((t=>t.trim()))}(t);return n(e)}))}function f(t,n,e,o,r=!1){return new Promise((l=>{let u=0;const s=()=>{const c=r?t.querySelectorAll(n):t.querySelector(n);r&&c.length||!r&&null!==c?l(c):(u++,u<e?setTimeout(s,o):l(r?document.querySelectorAll(i):null));};s();}))}function a(t,n,e){return new Promise((o=>{let r=0;const i=()=>{const l=t.shadowRoot;l?o(l):(r++,r<n?setTimeout(i,e):o(null));};i();}))}function d(t,n){return `${t} cannot be used with a selector ending in a shadowRoot (${o}).${n?` If you want to select a shadowRoot, use ${n} instead.`:""}`}function y(t){return t instanceof Promise?t:Promise.resolve(t)}function w(){return `You can not select a shadowRoot (${o}) of the document.`}function p(n,e,o,i){return t(this,void 0,void 0,(function*(){let t=null;const l=n.length;for(let u=0;u<l;u++){if(0===u)if(n[u].length)t=yield f(e,n[u],o,i);else {if(e instanceof Document)throw new SyntaxError(w());t=e.shadowRoot?yield f(e.shadowRoot,n[++u],o,i):null;}else {const e=yield a(t,o,i);t=e?yield f(e,`${r} ${n[u]}`,o,i):null;}if(null===t)return null}return t}))}function x(n,e,o,r){return t(this,void 0,void 0,(function*(){const t=c(n,(t=>{if(!t[t.length-1].length)throw new SyntaxError(d("asyncQuerySelector","asyncShadowRootQuerySelector"));return t})),i=t.length;for(let n=0;n<i;n++){const i=yield p(t[n],e,o,r);if(i)return i}return null}))}var A,N;function D(...n){return t(this,void 0,void 0,(function*(){if(s(n)){const[t,e,o]=n;return yield x(e,t,(null==o?void 0:o.retries)||l,(null==o?void 0:o.delay)||u)}const[t,e]=n;return yield x(t,document,(null==e?void 0:e.retries)||l,(null==e?void 0:e.delay)||u)}))}class C{constructor(t,n){A.set(this,void 0),N.set(this,void 0),t instanceof Node||t instanceof Promise?(e(this,A,t,"f"),e(this,N,Object.assign({retries:l,delay:u},n||{}),"f")):(e(this,A,document,"f"),e(this,N,Object.assign({retries:l,delay:u},t||{}),"f"));}get element(){return y(n(this,A,"f")).then((t=>t instanceof NodeList?t[0]||null:t))}get[(A=new WeakMap,N=new WeakMap,o)](){const t=y(n(this,A,"f")).then((t=>t instanceof Document||t instanceof ShadowRoot||null===t||t instanceof NodeList&&0===t.length?null:t instanceof NodeList?a(t[0],n(this,N,"f").retries,n(this,N,"f").delay):a(t,n(this,N,"f").retries,n(this,N,"f").delay)));return new C(t,n(this,N,"f"))}get all(){return y(n(this,A,"f")).then((t=>t instanceof NodeList?t:document.querySelectorAll(i)))}get asyncParams(){return n(this,N,"f")}eq(e){return t(this,void 0,void 0,(function*(){return y(n(this,A,"f")).then((t=>t instanceof NodeList&&t[e]||null))}))}query(t){const e=y(n(this,A,"f")).then((e=>null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?f(e[0],t,n(this,N,"f").retries,n(this,N,"f").delay,!0):f(e,t,n(this,N,"f").retries,n(this,N,"f").delay,!0)));return new C(e,n(this,N,"f"))}}

    function cov_1h2goi2f99(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts";var hash="14e288e47457c747f3996a24d5db42ef95618664";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts",statementMap:{"0":{start:{line:4,column:17},end:{line:6,column:14}},"1":{start:{line:4,column:43},end:{line:6,column:14}},"2":{start:{line:7,column:32},end:{line:28,column:1}},"3":{start:{line:8,column:20},end:{line:8,column:46}},"4":{start:{line:9,column:4},end:{line:27,column:11}},"5":{start:{line:10,column:38},end:{line:10,column:43}},"6":{start:{line:11,column:8},end:{line:15,column:9}},"7":{start:{line:13,column:12},end:{line:14,column:132}},"8":{start:{line:16,column:24},end:{line:20,column:65}},"9":{start:{line:18,column:16},end:{line:18,column:112}},"10":{start:{line:21,column:8},end:{line:25,column:10}},"11":{start:{line:26,column:8},end:{line:26,column:19}},"12":{start:{line:29,column:26},end:{line:42,column:1}},"13":{start:{line:30,column:20},end:{line:30,column:40}},"14":{start:{line:31,column:4},end:{line:41,column:5}},"15":{start:{line:32,column:8},end:{line:40,column:9}},"16":{start:{line:33,column:12},end:{line:33,column:28}},"17":{start:{line:36,column:28},end:{line:36,column:62}},"18":{start:{line:37,column:12},end:{line:39,column:13}},"19":{start:{line:38,column:16},end:{line:38,column:31}},"20":{start:{line:43,column:37},end:{line:51,column:1}},"21":{start:{line:44,column:28},end:{line:44,column:52}},"22":{start:{line:45,column:4},end:{line:50,column:11}},"23":{start:{line:46,column:21},end:{line:46,column:42}},"24":{start:{line:47,column:29},end:{line:47,column:33}},"25":{start:{line:47,column:42},end:{line:47,column:68}},"26":{start:{line:48,column:8},end:{line:48,column:43}},"27":{start:{line:49,column:8},end:{line:49,column:19}},"28":{start:{line:52,column:38},end:{line:64,column:1}},"29":{start:{line:53,column:24},end:{line:58,column:5}},"30":{start:{line:59,column:20},end:{line:62,column:5}},"31":{start:{line:60,column:8},end:{line:60,column:34}},"32":{start:{line:61,column:8},end:{line:61,column:20}},"33":{start:{line:63,column:4},end:{line:63,column:43}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:43},end:{line:6,column:14}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:7,column:32},end:{line:7,column:33}},loc:{start:{line:7,column:96},end:{line:28,column:1}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:9,column:26},end:{line:9,column:27}},loc:{start:{line:9,column:42},end:{line:27,column:5}},line:9},"3":{name:"(anonymous_3)",decl:{start:{line:17,column:31},end:{line:17,column:32}},loc:{start:{line:17,column:44},end:{line:19,column:13}},line:17},"4":{name:"(anonymous_4)",decl:{start:{line:29,column:26},end:{line:29,column:27}},loc:{start:{line:29,column:41},end:{line:42,column:1}},line:29},"5":{name:"(anonymous_5)",decl:{start:{line:43,column:37},end:{line:43,column:38}},loc:{start:{line:43,column:60},end:{line:51,column:1}},line:43},"6":{name:"(anonymous_6)",decl:{start:{line:45,column:34},end:{line:45,column:35}},loc:{start:{line:45,column:48},end:{line:50,column:5}},line:45},"7":{name:"(anonymous_7)",decl:{start:{line:52,column:38},end:{line:52,column:39}},loc:{start:{line:52,column:67},end:{line:64,column:1}},line:52},"8":{name:"(anonymous_8)",decl:{start:{line:59,column:20},end:{line:59,column:21}},loc:{start:{line:59,column:35},end:{line:62,column:5}},line:59}},branchMap:{"0":{loc:{start:{line:4,column:43},end:{line:6,column:14}},type:"cond-expr",locations:[{start:{line:5,column:6},end:{line:5,column:24}},{start:{line:6,column:6},end:{line:6,column:14}}],line:4},"1":{loc:{start:{line:7,column:47},end:{line:7,column:65}},type:"default-arg",locations:[{start:{line:7,column:61},end:{line:7,column:65}}],line:7},"2":{loc:{start:{line:7,column:67},end:{line:7,column:91}},type:"default-arg",locations:[{start:{line:7,column:86},end:{line:7,column:91}}],line:7},"3":{loc:{start:{line:8,column:35},end:{line:8,column:45}},type:"binary-expr",locations:[{start:{line:8,column:35},end:{line:8,column:39}},{start:{line:8,column:43},end:{line:8,column:45}}],line:8},"4":{loc:{start:{line:11,column:8},end:{line:15,column:9}},type:"if",locations:[{start:{line:11,column:8},end:{line:15,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:11},"5":{loc:{start:{line:11,column:12},end:{line:12,column:23}},type:"binary-expr",locations:[{start:{line:11,column:12},end:{line:11,column:41}},{start:{line:12,column:12},end:{line:12,column:23}}],line:11},"6":{loc:{start:{line:13,column:19},end:{line:14,column:131}},type:"cond-expr",locations:[{start:{line:14,column:18},end:{line:14,column:125}},{start:{line:14,column:128},end:{line:14,column:131}}],line:13},"7":{loc:{start:{line:16,column:24},end:{line:20,column:65}},type:"cond-expr",locations:[{start:{line:17,column:14},end:{line:19,column:14}},{start:{line:20,column:14},end:{line:20,column:65}}],line:16},"8":{loc:{start:{line:32,column:8},end:{line:40,column:9}},type:"if",locations:[{start:{line:32,column:8},end:{line:40,column:9}},{start:{line:35,column:13},end:{line:40,column:9}}],line:32},"9":{loc:{start:{line:37,column:12},end:{line:39,column:13}},type:"if",locations:[{start:{line:37,column:12},end:{line:39,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0],"2":[0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts"],sourcesContent:["import {\n    HAQuerySelectorConfig,\n    HomeAssistantNodeDescriptor,\n    HomeAssistantElement,\n    NodeDescriptorProps,\n    ElementProps,\n    HAElement\n} from '@types';\nimport { $, HA_DIALOG_ELEMENT } from '@constants';\nimport { AsyncSelector, asyncQuerySelector } from 'shadow-dom-selector';\n\nconst getQuery = (selector: string, shadowRoot: boolean) => shadowRoot\n    ? $ + ' ' + selector\n    : selector;\n\nexport const getAsyncElements = (\n    config: HAQuerySelectorConfig,\n    node: HomeAssistantNodeDescriptor,\n    fromElement: Promise<Element> = null,\n    insideShadowRoot = false,\n): HomeAssistantElement => {\n\n    const entries = Object.entries(node || {});\n\n    return entries.reduce((acc: HomeAssistantElement, entry: [string, NodeDescriptorProps]): HomeAssistantElement => {\n\n        const [key, nodeDescriptor] = entry;\n\n        if (\n            nodeDescriptor.selector === $ &&\n            fromElement\n        ) {\n\n            return nodeDescriptor.children\n                ? {\n                    ...acc,\n                    ...getAsyncElements(\n                        config,\n                        nodeDescriptor.children,\n                        fromElement,\n                        true\n                    )\n                }\n                : acc;\n\n        }\n\n        const element: Promise<Element | null> = fromElement\n            ? fromElement.then((element: Element | null) => {\n                return asyncQuerySelector(\n                    element,\n                    getQuery(nodeDescriptor.selector, insideShadowRoot),\n                    config\n                );\n            })\n            : asyncQuerySelector(nodeDescriptor.selector, config);\n\n        acc[key] = {\n            element,\n            children: getAsyncElements(\n                config,\n                nodeDescriptor.children,\n                element\n            ),\n            selector: new AsyncSelector(\n                element,\n                config\n            )\n        };\n\n        return acc;\n\n    }, {} as HomeAssistantElement);\n\n};\n\nexport const searchNode = (\n    key: string,\n    node: HomeAssistantElement\n): ElementProps => {\n    const entries = Object.entries(node) as [string, ElementProps][];\n    for (const entry of entries) {\n        if (entry[0] === key) {\n            return entry[1];\n        } else {\n            const noeDeep = searchNode(key, entry[1].children);\n            if (noeDeep) {\n                return noeDeep;\n            }\n        }\n    }\n};\n\nexport const flatHomeAssistantTree = <T extends object>(\n    rootElement: object,\n    tree: HomeAssistantElement\n): T => {\n    const rootElementKeys = Object.keys(rootElement);\n    return rootElementKeys.reduce(\n        (acc: Record<string, HAElement>, key: string): Record<string, HAElement> => {\n            const node = searchNode(key, tree);\n            const { children, ...rest } = node;\n            acc[key] = {\n                ...rest\n            };\n            return acc;\n        },\n        {} as Record<string, HAElement>\n    ) as T;\n};\n\nexport const getFinalDialogFlatTree = (\n    flatTree: Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>,\n    dialogElement: (\n        'HA_MORE_INFO_DIALOG_INFO' |\n        'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK' |\n        'HA_DIALOG_MORE_INFO_SETTINGS'\n    )\n): Record<keyof typeof HA_DIALOG_ELEMENT, HAElement> => {\n    const extractKeys = [\n        HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG,\n        HA_DIALOG_ELEMENT.HA_DIALOG,\n        HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT,\n        dialogElement\n    ];\n    const reducer = (\n        tree: Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>,\n        key: keyof typeof HA_DIALOG_ELEMENT\n    ): Record<keyof typeof HA_DIALOG_ELEMENT, HAElement> => {\n        tree[key] = flatTree[key];\n        return tree;\n    };\n    return extractKeys.reduce(\n        reducer,\n        {} as Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>\n    );\n};"],names:[],mappings:"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",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14e288e47457c747f3996a24d5db42ef95618664"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_1h2goi2f99=function(){return actualCoverage;};}return actualCoverage;}cov_1h2goi2f99();cov_1h2goi2f99().s[0]++;const getQuery=(selector,shadowRoot)=>{cov_1h2goi2f99().f[0]++;cov_1h2goi2f99().s[1]++;return shadowRoot?(cov_1h2goi2f99().b[0][0]++,$+' '+selector):(cov_1h2goi2f99().b[0][1]++,selector);};cov_1h2goi2f99().s[2]++;const getAsyncElements=(config,node,fromElement=(cov_1h2goi2f99().b[1][0]++,null),insideShadowRoot=(cov_1h2goi2f99().b[2][0]++,false))=>{cov_1h2goi2f99().f[1]++;const entries=(cov_1h2goi2f99().s[3]++,Object.entries((cov_1h2goi2f99().b[3][0]++,node)||(cov_1h2goi2f99().b[3][1]++,{})));cov_1h2goi2f99().s[4]++;return entries.reduce((acc,entry)=>{cov_1h2goi2f99().f[2]++;const[key,nodeDescriptor]=(cov_1h2goi2f99().s[5]++,entry);cov_1h2goi2f99().s[6]++;if((cov_1h2goi2f99().b[5][0]++,nodeDescriptor.selector===$)&&(cov_1h2goi2f99().b[5][1]++,fromElement)){cov_1h2goi2f99().b[4][0]++;cov_1h2goi2f99().s[7]++;return nodeDescriptor.children?(cov_1h2goi2f99().b[6][0]++,Object.assign(Object.assign({},acc),getAsyncElements(config,nodeDescriptor.children,fromElement,true))):(cov_1h2goi2f99().b[6][1]++,acc);}else {cov_1h2goi2f99().b[4][1]++;}const element=(cov_1h2goi2f99().s[8]++,fromElement?(cov_1h2goi2f99().b[7][0]++,fromElement.then(element=>{cov_1h2goi2f99().f[3]++;cov_1h2goi2f99().s[9]++;return D(element,getQuery(nodeDescriptor.selector,insideShadowRoot),config);})):(cov_1h2goi2f99().b[7][1]++,D(nodeDescriptor.selector,config)));cov_1h2goi2f99().s[10]++;acc[key]={element,children:getAsyncElements(config,nodeDescriptor.children,element),selector:new C(element,config)};cov_1h2goi2f99().s[11]++;return acc;},{});};cov_1h2goi2f99().s[12]++;const searchNode=(key,node)=>{cov_1h2goi2f99().f[4]++;const entries=(cov_1h2goi2f99().s[13]++,Object.entries(node));cov_1h2goi2f99().s[14]++;for(const entry of entries){cov_1h2goi2f99().s[15]++;if(entry[0]===key){cov_1h2goi2f99().b[8][0]++;cov_1h2goi2f99().s[16]++;return entry[1];}else {cov_1h2goi2f99().b[8][1]++;const noeDeep=(cov_1h2goi2f99().s[17]++,searchNode(key,entry[1].children));cov_1h2goi2f99().s[18]++;if(noeDeep){cov_1h2goi2f99().b[9][0]++;cov_1h2goi2f99().s[19]++;return noeDeep;}else {cov_1h2goi2f99().b[9][1]++;}}}};cov_1h2goi2f99().s[20]++;const flatHomeAssistantTree=(rootElement,tree)=>{cov_1h2goi2f99().f[5]++;const rootElementKeys=(cov_1h2goi2f99().s[21]++,Object.keys(rootElement));cov_1h2goi2f99().s[22]++;return rootElementKeys.reduce((acc,key)=>{cov_1h2goi2f99().f[6]++;const node=(cov_1h2goi2f99().s[23]++,searchNode(key,tree));(cov_1h2goi2f99().s[24]++,node);const rest=(cov_1h2goi2f99().s[25]++,__rest(node,["children"]));cov_1h2goi2f99().s[26]++;acc[key]=Object.assign({},rest);cov_1h2goi2f99().s[27]++;return acc;},{});};cov_1h2goi2f99().s[28]++;const getFinalDialogFlatTree=(flatTree,dialogElement)=>{cov_1h2goi2f99().f[7]++;const extractKeys=(cov_1h2goi2f99().s[29]++,[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG,HA_DIALOG_ELEMENT.HA_DIALOG,HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT,dialogElement]);cov_1h2goi2f99().s[30]++;const reducer=(tree,key)=>{cov_1h2goi2f99().f[8]++;cov_1h2goi2f99().s[31]++;tree[key]=flatTree[key];cov_1h2goi2f99().s[32]++;return tree;};cov_1h2goi2f99().s[33]++;return extractKeys.reduce(reducer,{});};

    function cov_2m9674fn89(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts";var hash="4622ce010f2b8e5c3e783ba6a3c668dd2e0f5889";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts",statementMap:{"0":{start:{line:8,column:8},end:{line:8,column:16}},"1":{start:{line:9,column:8},end:{line:9,column:45}},"2":{start:{line:10,column:8},end:{line:10,column:50}},"3":{start:{line:11,column:8},end:{line:11,column:54}},"4":{start:{line:12,column:8},end:{line:12,column:65}},"5":{start:{line:13,column:8},end:{line:13,column:69}},"6":{start:{line:14,column:8},end:{line:14,column:60}},"7":{start:{line:15,column:8},end:{line:15,column:58}},"8":{start:{line:16,column:8},end:{line:16,column:62}},"9":{start:{line:17,column:8},end:{line:17,column:59}},"10":{start:{line:18,column:8},end:{line:18,column:66}},"11":{start:{line:19,column:8},end:{line:19,column:65}},"12":{start:{line:20,column:8},end:{line:20,column:60}},"13":{start:{line:21,column:8},end:{line:21,column:62}},"14":{start:{line:22,column:8},end:{line:22,column:69}},"15":{start:{line:23,column:8},end:{line:23,column:65}},"16":{start:{line:24,column:8},end:{line:24,column:63}},"17":{start:{line:25,column:8},end:{line:25,column:52}},"18":{start:{line:26,column:8},end:{line:26,column:125}},"19":{start:{line:29,column:8},end:{line:29,column:184}},"20":{start:{line:30,column:8},end:{line:30,column:198}},"21":{start:{line:31,column:8},end:{line:31,column:190}},"22":{start:{line:32,column:8},end:{line:32,column:186}},"23":{start:{line:33,column:8},end:{line:33,column:170}},"24":{start:{line:34,column:8},end:{line:34,column:184}},"25":{start:{line:35,column:8},end:{line:35,column:179}},"26":{start:{line:36,column:8},end:{line:36,column:172}},"27":{start:{line:37,column:8},end:{line:37,column:118}},"28":{start:{line:38,column:8},end:{line:38,column:122}},"29":{start:{line:41,column:8},end:{line:41,column:56}},"30":{start:{line:44,column:0},end:{line:138,column:2}},"31":{start:{line:45,column:4},end:{line:45,column:58}},"32":{start:{line:47,column:4},end:{line:47,column:254}},"33":{start:{line:48,column:29},end:{line:48,column:133}},"34":{start:{line:49,column:4},end:{line:56,column:7}},"35":{start:{line:52,column:8},end:{line:52,column:96}},"36":{start:{line:53,column:8},end:{line:55,column:11}},"37":{start:{line:57,column:4},end:{line:57,column:130}},"38":{start:{line:58,column:38},end:{line:62,column:5}},"39":{start:{line:63,column:4},end:{line:63,column:221}},"40":{start:{line:65,column:4},end:{line:65,column:172}},"41":{start:{line:66,column:4},end:{line:66,column:186}},"42":{start:{line:67,column:4},end:{line:74,column:7}},"43":{start:{line:70,column:8},end:{line:70,column:89}},"44":{start:{line:71,column:8},end:{line:73,column:11}},"45":{start:{line:76,column:22},end:{line:76,column:32}},"46":{start:{line:77,column:4},end:{line:79,column:5}},"47":{start:{line:78,column:8},end:{line:78,column:15}},"48":{start:{line:80,column:4},end:{line:80,column:76}},"49":{start:{line:81,column:4},end:{line:81,column:283}},"50":{start:{line:82,column:4},end:{line:82,column:198}},"51":{start:{line:83,column:4},end:{line:90,column:7}},"52":{start:{line:86,column:8},end:{line:86,column:95}},"53":{start:{line:87,column:8},end:{line:89,column:11}},"54":{start:{line:91,column:4},end:{line:98,column:7}},"55":{start:{line:94,column:8},end:{line:94,column:90}},"56":{start:{line:95,column:8},end:{line:97,column:11}},"57":{start:{line:99,column:4},end:{line:99,column:328}},"58":{start:{line:101,column:4},end:{line:107,column:7}},"59":{start:{line:102,column:8},end:{line:106,column:11}},"60":{start:{line:103,column:12},end:{line:105,column:13}},"61":{start:{line:104,column:16},end:{line:104,column:128}},"62":{start:{line:109,column:4},end:{line:121,column:7}},"63":{start:{line:110,column:8},end:{line:120,column:11}},"64":{start:{line:111,column:28},end:{line:115,column:13}},"65":{start:{line:116,column:12},end:{line:119,column:13}},"66":{start:{line:117,column:43},end:{line:117,column:57}},"67":{start:{line:118,column:16},end:{line:118,column:157}},"68":{start:{line:123,column:4},end:{line:129,column:7}},"69":{start:{line:124,column:8},end:{line:128,column:11}},"70":{start:{line:125,column:12},end:{line:127,column:13}},"71":{start:{line:126,column:16},end:{line:126,column:130}},"72":{start:{line:131,column:4},end:{line:137,column:7}},"73":{start:{line:132,column:8},end:{line:136,column:11}},"74":{start:{line:133,column:12},end:{line:135,column:13}},"75":{start:{line:134,column:16},end:{line:134,column:130}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:29},end:{line:27,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:28,column:4},end:{line:28,column:5}},loc:{start:{line:28,column:13},end:{line:39,column:5}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:40,column:4},end:{line:40,column:5}},loc:{start:{line:40,column:46},end:{line:42,column:5}},line:40},"3":{name:"_HAQuerySelector_dispatchEvent",decl:{start:{line:44,column:921},end:{line:44,column:951}},loc:{start:{line:44,column:966},end:{line:46,column:1}},line:44},"4":{name:"_HAQuerySelector_updateDialogElements",decl:{start:{line:46,column:52},end:{line:46,column:89}},loc:{start:{line:46,column:150},end:{line:64,column:1}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:56,column:5}},line:51},"6":{name:"_HAQuerySelector_updateRootElements",decl:{start:{line:64,column:50},end:{line:64,column:85}},loc:{start:{line:64,column:88},end:{line:75,column:1}},line:64},"7":{name:"(anonymous_7)",decl:{start:{line:69,column:14},end:{line:69,column:15}},loc:{start:{line:69,column:30},end:{line:74,column:5}},line:69},"8":{name:"_HAQuerySelector_updateResolverElements",decl:{start:{line:75,column:54},end:{line:75,column:93}},loc:{start:{line:75,column:96},end:{line:100,column:1}},line:75},"9":{name:"(anonymous_9)",decl:{start:{line:85,column:14},end:{line:85,column:15}},loc:{start:{line:85,column:40},end:{line:90,column:5}},line:85},"10":{name:"(anonymous_10)",decl:{start:{line:93,column:14},end:{line:93,column:15}},loc:{start:{line:93,column:38},end:{line:98,column:5}},line:93},"11":{name:"_HAQuerySelector_watchDialogs",decl:{start:{line:100,column:44},end:{line:100,column:73}},loc:{start:{line:100,column:85},end:{line:108,column:1}},line:100},"12":{name:"(anonymous_12)",decl:{start:{line:101,column:22},end:{line:101,column:23}},loc:{start:{line:101,column:42},end:{line:107,column:5}},line:101},"13":{name:"(anonymous_13)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:37},end:{line:106,column:9}},line:102},"14":{name:"_HAQuerySelector_watchDialogsContent",decl:{start:{line:108,column:51},end:{line:108,column:87}},loc:{start:{line:108,column:99},end:{line:122,column:1}},line:108},"15":{name:"(anonymous_15)",decl:{start:{line:109,column:22},end:{line:109,column:23}},loc:{start:{line:109,column:42},end:{line:121,column:5}},line:109},"16":{name:"(anonymous_16)",decl:{start:{line:110,column:27},end:{line:110,column:28}},loc:{start:{line:110,column:37},end:{line:120,column:9}},line:110},"17":{name:"_HAQuerySelector_watchDashboards",decl:{start:{line:122,column:47},end:{line:122,column:79}},loc:{start:{line:122,column:91},end:{line:130,column:1}},line:122},"18":{name:"(anonymous_18)",decl:{start:{line:123,column:22},end:{line:123,column:23}},loc:{start:{line:123,column:42},end:{line:129,column:5}},line:123},"19":{name:"(anonymous_19)",decl:{start:{line:124,column:27},end:{line:124,column:28}},loc:{start:{line:124,column:37},end:{line:128,column:9}},line:124},"20":{name:"_HAQuerySelector_watchLovelace",decl:{start:{line:130,column:45},end:{line:130,column:75}},loc:{start:{line:130,column:87},end:{line:138,column:1}},line:130},"21":{name:"(anonymous_21)",decl:{start:{line:131,column:22},end:{line:131,column:23}},loc:{start:{line:131,column:42},end:{line:137,column:5}},line:131},"22":{name:"(anonymous_22)",decl:{start:{line:132,column:27},end:{line:132,column:28}},loc:{start:{line:132,column:37},end:{line:136,column:9}},line:132}},branchMap:{"0":{loc:{start:{line:7,column:16},end:{line:7,column:27}},type:"default-arg",locations:[{start:{line:7,column:25},end:{line:7,column:27}}],line:7},"1":{loc:{start:{line:46,column:90},end:{line:46,column:148}},type:"default-arg",locations:[{start:{line:46,column:106},end:{line:46,column:148}}],line:46},"2":{loc:{start:{line:77,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:79,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:77},"3":{loc:{start:{line:103,column:12},end:{line:105,column:13}},type:"if",locations:[{start:{line:103,column:12},end:{line:105,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:103},"4":{loc:{start:{line:116,column:12},end:{line:119,column:13}},type:"if",locations:[{start:{line:116,column:12},end:{line:119,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:116},"5":{loc:{start:{line:116,column:16},end:{line:116,column:59}},type:"binary-expr",locations:[{start:{line:116,column:16},end:{line:116,column:30}},{start:{line:116,column:34},end:{line:116,column:59}}],line:116},"6":{loc:{start:{line:125,column:12},end:{line:127,column:13}},type:"if",locations:[{start:{line:125,column:12},end:{line:127,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:125},"7":{loc:{start:{line:133,column:12},end:{line:135,column:13}},type:"if",locations:[{start:{line:133,column:12},end:{line:135,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:133}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},b:{"0":[0],"1":[0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts"],sourcesContent:["import {\n    HAQuerySelectorConfig,\n    HomeAssistantElement,\n    HAElement,\n    ElementProps,\n    HAQuerySelectorEventListener\n} from '@types';\nimport {\n    DEFAULT_CONFIG,\n    HA_ROOT_ELEMENT,\n    HA_RESOLVER_ELEMENT,\n    HA_DIALOG_ELEMENT,\n    TIMESTAMP_THESHOLD,\n    HAQuerySelectorEvent\n} from '@constants';\nimport {\n    QUERY_SELECTORS,\n    ROOT_SELECTORS,\n    RESOLVER_SELECTORS,\n    DIALOG_SELECTORS\n} from '@selectors';\nimport {\n    getAsyncElements,\n    flatHomeAssistantTree,\n    getFinalDialogFlatTree\n} from '@utilities';\n\ntype OnLovelacePanelLoadDetail = Record<\n    keyof typeof HA_ROOT_ELEMENT |\n    keyof typeof HA_RESOLVER_ELEMENT,\n    HAElement\n>;\n\ntype OnLovelaceMoreInfoDialogOpenDetail = Record<\n    Exclude<\n        keyof typeof HA_DIALOG_ELEMENT,\n        'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK' |\n        'HA_DIALOG_MORE_INFO_SETTINGS'\n    >,\n    HAElement\n>;\n\ntype OnLovelaceHistoryAndLogBookDialogOpenDetail = Record<\n    Exclude<\n        keyof typeof HA_DIALOG_ELEMENT,\n        'HA_MORE_INFO_DIALOG_INFO' |\n        'HA_DIALOG_MORE_INFO_SETTINGS'\n    >,\n    HAElement\n>;\n\ntype OnLovelaceSettingsDialogOpenDetail = Record<\n    Exclude<\n        keyof typeof HA_DIALOG_ELEMENT,\n        'HA_MORE_INFO_DIALOG_INFO' |\n        'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK'\n    >,\n    HAElement\n>;\n\nclass HAQuerySelector extends EventTarget {\n\n    constructor(config: HAQuerySelectorConfig = {}) {\n        super();\n        this.#config = {\n            ...DEFAULT_CONFIG,\n            ...config\n        };\n    }\n\n    #config: HAQuerySelectorConfig;\n\n    #dialogTree: HomeAssistantElement;\n    #homeAssistantRootTree: HomeAssistantElement;\n    #homeAssistantResolverTree: HomeAssistantElement;\n\n    #haDialogElements: Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>;\n    #haRootElements: Record<keyof typeof HA_ROOT_ELEMENT, HAElement>;\n    #haResolverElements: Record<keyof typeof HA_RESOLVER_ELEMENT, HAElement>;\n\n    #dialogsObserver: MutationObserver;\n    #dialogsContentObserver: MutationObserver;\n    #panelResolverObserver: MutationObserver;\n    #lovelaceObserver: MutationObserver;\n\n    #watchDialogsBinded: (mutations: MutationRecord[]) => void;\n    #watchDialogsContentBinded: (mutations: MutationRecord[]) => void;\n    #watchDashboardsBinded: (mutations: MutationRecord[]) => void;\n    #watchLovelaceBinded: (mutations: MutationRecord[]) => void;\n\n    #timestap: number;\n\n    #dispatchEvent(type: HAQuerySelectorEvent, detail?: Record<string, HAElement>) {\n        this.dispatchEvent(\n            new CustomEvent(type, { detail })\n        );\n    }\n\n    #updateDialogElements(\n        dialogElement: (\n            'HA_MORE_INFO_DIALOG_INFO' |\n            'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK' |\n            'HA_DIALOG_MORE_INFO_SETTINGS'\n        ) = HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO\n    ) {\n        this.#dialogTree = getAsyncElements(\n            this.#config,\n            DIALOG_SELECTORS,\n            this.#haRootElements.HOME_ASSISTANT.element\n        );\n        const haDialogElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>\n        >(\n            HA_DIALOG_ELEMENT,\n            this.#dialogTree\n        );\n        haDialogElements.HA_DIALOG_CONTENT\n            .element\n            .then((dialogContent: Element) => {\n                this.#dialogsContentObserver.disconnect();\n                this.#dialogsContentObserver.observe(dialogContent, {\n                    childList: true\n                });\n            });\n        this.#haDialogElements = getFinalDialogFlatTree(\n            haDialogElements,\n            dialogElement\n        );\n        const MoreInfoDialogEventMapper = {\n            [HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]: HAQuerySelectorEvent.ON_LOVELACE_MORE_INFO_DIALOG_OPEN,\n            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]: HAQuerySelectorEvent.ON_LOVELACE_HISTORY_AND_LOGBOOK_DIALOG_OPEN,\n            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]: HAQuerySelectorEvent.ON_LOVELACE_SETTINGS_DIALOG_OPEN,\n        } as const;\n        this.#dispatchEvent(\n            MoreInfoDialogEventMapper[dialogElement],\n            this.#haDialogElements\n        );\n    }\n\n    #updateRootElements() {\n        this.#homeAssistantRootTree = getAsyncElements(\n            this.#config,\n            ROOT_SELECTORS\n        );\n        this.#haRootElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_ROOT_ELEMENT, HAElement>\n        >(\n            HA_ROOT_ELEMENT,\n            this.#homeAssistantRootTree\n        );\n        this.#haRootElements[HA_ROOT_ELEMENT.HOME_ASSISTANT]\n            .selector.$.element\n            .then((shadowRoot: ShadowRoot): void => {\n                this.#dialogsObserver.disconnect();\n                this.#dialogsObserver.observe(shadowRoot, {\n                    childList: true\n                });\n            });\n    }\n\n    #updateResolverElements() {\n        // Avoid triggering onLovelacePanelLoad twice on yaml mode\n        const timestamp = Date.now();\n        if (timestamp - this.#timestap < TIMESTAMP_THESHOLD) {\n            return;\n        }\n        this.#timestap = timestamp;\n        this.#homeAssistantResolverTree = getAsyncElements(\n            this.#config,\n            RESOLVER_SELECTORS,\n            this.#haRootElements[HA_ROOT_ELEMENT.HA_DRAWER].element\n        );\n        this.#haResolverElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_RESOLVER_ELEMENT, HAElement>\n        >(\n            HA_RESOLVER_ELEMENT,\n            this.#homeAssistantResolverTree\n        );\n        this.#haResolverElements[HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER]\n            .element\n            .then((partialPanelResolver: Element): void => {\n                this.#panelResolverObserver.disconnect();\n                this.#panelResolverObserver.observe(partialPanelResolver, {\n                    childList: true\n                });\n        });\n        this.#haResolverElements[HA_RESOLVER_ELEMENT.HA_PANEL_LOVELACE]\n            .selector.$.element\n            .then((lovelaceShadowRoot: ShadowRoot) => {\n                this.#lovelaceObserver.disconnect();\n                this.#lovelaceObserver.observe(lovelaceShadowRoot, {\n                    childList: true\n                });\n            });\n        this.#dispatchEvent(\n            HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD,\n            {\n                ...this.#haRootElements,\n                ...this.#haResolverElements\n            }\n        );\n    }\n\n    #watchDialogs(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                if (node.localName === QUERY_SELECTORS.HA_MORE_INFO_DIALOG) {\n                    this.#updateDialogElements();\n                }\n            });\n        });\n    }\n\n    #watchDialogsContent(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                const mappers = {\n                    [QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO]: HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO,\n                    [QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]: HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,\n                    [QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS]: HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS,\n                } as const;\n                if (node.localName && node.localName in mappers) {\n                    const dialogElementQuery = node.localName as keyof typeof mappers;\n                    this.#updateDialogElements(mappers[dialogElementQuery]);\n                }\n            });\n          });\n    }\n\n    #watchDashboards(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                if (node.localName === QUERY_SELECTORS.HA_PANEL_LOVELACE) {\n                    this.#updateResolverElements();\n                }\n            });\n        });\n    }\n\n    #watchLovelace(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                if (node.localName === QUERY_SELECTORS.HUI_ROOT) {\n                    this.#updateResolverElements();\n                }\n            });\n        });\n    }\n\n    public listen() {\n\n        this.#watchDialogsBinded = this.#watchDialogs.bind(this);\n        this.#watchDialogsContentBinded = this.#watchDialogsContent.bind(this);\n        this.#watchDashboardsBinded = this.#watchDashboards.bind(this);\n        this.#watchLovelaceBinded = this.#watchLovelace.bind(this);\n\n        this.#dialogsObserver = new MutationObserver(this.#watchDialogsBinded);\n        this.#dialogsContentObserver = new MutationObserver(this.#watchDialogsContentBinded);\n        this.#panelResolverObserver = new MutationObserver(this.#watchDashboardsBinded);\n        this.#lovelaceObserver = new MutationObserver(this.#watchLovelaceBinded);\n\n        this.#updateRootElements();\n        this.#updateResolverElements();\n    }\n    \n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD}`,\n        callback: HAQuerySelectorEventListener<\n            OnLovelacePanelLoadDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_LOVELACE_MORE_INFO_DIALOG_OPEN}`,\n        callback: HAQuerySelectorEventListener<\n            OnLovelaceMoreInfoDialogOpenDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_LOVELACE_HISTORY_AND_LOGBOOK_DIALOG_OPEN}`,\n        callback: HAQuerySelectorEventListener<\n            OnLovelaceHistoryAndLogBookDialogOpenDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_LOVELACE_SETTINGS_DIALOG_OPEN}`,\n        callback: HAQuerySelectorEventListener<\n            OnLovelaceSettingsDialogOpenDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: string,\n        callback: EventListenerOrEventListenerObject,\n        options?: boolean | AddEventListenerOptions\n    ): void {\n        super.addEventListener(type, callback, options);\n    }\n\n}\n\nexport {\n    HAQuerySelector,\n    HAQuerySelectorEvent,\n    ElementProps,\n    OnLovelacePanelLoadDetail,\n    OnLovelaceMoreInfoDialogOpenDetail,\n    OnLovelaceHistoryAndLogBookDialogOpenDetail,\n    OnLovelaceSettingsDialogOpenDetail\n};"],names:[],mappings:"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",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4622ce010f2b8e5c3e783ba6a3c668dd2e0f5889"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_2m9674fn89=function(){return actualCoverage;};}return actualCoverage;}cov_2m9674fn89();var _HAQuerySelector_instances,_HAQuerySelector_config,_HAQuerySelector_dialogTree,_HAQuerySelector_homeAssistantRootTree,_HAQuerySelector_homeAssistantResolverTree,_HAQuerySelector_haDialogElements,_HAQuerySelector_haRootElements,_HAQuerySelector_haResolverElements,_HAQuerySelector_dialogsObserver,_HAQuerySelector_dialogsContentObserver,_HAQuerySelector_panelResolverObserver,_HAQuerySelector_lovelaceObserver,_HAQuerySelector_watchDialogsBinded,_HAQuerySelector_watchDialogsContentBinded,_HAQuerySelector_watchDashboardsBinded,_HAQuerySelector_watchLovelaceBinded,_HAQuerySelector_timestap,_HAQuerySelector_dispatchEvent,_HAQuerySelector_updateDialogElements,_HAQuerySelector_updateRootElements,_HAQuerySelector_updateResolverElements,_HAQuerySelector_watchDialogs,_HAQuerySelector_watchDialogsContent,_HAQuerySelector_watchDashboards,_HAQuerySelector_watchLovelace;class HAQuerySelector extends EventTarget{constructor(config=(cov_2m9674fn89().b[0][0]++,{})){cov_2m9674fn89().f[0]++;cov_2m9674fn89().s[0]++;super();cov_2m9674fn89().s[1]++;_HAQuerySelector_instances.add(this);cov_2m9674fn89().s[2]++;_HAQuerySelector_config.set(this,void 0);cov_2m9674fn89().s[3]++;_HAQuerySelector_dialogTree.set(this,void 0);cov_2m9674fn89().s[4]++;_HAQuerySelector_homeAssistantRootTree.set(this,void 0);cov_2m9674fn89().s[5]++;_HAQuerySelector_homeAssistantResolverTree.set(this,void 0);cov_2m9674fn89().s[6]++;_HAQuerySelector_haDialogElements.set(this,void 0);cov_2m9674fn89().s[7]++;_HAQuerySelector_haRootElements.set(this,void 0);cov_2m9674fn89().s[8]++;_HAQuerySelector_haResolverElements.set(this,void 0);cov_2m9674fn89().s[9]++;_HAQuerySelector_dialogsObserver.set(this,void 0);cov_2m9674fn89().s[10]++;_HAQuerySelector_dialogsContentObserver.set(this,void 0);cov_2m9674fn89().s[11]++;_HAQuerySelector_panelResolverObserver.set(this,void 0);cov_2m9674fn89().s[12]++;_HAQuerySelector_lovelaceObserver.set(this,void 0);cov_2m9674fn89().s[13]++;_HAQuerySelector_watchDialogsBinded.set(this,void 0);cov_2m9674fn89().s[14]++;_HAQuerySelector_watchDialogsContentBinded.set(this,void 0);cov_2m9674fn89().s[15]++;_HAQuerySelector_watchDashboardsBinded.set(this,void 0);cov_2m9674fn89().s[16]++;_HAQuerySelector_watchLovelaceBinded.set(this,void 0);cov_2m9674fn89().s[17]++;_HAQuerySelector_timestap.set(this,void 0);cov_2m9674fn89().s[18]++;__classPrivateFieldSet(this,_HAQuerySelector_config,Object.assign(Object.assign({},DEFAULT_CONFIG),config),"f");}listen(){cov_2m9674fn89().f[1]++;cov_2m9674fn89().s[19]++;__classPrivateFieldSet(this,_HAQuerySelector_watchDialogsBinded,__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_watchDialogs).bind(this),"f");cov_2m9674fn89().s[20]++;__classPrivateFieldSet(this,_HAQuerySelector_watchDialogsContentBinded,__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_watchDialogsContent).bind(this),"f");cov_2m9674fn89().s[21]++;__classPrivateFieldSet(this,_HAQuerySelector_watchDashboardsBinded,__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_watchDashboards).bind(this),"f");cov_2m9674fn89().s[22]++;__classPrivateFieldSet(this,_HAQuerySelector_watchLovelaceBinded,__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_watchLovelace).bind(this),"f");cov_2m9674fn89().s[23]++;__classPrivateFieldSet(this,_HAQuerySelector_dialogsObserver,new MutationObserver(__classPrivateFieldGet(this,_HAQuerySelector_watchDialogsBinded,"f")),"f");cov_2m9674fn89().s[24]++;__classPrivateFieldSet(this,_HAQuerySelector_dialogsContentObserver,new MutationObserver(__classPrivateFieldGet(this,_HAQuerySelector_watchDialogsContentBinded,"f")),"f");cov_2m9674fn89().s[25]++;__classPrivateFieldSet(this,_HAQuerySelector_panelResolverObserver,new MutationObserver(__classPrivateFieldGet(this,_HAQuerySelector_watchDashboardsBinded,"f")),"f");cov_2m9674fn89().s[26]++;__classPrivateFieldSet(this,_HAQuerySelector_lovelaceObserver,new MutationObserver(__classPrivateFieldGet(this,_HAQuerySelector_watchLovelaceBinded,"f")),"f");cov_2m9674fn89().s[27]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateRootElements).call(this);cov_2m9674fn89().s[28]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateResolverElements).call(this);}addEventListener(type,callback,options){cov_2m9674fn89().f[2]++;cov_2m9674fn89().s[29]++;super.addEventListener(type,callback,options);}}cov_2m9674fn89().s[30]++;_HAQuerySelector_config=new WeakMap(),_HAQuerySelector_dialogTree=new WeakMap(),_HAQuerySelector_homeAssistantRootTree=new WeakMap(),_HAQuerySelector_homeAssistantResolverTree=new WeakMap(),_HAQuerySelector_haDialogElements=new WeakMap(),_HAQuerySelector_haRootElements=new WeakMap(),_HAQuerySelector_haResolverElements=new WeakMap(),_HAQuerySelector_dialogsObserver=new WeakMap(),_HAQuerySelector_dialogsContentObserver=new WeakMap(),_HAQuerySelector_panelResolverObserver=new WeakMap(),_HAQuerySelector_lovelaceObserver=new WeakMap(),_HAQuerySelector_watchDialogsBinded=new WeakMap(),_HAQuerySelector_watchDialogsContentBinded=new WeakMap(),_HAQuerySelector_watchDashboardsBinded=new WeakMap(),_HAQuerySelector_watchLovelaceBinded=new WeakMap(),_HAQuerySelector_timestap=new WeakMap(),_HAQuerySelector_instances=new WeakSet(),_HAQuerySelector_dispatchEvent=function _HAQuerySelector_dispatchEvent(type,detail){cov_2m9674fn89().f[3]++;cov_2m9674fn89().s[31]++;this.dispatchEvent(new CustomEvent(type,{detail}));},_HAQuerySelector_updateDialogElements=function _HAQuerySelector_updateDialogElements(dialogElement=(cov_2m9674fn89().b[1][0]++,HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO)){cov_2m9674fn89().f[4]++;cov_2m9674fn89().s[32]++;__classPrivateFieldSet(this,_HAQuerySelector_dialogTree,getAsyncElements(__classPrivateFieldGet(this,_HAQuerySelector_config,"f"),DIALOG_SELECTORS,__classPrivateFieldGet(this,_HAQuerySelector_haRootElements,"f").HOME_ASSISTANT.element),"f");const haDialogElements=(cov_2m9674fn89().s[33]++,flatHomeAssistantTree(HA_DIALOG_ELEMENT,__classPrivateFieldGet(this,_HAQuerySelector_dialogTree,"f")));cov_2m9674fn89().s[34]++;haDialogElements.HA_DIALOG_CONTENT.element.then(dialogContent=>{cov_2m9674fn89().f[5]++;cov_2m9674fn89().s[35]++;__classPrivateFieldGet(this,_HAQuerySelector_dialogsContentObserver,"f").disconnect();cov_2m9674fn89().s[36]++;__classPrivateFieldGet(this,_HAQuerySelector_dialogsContentObserver,"f").observe(dialogContent,{childList:true});});cov_2m9674fn89().s[37]++;__classPrivateFieldSet(this,_HAQuerySelector_haDialogElements,getFinalDialogFlatTree(haDialogElements,dialogElement),"f");const MoreInfoDialogEventMapper=(cov_2m9674fn89().s[38]++,{[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]:HAQuerySelectorEvent.ON_LOVELACE_MORE_INFO_DIALOG_OPEN,[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]:HAQuerySelectorEvent.ON_LOVELACE_HISTORY_AND_LOGBOOK_DIALOG_OPEN,[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]:HAQuerySelectorEvent.ON_LOVELACE_SETTINGS_DIALOG_OPEN});cov_2m9674fn89().s[39]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_dispatchEvent).call(this,MoreInfoDialogEventMapper[dialogElement],__classPrivateFieldGet(this,_HAQuerySelector_haDialogElements,"f"));},_HAQuerySelector_updateRootElements=function _HAQuerySelector_updateRootElements(){cov_2m9674fn89().f[6]++;cov_2m9674fn89().s[40]++;__classPrivateFieldSet(this,_HAQuerySelector_homeAssistantRootTree,getAsyncElements(__classPrivateFieldGet(this,_HAQuerySelector_config,"f"),ROOT_SELECTORS),"f");cov_2m9674fn89().s[41]++;__classPrivateFieldSet(this,_HAQuerySelector_haRootElements,flatHomeAssistantTree(HA_ROOT_ELEMENT,__classPrivateFieldGet(this,_HAQuerySelector_homeAssistantRootTree,"f")),"f");cov_2m9674fn89().s[42]++;__classPrivateFieldGet(this,_HAQuerySelector_haRootElements,"f")[HA_ROOT_ELEMENT.HOME_ASSISTANT].selector.$.element.then(shadowRoot=>{cov_2m9674fn89().f[7]++;cov_2m9674fn89().s[43]++;__classPrivateFieldGet(this,_HAQuerySelector_dialogsObserver,"f").disconnect();cov_2m9674fn89().s[44]++;__classPrivateFieldGet(this,_HAQuerySelector_dialogsObserver,"f").observe(shadowRoot,{childList:true});});},_HAQuerySelector_updateResolverElements=function _HAQuerySelector_updateResolverElements(){cov_2m9674fn89().f[8]++;const timestamp=(cov_2m9674fn89().s[45]++,Date.now());cov_2m9674fn89().s[46]++;if(timestamp-__classPrivateFieldGet(this,_HAQuerySelector_timestap,"f")<TIMESTAMP_THESHOLD){cov_2m9674fn89().b[2][0]++;cov_2m9674fn89().s[47]++;return;}else {cov_2m9674fn89().b[2][1]++;}cov_2m9674fn89().s[48]++;__classPrivateFieldSet(this,_HAQuerySelector_timestap,timestamp,"f");cov_2m9674fn89().s[49]++;__classPrivateFieldSet(this,_HAQuerySelector_homeAssistantResolverTree,getAsyncElements(__classPrivateFieldGet(this,_HAQuerySelector_config,"f"),RESOLVER_SELECTORS,__classPrivateFieldGet(this,_HAQuerySelector_haRootElements,"f")[HA_ROOT_ELEMENT.HA_DRAWER].element),"f");cov_2m9674fn89().s[50]++;__classPrivateFieldSet(this,_HAQuerySelector_haResolverElements,flatHomeAssistantTree(HA_RESOLVER_ELEMENT,__classPrivateFieldGet(this,_HAQuerySelector_homeAssistantResolverTree,"f")),"f");cov_2m9674fn89().s[51]++;__classPrivateFieldGet(this,_HAQuerySelector_haResolverElements,"f")[HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER].element.then(partialPanelResolver=>{cov_2m9674fn89().f[9]++;cov_2m9674fn89().s[52]++;__classPrivateFieldGet(this,_HAQuerySelector_panelResolverObserver,"f").disconnect();cov_2m9674fn89().s[53]++;__classPrivateFieldGet(this,_HAQuerySelector_panelResolverObserver,"f").observe(partialPanelResolver,{childList:true});});cov_2m9674fn89().s[54]++;__classPrivateFieldGet(this,_HAQuerySelector_haResolverElements,"f")[HA_RESOLVER_ELEMENT.HA_PANEL_LOVELACE].selector.$.element.then(lovelaceShadowRoot=>{cov_2m9674fn89().f[10]++;cov_2m9674fn89().s[55]++;__classPrivateFieldGet(this,_HAQuerySelector_lovelaceObserver,"f").disconnect();cov_2m9674fn89().s[56]++;__classPrivateFieldGet(this,_HAQuerySelector_lovelaceObserver,"f").observe(lovelaceShadowRoot,{childList:true});});cov_2m9674fn89().s[57]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_dispatchEvent).call(this,HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD,Object.assign(Object.assign({},__classPrivateFieldGet(this,_HAQuerySelector_haRootElements,"f")),__classPrivateFieldGet(this,_HAQuerySelector_haResolverElements,"f")));},_HAQuerySelector_watchDialogs=function _HAQuerySelector_watchDialogs(mutations){cov_2m9674fn89().f[11]++;cov_2m9674fn89().s[58]++;mutations.forEach(({addedNodes})=>{cov_2m9674fn89().f[12]++;cov_2m9674fn89().s[59]++;addedNodes.forEach(node=>{cov_2m9674fn89().f[13]++;cov_2m9674fn89().s[60]++;if(node.localName===QUERY_SELECTORS.HA_MORE_INFO_DIALOG){cov_2m9674fn89().b[3][0]++;cov_2m9674fn89().s[61]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateDialogElements).call(this);}else {cov_2m9674fn89().b[3][1]++;}});});},_HAQuerySelector_watchDialogsContent=function _HAQuerySelector_watchDialogsContent(mutations){cov_2m9674fn89().f[14]++;cov_2m9674fn89().s[62]++;mutations.forEach(({addedNodes})=>{cov_2m9674fn89().f[15]++;cov_2m9674fn89().s[63]++;addedNodes.forEach(node=>{cov_2m9674fn89().f[16]++;const mappers=(cov_2m9674fn89().s[64]++,{[QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO]:HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO,[QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]:HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,[QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS]:HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS});cov_2m9674fn89().s[65]++;if((cov_2m9674fn89().b[5][0]++,node.localName)&&(cov_2m9674fn89().b[5][1]++,node.localName in mappers)){cov_2m9674fn89().b[4][0]++;const dialogElementQuery=(cov_2m9674fn89().s[66]++,node.localName);cov_2m9674fn89().s[67]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateDialogElements).call(this,mappers[dialogElementQuery]);}else {cov_2m9674fn89().b[4][1]++;}});});},_HAQuerySelector_watchDashboards=function _HAQuerySelector_watchDashboards(mutations){cov_2m9674fn89().f[17]++;cov_2m9674fn89().s[68]++;mutations.forEach(({addedNodes})=>{cov_2m9674fn89().f[18]++;cov_2m9674fn89().s[69]++;addedNodes.forEach(node=>{cov_2m9674fn89().f[19]++;cov_2m9674fn89().s[70]++;if(node.localName===QUERY_SELECTORS.HA_PANEL_LOVELACE){cov_2m9674fn89().b[6][0]++;cov_2m9674fn89().s[71]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateResolverElements).call(this);}else {cov_2m9674fn89().b[6][1]++;}});});},_HAQuerySelector_watchLovelace=function _HAQuerySelector_watchLovelace(mutations){cov_2m9674fn89().f[20]++;cov_2m9674fn89().s[72]++;mutations.forEach(({addedNodes})=>{cov_2m9674fn89().f[21]++;cov_2m9674fn89().s[73]++;addedNodes.forEach(node=>{cov_2m9674fn89().f[22]++;cov_2m9674fn89().s[74]++;if(node.localName===QUERY_SELECTORS.HUI_ROOT){cov_2m9674fn89().b[7][0]++;cov_2m9674fn89().s[75]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateResolverElements).call(this);}else {cov_2m9674fn89().b[7][1]++;}});});};

    window.HAQuerySelector = HAQuerySelector;

})();
