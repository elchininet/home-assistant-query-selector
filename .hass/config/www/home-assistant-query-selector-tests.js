(function () {
    'use strict';

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise, SuppressedError, Symbol */


    function __rest(s, e) {
        var t = {};
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
            t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                    t[p[i]] = s[p[i]];
            }
        return t;
    }

    function __awaiter(thisArg, _arguments, P, generator) {
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __classPrivateFieldGet(receiver, state, kind, f) {
        if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    }

    function __classPrivateFieldSet(receiver, state, value, kind, f) {
        if (kind === "m") throw new TypeError("Private method is not writable");
        if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
        return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
    }

    typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
        var e = new Error(message);
        return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
    };

    function cov_jnkfhc2pd(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts";var hash="a169745036ccac162f1372d2d1445c209e716453";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:20}},"1":{start:{line:2,column:30},end:{line:5,column:1}},"2":{start:{line:7,column:0},end:{line:12,column:46}},"3":{start:{line:8,column:4},end:{line:8,column:57}},"4":{start:{line:9,column:4},end:{line:9,column:67}},"5":{start:{line:10,column:4},end:{line:10,column:47}},"6":{start:{line:11,column:4},end:{line:11,column:49}},"7":{start:{line:14,column:0},end:{line:20,column:54}},"8":{start:{line:15,column:4},end:{line:15,column:77}},"9":{start:{line:16,column:4},end:{line:16,column:67}},"10":{start:{line:17,column:4},end:{line:17,column:49}},"11":{start:{line:18,column:4},end:{line:18,column:45}},"12":{start:{line:19,column:4},end:{line:19,column:49}},"13":{start:{line:22,column:0},end:{line:24,column:56}},"14":{start:{line:23,column:4},end:{line:23,column:75}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:1},end:{line:7,column:2}},loc:{start:{line:7,column:28},end:{line:12,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:1},end:{line:14,column:2}},loc:{start:{line:14,column:32},end:{line:20,column:1}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:1},end:{line:22,column:2}},loc:{start:{line:22,column:33},end:{line:24,column:1}},line:22}},branchMap:{"0":{loc:{start:{line:12,column:3},end:{line:12,column:44}},type:"binary-expr",locations:[{start:{line:12,column:3},end:{line:12,column:18}},{start:{line:12,column:23},end:{line:12,column:43}}],line:12},"1":{loc:{start:{line:20,column:3},end:{line:20,column:52}},type:"binary-expr",locations:[{start:{line:20,column:3},end:{line:20,column:22}},{start:{line:20,column:27},end:{line:20,column:51}}],line:20},"2":{loc:{start:{line:24,column:3},end:{line:24,column:54}},type:"binary-expr",locations:[{start:{line:24,column:3},end:{line:24,column:23}},{start:{line:24,column:28},end:{line:24,column:53}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts"],sourcesContent:["export const $ = '$';\n\nexport const DEFAULT_CONFIG = {\n    retries: 100,\n    delay: 50\n};\n\nexport enum HA_ROOT_ELEMENT {\n    HOME_ASSISTANT = 'HOME_ASSISTANT',\n    HOME_ASSISTANT_MAIN = 'HOME_ASSISTANT_MAIN',\n    HA_DRAWER = 'HA_DRAWER',\n    HA_SIDEBAR = 'HA_SIDEBAR'\n}\n\nexport enum HA_RESOLVER_ELEMENT {\n    PARTIAL_PANEL_RESOLVER = 'PARTIAL_PANEL_RESOLVER',\n    HA_PANEL_LOVELACE = 'HA_PANEL_LOVELACE',\n    HUI_ROOT = 'HUI_ROOT',\n    HEADER = 'HEADER',\n    HUI_VIEW = 'HUI_VIEW'\n}\n\nexport enum HAQuerySelectorEvent {\n    ON_LOVELACE_PANEL_LOAD = 'onLovelacePanelLoad'\n}"],names:[],mappings:"AAAA,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC;AAErB,MAAM,CAAC,MAAM,cAAc,GAAG;IAC1B,OAAO,EAAE,GAAG;IACZ,KAAK,EAAE,EAAE;CACZ,CAAC;AAEF,MAAM,CAAN,IAAY,eAKX;AALD,WAAY,eAAe;IACvB,oDAAiC,CAAA;IACjC,8DAA2C,CAAA;IAC3C,0CAAuB,CAAA;IACvB,4CAAyB,CAAA;AAC7B,CAAC,EALW,eAAe,KAAf,eAAe,QAK1B;AAED,MAAM,CAAN,IAAY,mBAMX;AAND,WAAY,mBAAmB;IAC3B,wEAAiD,CAAA;IACjD,8DAAuC,CAAA;IACvC,4CAAqB,CAAA;IACrB,wCAAiB,CAAA;IACjB,4CAAqB,CAAA;AACzB,CAAC,EANW,mBAAmB,KAAnB,mBAAmB,QAM9B;AAED,MAAM,CAAN,IAAY,oBAEX;AAFD,WAAY,oBAAoB;IAC5B,sEAA8C,CAAA;AAClD,CAAC,EAFW,oBAAoB,KAApB,oBAAoB,QAE/B",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a169745036ccac162f1372d2d1445c209e716453"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_jnkfhc2pd=function(){return actualCoverage;};}return actualCoverage;}cov_jnkfhc2pd();const $=(cov_jnkfhc2pd().s[0]++,'$');const DEFAULT_CONFIG=(cov_jnkfhc2pd().s[1]++,{retries:100,delay:50});var HA_ROOT_ELEMENT;cov_jnkfhc2pd().s[2]++;(function(HA_ROOT_ELEMENT){cov_jnkfhc2pd().f[0]++;cov_jnkfhc2pd().s[3]++;HA_ROOT_ELEMENT["HOME_ASSISTANT"]="HOME_ASSISTANT";cov_jnkfhc2pd().s[4]++;HA_ROOT_ELEMENT["HOME_ASSISTANT_MAIN"]="HOME_ASSISTANT_MAIN";cov_jnkfhc2pd().s[5]++;HA_ROOT_ELEMENT["HA_DRAWER"]="HA_DRAWER";cov_jnkfhc2pd().s[6]++;HA_ROOT_ELEMENT["HA_SIDEBAR"]="HA_SIDEBAR";})((cov_jnkfhc2pd().b[0][0]++,HA_ROOT_ELEMENT)||(cov_jnkfhc2pd().b[0][1]++,HA_ROOT_ELEMENT={}));var HA_RESOLVER_ELEMENT;cov_jnkfhc2pd().s[7]++;(function(HA_RESOLVER_ELEMENT){cov_jnkfhc2pd().f[1]++;cov_jnkfhc2pd().s[8]++;HA_RESOLVER_ELEMENT["PARTIAL_PANEL_RESOLVER"]="PARTIAL_PANEL_RESOLVER";cov_jnkfhc2pd().s[9]++;HA_RESOLVER_ELEMENT["HA_PANEL_LOVELACE"]="HA_PANEL_LOVELACE";cov_jnkfhc2pd().s[10]++;HA_RESOLVER_ELEMENT["HUI_ROOT"]="HUI_ROOT";cov_jnkfhc2pd().s[11]++;HA_RESOLVER_ELEMENT["HEADER"]="HEADER";cov_jnkfhc2pd().s[12]++;HA_RESOLVER_ELEMENT["HUI_VIEW"]="HUI_VIEW";})((cov_jnkfhc2pd().b[1][0]++,HA_RESOLVER_ELEMENT)||(cov_jnkfhc2pd().b[1][1]++,HA_RESOLVER_ELEMENT={}));var HAQuerySelectorEvent;cov_jnkfhc2pd().s[13]++;(function(HAQuerySelectorEvent){cov_jnkfhc2pd().f[2]++;cov_jnkfhc2pd().s[14]++;HAQuerySelectorEvent["ON_LOVELACE_PANEL_LOAD"]="onLovelacePanelLoad";})((cov_jnkfhc2pd().b[2][0]++,HAQuerySelectorEvent)||(cov_jnkfhc2pd().b[2][1]++,HAQuerySelectorEvent={}));

    function cov_6tb7t1v3w(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts";var hash="da88ae658cef4f6afa72f76db34dac717d72385b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts",statementMap:{"0":{start:{line:3,column:0},end:{line:13,column:46}},"1":{start:{line:4,column:4},end:{line:4,column:57}},"2":{start:{line:5,column:4},end:{line:5,column:67}},"3":{start:{line:6,column:4},end:{line:6,column:47}},"4":{start:{line:7,column:4},end:{line:7,column:49}},"5":{start:{line:8,column:4},end:{line:8,column:73}},"6":{start:{line:9,column:4},end:{line:9,column:63}},"7":{start:{line:10,column:4},end:{line:10,column:45}},"8":{start:{line:11,column:4},end:{line:11,column:42}},"9":{start:{line:12,column:4},end:{line:12,column:45}},"10":{start:{line:14,column:30},end:{line:48,column:1}},"11":{start:{line:49,column:34},end:{line:81,column:1}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:1},end:{line:3,column:2}},loc:{start:{line:3,column:28},end:{line:13,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:13,column:3},end:{line:13,column:44}},type:"binary-expr",locations:[{start:{line:13,column:3},end:{line:13,column:18}},{start:{line:13,column:23},end:{line:13,column:43}}],line:13}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0},b:{"0":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts"],sourcesContent:["import { HomeAssistantNodeDescriptor } from '@types';\nimport {\n    $,\n    HA_ROOT_ELEMENT,\n    HA_RESOLVER_ELEMENT\n} from '@constants';\n\nexport enum QUERY_SELECTORS {\n    HOME_ASSISTANT = 'home-assistant',\n    HOME_ASSISTANT_MAIN = 'home-assistant-main',\n    HA_DRAWER = 'ha-drawer',\n    HA_SIDEBAR = 'ha-sidebar',\n    PARTIAL_PANEL_RESOLVER = 'partial-panel-resolver',\n    HA_PANEL_LOVELACE = 'ha-panel-lovelace',\n    HUI_ROOT = 'hui-root',\n    HEADER = '.header',\n    HUI_VIEW = 'hui-view'\n}\n\nexport const ROOT_SELECTORS: HomeAssistantNodeDescriptor = {\n    [HA_ROOT_ELEMENT.HOME_ASSISTANT]: {\n        selector: QUERY_SELECTORS.HOME_ASSISTANT,\n        children: {\n            shadowRoot: {\n                selector: $,\n                children: {\n                    [HA_ROOT_ELEMENT.HOME_ASSISTANT_MAIN]: {\n                        selector: QUERY_SELECTORS.HOME_ASSISTANT_MAIN,\n                        children: {\n                            shadowRoot: {\n                                selector: $,\n                                children: {\n                                    [HA_ROOT_ELEMENT.HA_DRAWER]: {\n                                        selector: QUERY_SELECTORS.HA_DRAWER,\n                                        children: {\n                                            [HA_ROOT_ELEMENT.HA_SIDEBAR]: {\n                                                selector: QUERY_SELECTORS.HA_SIDEBAR,\n                                                children: {\n                                                    shadowRoot: {\n                                                        selector: $\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport const RESOLVER_SELECTORS: HomeAssistantNodeDescriptor = {\n    [HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER]: {\n        selector: QUERY_SELECTORS.PARTIAL_PANEL_RESOLVER,\n        children: {\n            [HA_RESOLVER_ELEMENT.HA_PANEL_LOVELACE]: {\n                selector: QUERY_SELECTORS.HA_PANEL_LOVELACE,\n                children: {\n                    shadowRoot: {\n                        selector: $,\n                        children: {\n                            [HA_RESOLVER_ELEMENT.HUI_ROOT]: {\n                                selector: QUERY_SELECTORS.HUI_ROOT,\n                                children: {\n                                    shadowRoot: {\n                                        selector: $,\n                                        children: {\n                                            [HA_RESOLVER_ELEMENT.HEADER]: {\n                                                selector: QUERY_SELECTORS.HEADER,\n                                            },\n                                            [HA_RESOLVER_ELEMENT.HUI_VIEW]: {\n                                                selector: QUERY_SELECTORS.HUI_VIEW\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};"],names:[],mappings:"AACA,OAAO,EACH,CAAC,EACD,eAAe,EACf,mBAAmB,EACtB,MAAM,YAAY,CAAC;AAEpB,MAAM,CAAN,IAAY,eAUX;AAVD,WAAY,eAAe;IACvB,oDAAiC,CAAA;IACjC,8DAA2C,CAAA;IAC3C,0CAAuB,CAAA;IACvB,4CAAyB,CAAA;IACzB,oEAAiD,CAAA;IACjD,0DAAuC,CAAA;IACvC,wCAAqB,CAAA;IACrB,qCAAkB,CAAA;IAClB,wCAAqB,CAAA;AACzB,CAAC,EAVW,eAAe,KAAf,eAAe,QAU1B;AAED,MAAM,CAAC,MAAM,cAAc,GAAgC;IACvD,CAAC,eAAe,CAAC,cAAc,CAAC,EAAE;QAC9B,QAAQ,EAAE,eAAe,CAAC,cAAc;QACxC,QAAQ,EAAE;YACN,UAAU,EAAE;gBACR,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE;oBACN,CAAC,eAAe,CAAC,mBAAmB,CAAC,EAAE;wBACnC,QAAQ,EAAE,eAAe,CAAC,mBAAmB;wBAC7C,QAAQ,EAAE;4BACN,UAAU,EAAE;gCACR,QAAQ,EAAE,CAAC;gCACX,QAAQ,EAAE;oCACN,CAAC,eAAe,CAAC,SAAS,CAAC,EAAE;wCACzB,QAAQ,EAAE,eAAe,CAAC,SAAS;wCACnC,QAAQ,EAAE;4CACN,CAAC,eAAe,CAAC,UAAU,CAAC,EAAE;gDAC1B,QAAQ,EAAE,eAAe,CAAC,UAAU;gDACpC,QAAQ,EAAE;oDACN,UAAU,EAAE;wDACR,QAAQ,EAAE,CAAC;qDACd;iDACJ;6CACJ;yCACJ;qCACJ;iCACJ;6BACJ;yBACJ;qBACJ;iBACJ;aACJ;SACJ;KACJ;CACJ,CAAC;AAEF,MAAM,CAAC,MAAM,kBAAkB,GAAgC;IAC3D,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,EAAE;QAC1C,QAAQ,EAAE,eAAe,CAAC,sBAAsB;QAChD,QAAQ,EAAE;YACN,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,EAAE;gBACrC,QAAQ,EAAE,eAAe,CAAC,iBAAiB;gBAC3C,QAAQ,EAAE;oBACN,UAAU,EAAE;wBACR,QAAQ,EAAE,CAAC;wBACX,QAAQ,EAAE;4BACN,CAAC,mBAAmB,CAAC,QAAQ,CAAC,EAAE;gCAC5B,QAAQ,EAAE,eAAe,CAAC,QAAQ;gCAClC,QAAQ,EAAE;oCACN,UAAU,EAAE;wCACR,QAAQ,EAAE,CAAC;wCACX,QAAQ,EAAE;4CACN,CAAC,mBAAmB,CAAC,MAAM,CAAC,EAAE;gDAC1B,QAAQ,EAAE,eAAe,CAAC,MAAM;6CACnC;4CACD,CAAC,mBAAmB,CAAC,QAAQ,CAAC,EAAE;gDAC5B,QAAQ,EAAE,eAAe,CAAC,QAAQ;6CACrC;yCACJ;qCACJ;iCACJ;6BACJ;yBACJ;qBACJ;iBACJ;aACJ;SACJ;KACJ;CACJ,CAAC",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da88ae658cef4f6afa72f76db34dac717d72385b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_6tb7t1v3w=function(){return actualCoverage;};}return actualCoverage;}cov_6tb7t1v3w();var QUERY_SELECTORS;cov_6tb7t1v3w().s[0]++;(function(QUERY_SELECTORS){cov_6tb7t1v3w().f[0]++;cov_6tb7t1v3w().s[1]++;QUERY_SELECTORS["HOME_ASSISTANT"]="home-assistant";cov_6tb7t1v3w().s[2]++;QUERY_SELECTORS["HOME_ASSISTANT_MAIN"]="home-assistant-main";cov_6tb7t1v3w().s[3]++;QUERY_SELECTORS["HA_DRAWER"]="ha-drawer";cov_6tb7t1v3w().s[4]++;QUERY_SELECTORS["HA_SIDEBAR"]="ha-sidebar";cov_6tb7t1v3w().s[5]++;QUERY_SELECTORS["PARTIAL_PANEL_RESOLVER"]="partial-panel-resolver";cov_6tb7t1v3w().s[6]++;QUERY_SELECTORS["HA_PANEL_LOVELACE"]="ha-panel-lovelace";cov_6tb7t1v3w().s[7]++;QUERY_SELECTORS["HUI_ROOT"]="hui-root";cov_6tb7t1v3w().s[8]++;QUERY_SELECTORS["HEADER"]=".header";cov_6tb7t1v3w().s[9]++;QUERY_SELECTORS["HUI_VIEW"]="hui-view";})((cov_6tb7t1v3w().b[0][0]++,QUERY_SELECTORS)||(cov_6tb7t1v3w().b[0][1]++,QUERY_SELECTORS={}));const ROOT_SELECTORS=(cov_6tb7t1v3w().s[10]++,{[HA_ROOT_ELEMENT.HOME_ASSISTANT]:{selector:QUERY_SELECTORS.HOME_ASSISTANT,children:{shadowRoot:{selector:$,children:{[HA_ROOT_ELEMENT.HOME_ASSISTANT_MAIN]:{selector:QUERY_SELECTORS.HOME_ASSISTANT_MAIN,children:{shadowRoot:{selector:$,children:{[HA_ROOT_ELEMENT.HA_DRAWER]:{selector:QUERY_SELECTORS.HA_DRAWER,children:{[HA_ROOT_ELEMENT.HA_SIDEBAR]:{selector:QUERY_SELECTORS.HA_SIDEBAR,children:{shadowRoot:{selector:$}}}}}}}}}}}}}});const RESOLVER_SELECTORS=(cov_6tb7t1v3w().s[11]++,{[HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER]:{selector:QUERY_SELECTORS.PARTIAL_PANEL_RESOLVER,children:{[HA_RESOLVER_ELEMENT.HA_PANEL_LOVELACE]:{selector:QUERY_SELECTORS.HA_PANEL_LOVELACE,children:{shadowRoot:{selector:$,children:{[HA_RESOLVER_ELEMENT.HUI_ROOT]:{selector:QUERY_SELECTORS.HUI_ROOT,children:{shadowRoot:{selector:$,children:{[HA_RESOLVER_ELEMENT.HEADER]:{selector:QUERY_SELECTORS.HEADER},[HA_RESOLVER_ELEMENT.HUI_VIEW]:{selector:QUERY_SELECTORS.HUI_VIEW}}}}}}}}}}}});

    function n(n,e,t,r){return new(t||(t=Promise))((function(o,u){function l(n){try{a(r.next(n));}catch(n){u(n);}}function c(n){try{a(r.throw(n));}catch(n){u(n);}}function a(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e);}))).then(l,c);}a((r=r.apply(n,e||[])).next());}))}function e(n,e){var t,r,o,u,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,c[0]&&(l=0)),l;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,r=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){l=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){l.label=c[1];break}if(6===c[0]&&l.label<o[1]){l.label=o[1],o=c;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(c);break}o[2]&&l.ops.pop(),l.trys.pop();continue}c=e.call(n,l);}catch(n){c=[6,n],r=0;}finally{t=o=0;}if(5&c[0])throw c[1];return {value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}function t(n,e,t){if(t||2===arguments.length)for(var r,o=0,u=e.length;o<u;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var r="$",o=":host",u="invalid selector",l=10,c=10,a=function(n){var e,t=n[0],r=n[1];return (e=t)&&(e instanceof Document||e instanceof Element)&&"string"==typeof r};function i(n,e){return function(n){return n.split(",").map((function(n){return n.trim()}))}(n).map((function(n){var t=function(n){return n.split(r).map((function(n){return n.trim()}))}(n);return e(t)}))}function s(n,e,t,r,o){return void 0===o&&(o=!1),new Promise((function(l){var c=0,a=function(){var i=o?n.querySelectorAll(e):n.querySelector(e);o&&i.length||!o&&null!==i?l(i):++c<t?setTimeout(a,r):l(o?document.querySelectorAll(u):null);};a();}))}function f(n,e,t){return new Promise((function(r){var o=0,u=function(){var l=n.shadowRoot;l?r(l):++o<e?setTimeout(u,t):r(null);};u();}))}function h(n,e){var t=e?" If you want to select a shadowRoot, use ".concat(e," instead."):"";return "".concat(n," cannot be used with a selector ending in a shadowRoot (").concat(r,").").concat(t)}function d(n,e){return "".concat(n," must be used with a selector ending in a shadowRoot (").concat(r,"). If you don't want to select a shadowRoot, use ").concat(e," instead.")}function v(){return "You can not select a shadowRoot (".concat(r,") of the document.")}function p(t,r,u,l){return n(this,void 0,void 0,(function(){var n,c,a,i,h,d;return e(this,(function(e){switch(e.label){case 0:n=null,c=t.length,a=0,e.label=1;case 1:if(!(a<c))return [3,15];if(0!==a)return [3,8];if(t[a].length)return [3,5];if(r instanceof Document)throw new SyntaxError(v());return r.shadowRoot?[4,s(r.shadowRoot,t[++a],u,l)]:[3,3];case 2:return i=e.sent(),[3,4];case 3:i=null,e.label=4;case 4:return n=i,[3,7];case 5:return [4,s(r,t[a],u,l)];case 6:n=e.sent(),e.label=7;case 7:return [3,13];case 8:return [4,f(n,u,l)];case 9:return (h=e.sent())?[4,s(h,"".concat(o," ").concat(t[a]),u,l)]:[3,11];case 10:return d=e.sent(),[3,12];case 11:d=null,e.label=12;case 12:n=d,e.label=13;case 13:if(null===n)return [2,null];e.label=14;case 14:return a++,[3,1];case 15:return [2,n]}}))}))}function b(r,u,l,c){return n(this,void 0,void 0,(function(){var n,a,i,h,d,v;return e(this,(function(e){switch(e.label){case 0:return n=t([],r,!0),a=n.pop(),n.length?[3,2]:[4,s(u,a,l,c,!0)];case 1:return [2,e.sent()];case 2:return [4,p(n,u,l,c)];case 3:return (i=e.sent())?[4,f(i,l,c)]:[3,5];case 4:return d=e.sent(),[3,6];case 5:d=null,e.label=6;case 6:return (h=d)?[4,s(h,"".concat(o," ").concat(a),l,c,!0)]:[3,8];case 7:return v=e.sent(),[3,9];case 8:v=null,e.label=9;case 9:return [2,v]}}))}))}function S(t,r,o,u){return n(this,void 0,void 0,(function(){var n,l;return e(this,(function(e){switch(e.label){case 0:if(1===t.length&&!t[0].length){if(r instanceof Document)throw new SyntaxError(v());return [2,f(r,o,u)]}return [4,p(t,r,o,u)];case 1:return (n=e.sent())?[4,f(n,o,u)]:[3,3];case 2:return l=e.sent(),[3,4];case 3:l=null,e.label=4;case 4:return [2,l]}}))}))}function E(t,r,o,u){return n(this,void 0,void 0,(function(){var n,l,c,a;return e(this,(function(e){switch(e.label){case 0:n=i(t,(function(n){if(!n[n.length-1].length)throw new SyntaxError(h("asyncQuerySelector","asyncShadowRootQuerySelector"));return n})),l=n.length,c=0,e.label=1;case 1:return c<l?[4,p(n[c],r,o,u)]:[3,4];case 2:if(a=e.sent())return [2,a];e.label=3;case 3:return c++,[3,1];case 4:return [2,null]}}))}))}function q(t,r,o,l){return n(this,void 0,void 0,(function(){var n,c,a,s;return e(this,(function(e){switch(e.label){case 0:n=i(t,(function(n){if(!n[n.length-1].length)throw new SyntaxError(h("asyncQuerySelectorAll"));return n})),c=n.length,a=0,e.label=1;case 1:return a<c?[4,b(n[a],r,o,l)]:[3,4];case 2:if(null==(s=e.sent())?void 0:s.length)return [2,s];e.label=3;case 3:return a++,[3,1];case 4:return [2,document.querySelectorAll(u)]}}))}))}function A(t,r,o,u){return n(this,void 0,void 0,(function(){var n,l,c,a;return e(this,(function(e){switch(e.label){case 0:n=i(t,(function(n){if(n.pop().length)throw new SyntaxError(d("asyncShadowRootQuerySelector","asyncQuerySelector"));return n})),l=n.length,c=0,e.label=1;case 1:return c<l?[4,S(n[c],r,o,u)]:[3,4];case 2:if(a=e.sent())return [2,a];e.label=3;case 3:return c++,[3,1];case 4:return [2,null]}}))}))}function P(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n(this,void 0,void 0,(function(){var n,r,o,u,i;return e(this,(function(e){switch(e.label){case 0:return a(t)?(n=t[0],r=t[1],o=t[2],[4,E(r,n,(null==o?void 0:o.retries)||l,(null==o?void 0:o.delay)||c)]):[3,2];case 1:case 3:return [2,e.sent()];case 2:return u=t[0],i=t[1],[4,E(u,document,(null==i?void 0:i.retries)||l,(null==i?void 0:i.delay)||c)]}}))}))}function T(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n(this,void 0,void 0,(function(){var n,r,o,u,i;return e(this,(function(e){switch(e.label){case 0:return a(t)?(n=t[0],r=t[1],o=t[2],[4,q(r,n,(null==o?void 0:o.retries)||l,(null==o?void 0:o.delay)||c)]):[3,2];case 1:return [2,e.sent()];case 2:return u=t[0],i=t[1],[2,q(u,document,(null==i?void 0:i.retries)||l,(null==i?void 0:i.delay)||c)]}}))}))}function I(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n(this,void 0,void 0,(function(){var n,r,o,u,i;return e(this,(function(e){switch(e.label){case 0:return a(t)?(n=t[0],r=t[1],o=t[2],[4,A(r,n,(null==o?void 0:o.retries)||l,(null==o?void 0:o.delay)||c)]):[3,2];case 1:return [2,e.sent()];case 2:return u=t[0],i=t[1],[2,A(u,document,(null==i?void 0:i.retries)||l,(null==i?void 0:i.delay)||c)]}}))}))}

    function cov_1h2goi2f99(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts";var hash="631f0ba7121a1fb6147ab7201501d208923fc905";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts",statementMap:{"0":{start:{line:4,column:17},end:{line:6,column:14}},"1":{start:{line:4,column:43},end:{line:6,column:14}},"2":{start:{line:7,column:32},end:{line:45,column:1}},"3":{start:{line:8,column:20},end:{line:8,column:46}},"4":{start:{line:9,column:4},end:{line:44,column:11}},"5":{start:{line:10,column:38},end:{line:10,column:43}},"6":{start:{line:11,column:8},end:{line:15,column:9}},"7":{start:{line:13,column:12},end:{line:14,column:132}},"8":{start:{line:16,column:24},end:{line:20,column:65}},"9":{start:{line:18,column:16},end:{line:18,column:112}},"10":{start:{line:21,column:8},end:{line:42,column:10}},"11":{start:{line:25,column:16},end:{line:28,column:19}},"12":{start:{line:26,column:31},end:{line:26,column:44}},"13":{start:{line:27,column:20},end:{line:27,column:120}},"14":{start:{line:31,column:16},end:{line:34,column:19}},"15":{start:{line:32,column:31},end:{line:32,column:44}},"16":{start:{line:33,column:20},end:{line:33,column:123}},"17":{start:{line:37,column:16},end:{line:40,column:19}},"18":{start:{line:38,column:31},end:{line:38,column:44}},"19":{start:{line:39,column:20},end:{line:39,column:130}},"20":{start:{line:43,column:8},end:{line:43,column:19}},"21":{start:{line:46,column:26},end:{line:59,column:1}},"22":{start:{line:47,column:20},end:{line:47,column:40}},"23":{start:{line:48,column:4},end:{line:58,column:5}},"24":{start:{line:49,column:8},end:{line:57,column:9}},"25":{start:{line:50,column:12},end:{line:50,column:28}},"26":{start:{line:53,column:28},end:{line:53,column:62}},"27":{start:{line:54,column:12},end:{line:56,column:13}},"28":{start:{line:55,column:16},end:{line:55,column:31}},"29":{start:{line:60,column:37},end:{line:68,column:1}},"30":{start:{line:61,column:28},end:{line:61,column:52}},"31":{start:{line:62,column:4},end:{line:67,column:11}},"32":{start:{line:63,column:21},end:{line:63,column:42}},"33":{start:{line:64,column:29},end:{line:64,column:33}},"34":{start:{line:64,column:42},end:{line:64,column:68}},"35":{start:{line:65,column:8},end:{line:65,column:43}},"36":{start:{line:66,column:8},end:{line:66,column:19}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:43},end:{line:6,column:14}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:7,column:32},end:{line:7,column:33}},loc:{start:{line:7,column:96},end:{line:45,column:1}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:9,column:26},end:{line:9,column:27}},loc:{start:{line:9,column:42},end:{line:44,column:5}},line:9},"3":{name:"(anonymous_3)",decl:{start:{line:17,column:31},end:{line:17,column:32}},loc:{start:{line:17,column:44},end:{line:19,column:13}},line:17},"4":{name:"(anonymous_4)",decl:{start:{line:24,column:12},end:{line:24,column:13}},loc:{start:{line:24,column:53},end:{line:29,column:13}},line:24},"5":{name:"(anonymous_5)",decl:{start:{line:25,column:55},end:{line:25,column:56}},loc:{start:{line:25,column:68},end:{line:28,column:17}},line:25},"6":{name:"(anonymous_6)",decl:{start:{line:30,column:12},end:{line:30,column:13}},loc:{start:{line:30,column:56},end:{line:35,column:13}},line:30},"7":{name:"(anonymous_7)",decl:{start:{line:31,column:55},end:{line:31,column:56}},loc:{start:{line:31,column:68},end:{line:34,column:17}},line:31},"8":{name:"(anonymous_8)",decl:{start:{line:36,column:12},end:{line:36,column:13}},loc:{start:{line:36,column:63},end:{line:41,column:13}},line:36},"9":{name:"(anonymous_9)",decl:{start:{line:37,column:55},end:{line:37,column:56}},loc:{start:{line:37,column:68},end:{line:40,column:17}},line:37},"10":{name:"(anonymous_10)",decl:{start:{line:46,column:26},end:{line:46,column:27}},loc:{start:{line:46,column:41},end:{line:59,column:1}},line:46},"11":{name:"(anonymous_11)",decl:{start:{line:60,column:37},end:{line:60,column:38}},loc:{start:{line:60,column:60},end:{line:68,column:1}},line:60},"12":{name:"(anonymous_12)",decl:{start:{line:62,column:34},end:{line:62,column:35}},loc:{start:{line:62,column:48},end:{line:67,column:5}},line:62}},branchMap:{"0":{loc:{start:{line:4,column:43},end:{line:6,column:14}},type:"cond-expr",locations:[{start:{line:5,column:6},end:{line:5,column:24}},{start:{line:6,column:6},end:{line:6,column:14}}],line:4},"1":{loc:{start:{line:7,column:47},end:{line:7,column:65}},type:"default-arg",locations:[{start:{line:7,column:61},end:{line:7,column:65}}],line:7},"2":{loc:{start:{line:7,column:67},end:{line:7,column:91}},type:"default-arg",locations:[{start:{line:7,column:86},end:{line:7,column:91}}],line:7},"3":{loc:{start:{line:8,column:35},end:{line:8,column:45}},type:"binary-expr",locations:[{start:{line:8,column:35},end:{line:8,column:39}},{start:{line:8,column:43},end:{line:8,column:45}}],line:8},"4":{loc:{start:{line:11,column:8},end:{line:15,column:9}},type:"if",locations:[{start:{line:11,column:8},end:{line:15,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:11},"5":{loc:{start:{line:11,column:12},end:{line:12,column:23}},type:"binary-expr",locations:[{start:{line:11,column:12},end:{line:11,column:41}},{start:{line:12,column:12},end:{line:12,column:23}}],line:11},"6":{loc:{start:{line:13,column:19},end:{line:14,column:131}},type:"cond-expr",locations:[{start:{line:14,column:18},end:{line:14,column:125}},{start:{line:14,column:128},end:{line:14,column:131}}],line:13},"7":{loc:{start:{line:16,column:24},end:{line:20,column:65}},type:"cond-expr",locations:[{start:{line:17,column:14},end:{line:19,column:14}},{start:{line:20,column:14},end:{line:20,column:65}}],line:16},"8":{loc:{start:{line:24,column:36},end:{line:24,column:51}},type:"default-arg",locations:[{start:{line:24,column:49},end:{line:24,column:51}}],line:24},"9":{loc:{start:{line:30,column:39},end:{line:30,column:54}},type:"default-arg",locations:[{start:{line:30,column:52},end:{line:30,column:54}}],line:30},"10":{loc:{start:{line:36,column:46},end:{line:36,column:61}},type:"default-arg",locations:[{start:{line:36,column:59},end:{line:36,column:61}}],line:36},"11":{loc:{start:{line:49,column:8},end:{line:57,column:9}},type:"if",locations:[{start:{line:49,column:8},end:{line:57,column:9}},{start:{line:52,column:13},end:{line:57,column:9}}],line:49},"12":{loc:{start:{line:54,column:12},end:{line:56,column:13}},type:"if",locations:[{start:{line:54,column:12},end:{line:56,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:54}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0],"2":[0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0],"9":[0],"10":[0],"11":[0,0],"12":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts"],sourcesContent:["import {\n    HAQuerySelectorConfig,\n    HomeAssistantNodeDescriptor,\n    HomeAssistantElement,\n    NodeDescriptorProps,\n    ElementProps,\n    HAElement\n} from '@types';\nimport { $ } from '@constants';\nimport {\n    asyncQuerySelector,\n    asyncQuerySelectorAll,\n    asyncShadowRootQuerySelector\n} from 'shadow-dom-selector';\n\nconst getQuery = (selector: string, shadowRoot: boolean) => shadowRoot\n    ? $ + ' ' + selector\n    : selector;\n\nexport const getAsyncElements = (\n    config: HAQuerySelectorConfig,\n    node: HomeAssistantNodeDescriptor,\n    fromElement: Promise<Element> = null,\n    insideShadowRoot = false,\n): HomeAssistantElement => {\n\n    const entries = Object.entries(node || {});\n\n    return entries.reduce((acc: HomeAssistantElement, entry: [string, NodeDescriptorProps]): HomeAssistantElement => {\n\n        const [key, nodeDescriptor] = entry;\n\n        if (\n            nodeDescriptor.selector === $ &&\n            fromElement\n        ) {\n\n            return nodeDescriptor.children\n                ? {\n                    ...acc,\n                    ...getAsyncElements(\n                        config,\n                        nodeDescriptor.children,\n                        fromElement,\n                        true\n                    )\n                }\n                : acc;\n\n        }\n\n        const element: Promise<Element | null> = fromElement\n            ? fromElement.then((element: Element | null) => {\n                return asyncQuerySelector(\n                    element,\n                    getQuery(nodeDescriptor.selector, insideShadowRoot),\n                    config\n                );\n            })\n            : asyncQuerySelector(nodeDescriptor.selector, config);\n\n        acc[key] = {\n            element,\n            children: getAsyncElements(\n                config,\n                nodeDescriptor.children,\n                element\n            ),\n            async querySelector(selector: string, asyncProps: HAQuerySelectorConfig = {}) {\n                const el = await element;\n                return await asyncQuerySelector(\n                    el,\n                    selector,\n                    {\n                        ...config,\n                        ...asyncProps\n                    }\n                );\n            },\n            async querySelectorAll(selector: string, asyncProps: HAQuerySelectorConfig = {}) {\n                const el = await element;\n                return await asyncQuerySelectorAll(\n                    el,\n                    selector,\n                    {\n                        ...config,\n                        ...asyncProps\n                    }\n                );\n            },\n            async shadowRootQuerySelector(selector: string, asyncProps: HAQuerySelectorConfig = {}) {\n                const el = await element;\n                return await asyncShadowRootQuerySelector(\n                    el,\n                    selector,\n                    {\n                        ...config,\n                        ...asyncProps\n                    }\n                );\n            }\n        };\n\n        return acc;\n\n    }, {} as HomeAssistantElement);\n\n};\n\nexport const searchNode = (\n    key: string,\n    node: HomeAssistantElement\n): ElementProps => {\n    const entries = Object.entries(node) as [string, ElementProps][];\n    for (const entry of entries) {\n        if (entry[0] === key) {\n            return entry[1];\n        } else {\n            const noeDeep = searchNode(key, entry[1].children);\n            if (noeDeep) {\n                return noeDeep;\n            }\n        }\n    }\n};\n\nexport const flatHomeAssistantTree = <T extends object>(\n    rootElement: object,\n    tree: HomeAssistantElement\n): T => {\n    const rootElementKeys = Object.keys(rootElement);\n    return rootElementKeys.reduce(\n        (acc: Record<string, HAElement>, key: string): Record<string, HAElement> => {\n            const node = searchNode(key, tree);\n            const { children, ...rest } = node;\n            acc[key] = {\n                ...rest\n            };\n            return acc;\n        },\n        {} as Record<string, HAElement>\n    ) as T;\n};"],names:[],mappings:"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",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"631f0ba7121a1fb6147ab7201501d208923fc905"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_1h2goi2f99=function(){return actualCoverage;};}return actualCoverage;}cov_1h2goi2f99();cov_1h2goi2f99().s[0]++;const getQuery=(selector,shadowRoot)=>{cov_1h2goi2f99().f[0]++;cov_1h2goi2f99().s[1]++;return shadowRoot?(cov_1h2goi2f99().b[0][0]++,$+' '+selector):(cov_1h2goi2f99().b[0][1]++,selector);};cov_1h2goi2f99().s[2]++;const getAsyncElements=(config,node,fromElement=(cov_1h2goi2f99().b[1][0]++,null),insideShadowRoot=(cov_1h2goi2f99().b[2][0]++,false))=>{cov_1h2goi2f99().f[1]++;const entries=(cov_1h2goi2f99().s[3]++,Object.entries((cov_1h2goi2f99().b[3][0]++,node)||(cov_1h2goi2f99().b[3][1]++,{})));cov_1h2goi2f99().s[4]++;return entries.reduce((acc,entry)=>{cov_1h2goi2f99().f[2]++;const[key,nodeDescriptor]=(cov_1h2goi2f99().s[5]++,entry);cov_1h2goi2f99().s[6]++;if((cov_1h2goi2f99().b[5][0]++,nodeDescriptor.selector===$)&&(cov_1h2goi2f99().b[5][1]++,fromElement)){cov_1h2goi2f99().b[4][0]++;cov_1h2goi2f99().s[7]++;return nodeDescriptor.children?(cov_1h2goi2f99().b[6][0]++,Object.assign(Object.assign({},acc),getAsyncElements(config,nodeDescriptor.children,fromElement,true))):(cov_1h2goi2f99().b[6][1]++,acc);}else {cov_1h2goi2f99().b[4][1]++;}const element=(cov_1h2goi2f99().s[8]++,fromElement?(cov_1h2goi2f99().b[7][0]++,fromElement.then(element=>{cov_1h2goi2f99().f[3]++;cov_1h2goi2f99().s[9]++;return P(element,getQuery(nodeDescriptor.selector,insideShadowRoot),config);})):(cov_1h2goi2f99().b[7][1]++,P(nodeDescriptor.selector,config)));cov_1h2goi2f99().s[10]++;acc[key]={element,children:getAsyncElements(config,nodeDescriptor.children,element),querySelector(selector,asyncProps=(cov_1h2goi2f99().b[8][0]++,{})){cov_1h2goi2f99().f[4]++;cov_1h2goi2f99().s[11]++;return __awaiter(this,void 0,void 0,function*(){cov_1h2goi2f99().f[5]++;const el=(cov_1h2goi2f99().s[12]++,yield element);cov_1h2goi2f99().s[13]++;return yield P(el,selector,Object.assign(Object.assign({},config),asyncProps));});},querySelectorAll(selector,asyncProps=(cov_1h2goi2f99().b[9][0]++,{})){cov_1h2goi2f99().f[6]++;cov_1h2goi2f99().s[14]++;return __awaiter(this,void 0,void 0,function*(){cov_1h2goi2f99().f[7]++;const el=(cov_1h2goi2f99().s[15]++,yield element);cov_1h2goi2f99().s[16]++;return yield T(el,selector,Object.assign(Object.assign({},config),asyncProps));});},shadowRootQuerySelector(selector,asyncProps=(cov_1h2goi2f99().b[10][0]++,{})){cov_1h2goi2f99().f[8]++;cov_1h2goi2f99().s[17]++;return __awaiter(this,void 0,void 0,function*(){cov_1h2goi2f99().f[9]++;const el=(cov_1h2goi2f99().s[18]++,yield element);cov_1h2goi2f99().s[19]++;return yield I(el,selector,Object.assign(Object.assign({},config),asyncProps));});}};cov_1h2goi2f99().s[20]++;return acc;},{});};cov_1h2goi2f99().s[21]++;const searchNode=(key,node)=>{cov_1h2goi2f99().f[10]++;const entries=(cov_1h2goi2f99().s[22]++,Object.entries(node));cov_1h2goi2f99().s[23]++;for(const entry of entries){cov_1h2goi2f99().s[24]++;if(entry[0]===key){cov_1h2goi2f99().b[11][0]++;cov_1h2goi2f99().s[25]++;return entry[1];}else {cov_1h2goi2f99().b[11][1]++;const noeDeep=(cov_1h2goi2f99().s[26]++,searchNode(key,entry[1].children));cov_1h2goi2f99().s[27]++;if(noeDeep){cov_1h2goi2f99().b[12][0]++;cov_1h2goi2f99().s[28]++;return noeDeep;}else {cov_1h2goi2f99().b[12][1]++;}}}};cov_1h2goi2f99().s[29]++;const flatHomeAssistantTree=(rootElement,tree)=>{cov_1h2goi2f99().f[11]++;const rootElementKeys=(cov_1h2goi2f99().s[30]++,Object.keys(rootElement));cov_1h2goi2f99().s[31]++;return rootElementKeys.reduce((acc,key)=>{cov_1h2goi2f99().f[12]++;const node=(cov_1h2goi2f99().s[32]++,searchNode(key,tree));(cov_1h2goi2f99().s[33]++,node);const rest=(cov_1h2goi2f99().s[34]++,__rest(node,["children"]));cov_1h2goi2f99().s[35]++;acc[key]=Object.assign({},rest);cov_1h2goi2f99().s[36]++;return acc;},{});};

    function cov_2m9674fn89(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts";var hash="ae885ba8da23d26eef4e150c648a42de3f255a71";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts",statementMap:{"0":{start:{line:8,column:8},end:{line:8,column:16}},"1":{start:{line:9,column:8},end:{line:9,column:45}},"2":{start:{line:10,column:8},end:{line:10,column:50}},"3":{start:{line:11,column:8},end:{line:11,column:65}},"4":{start:{line:12,column:8},end:{line:12,column:69}},"5":{start:{line:13,column:8},end:{line:13,column:58}},"6":{start:{line:14,column:8},end:{line:14,column:62}},"7":{start:{line:15,column:8},end:{line:15,column:65}},"8":{start:{line:16,column:8},end:{line:16,column:65}},"9":{start:{line:17,column:8},end:{line:17,column:125}},"10":{start:{line:21,column:8},end:{line:21,column:190}},"11":{start:{line:22,column:8},end:{line:22,column:118}},"12":{start:{line:23,column:8},end:{line:23,column:122}},"13":{start:{line:24,column:8},end:{line:24,column:142}},"14":{start:{line:25,column:8},end:{line:25,column:179}},"15":{start:{line:26,column:8},end:{line:30,column:11}},"16":{start:{line:27,column:12},end:{line:29,column:15}},"17":{start:{line:33,column:0},end:{line:50,column:2}},"18":{start:{line:34,column:4},end:{line:34,column:58}},"19":{start:{line:36,column:4},end:{line:36,column:172}},"20":{start:{line:37,column:4},end:{line:37,column:186}},"21":{start:{line:39,column:4},end:{line:39,column:283}},"22":{start:{line:40,column:4},end:{line:40,column:198}},"23":{start:{line:41,column:4},end:{line:41,column:328}},"24":{start:{line:43,column:4},end:{line:49,column:7}},"25":{start:{line:44,column:8},end:{line:48,column:11}},"26":{start:{line:45,column:12},end:{line:47,column:13}},"27":{start:{line:46,column:16},end:{line:46,column:130}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:29},end:{line:18,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:4},end:{line:19,column:5}},loc:{start:{line:19,column:13},end:{line:31,column:5}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:136},end:{line:26,column:137}},loc:{start:{line:26,column:162},end:{line:30,column:9}},line:26},"3":{name:"_HAQuerySelector_dispatchEvent",decl:{start:{line:33,column:457},end:{line:33,column:487}},loc:{start:{line:33,column:502},end:{line:35,column:1}},line:33},"4":{name:"_HAQuerySelector_updateRootElements",decl:{start:{line:35,column:50},end:{line:35,column:85}},loc:{start:{line:35,column:88},end:{line:38,column:1}},line:35},"5":{name:"_HAQuerySelector_updateResolverElements",decl:{start:{line:38,column:54},end:{line:38,column:93}},loc:{start:{line:38,column:96},end:{line:42,column:1}},line:38},"6":{name:"_HAQuerySelector_watchDashboards",decl:{start:{line:42,column:47},end:{line:42,column:79}},loc:{start:{line:42,column:91},end:{line:50,column:1}},line:42},"7":{name:"(anonymous_7)",decl:{start:{line:43,column:22},end:{line:43,column:23}},loc:{start:{line:43,column:42},end:{line:49,column:5}},line:43},"8":{name:"(anonymous_8)",decl:{start:{line:44,column:27},end:{line:44,column:28}},loc:{start:{line:44,column:37},end:{line:48,column:9}},line:44}},branchMap:{"0":{loc:{start:{line:7,column:16},end:{line:7,column:27}},type:"default-arg",locations:[{start:{line:7,column:25},end:{line:7,column:27}}],line:7},"1":{loc:{start:{line:24,column:8},end:{line:24,column:141}},type:"cond-expr",locations:[{start:{line:24,column:117},end:{line:24,column:123}},{start:{line:24,column:126},end:{line:24,column:141}}],line:24},"2":{loc:{start:{line:24,column:8},end:{line:24,column:114}},type:"binary-expr",locations:[{start:{line:24,column:8},end:{line:24,column:97}},{start:{line:24,column:101},end:{line:24,column:114}}],line:24},"3":{loc:{start:{line:45,column:12},end:{line:47,column:13}},type:"if",locations:[{start:{line:45,column:12},end:{line:47,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:45}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts"],sourcesContent:["import {\n    HAQuerySelectorConfig,\n    HomeAssistantElement,\n    HAElement\n} from '@types';\nimport {\n    DEFAULT_CONFIG,\n    HA_ROOT_ELEMENT,\n    HA_RESOLVER_ELEMENT,\n    HAQuerySelectorEvent\n} from '@constants';\nimport {\n    QUERY_SELECTORS,\n    ROOT_SELECTORS,\n    RESOLVER_SELECTORS\n} from '@selectors';\nimport { getAsyncElements, flatHomeAssistantTree } from '@utilities';\n\nclass HAQuerySelector extends EventTarget {\n\n    constructor(config: HAQuerySelectorConfig = {}) {\n        super();\n        this.#config = {\n            ...DEFAULT_CONFIG,\n            ...config\n        };\n    }\n\n    #config: HAQuerySelectorConfig;\n    #homeAssistantRootTree: HomeAssistantElement;\n    #homeAssistantResolverTree: HomeAssistantElement;\n    #haRootElements: Record<keyof typeof HA_ROOT_ELEMENT, HAElement>;\n    #haResolverElements: Record<keyof typeof HA_RESOLVER_ELEMENT, HAElement>;\n    #panelResolverObserver: MutationObserver;\n    #watchDashboardsBinded: (mutations: MutationRecord[]) => void;\n\n    public listen() {\n        this.#watchDashboardsBinded = this.#watchDashboards.bind(this);\n        this.#updateRootElements();\n        this.#updateResolverElements();\n        this.#panelResolverObserver?.disconnect();\n        this.#panelResolverObserver = new MutationObserver(this.#watchDashboardsBinded);\n        this.#haResolverElements[HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER].element.then((partialPanelResolver: Element): void => {\n            this.#panelResolverObserver.observe(partialPanelResolver, {\n                childList: true\n            });\n        });\n    }\n\n    #dispatchEvent(type: HAQuerySelectorEvent, detail?: Record<string, HAElement>) {\n        this.dispatchEvent(\n            new CustomEvent(type, { detail })\n        );\n    }\n\n    #updateRootElements() {\n        this.#homeAssistantRootTree = getAsyncElements(\n            this.#config,\n            ROOT_SELECTORS\n        );\n        this.#haRootElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_ROOT_ELEMENT, HAElement>\n        >(\n            HA_ROOT_ELEMENT,\n            this.#homeAssistantRootTree\n        );\n    }\n\n    #updateResolverElements() {\n        this.#homeAssistantResolverTree = getAsyncElements(\n            this.#config,\n            RESOLVER_SELECTORS,\n            this.#haRootElements[HA_ROOT_ELEMENT.HA_DRAWER].element\n        );\n        this.#haResolverElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_RESOLVER_ELEMENT, HAElement>\n        >(\n            HA_RESOLVER_ELEMENT,\n            this.#homeAssistantResolverTree\n        );\n        this.#dispatchEvent(\n            HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD,\n            {\n                ...this.#haRootElements,\n                ...this.#haResolverElements\n            }\n        );\n    }\n\n    #watchDashboards(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                if (node.localName === QUERY_SELECTORS.HA_PANEL_LOVELACE) {\n                    this.#updateResolverElements();\n                }\n            });\n        });\n    }\n\n}\n\nexport {\n    HAQuerySelector,\n    HAQuerySelectorEvent,\n    HomeAssistantElement\n};"],names:[],mappings:";;AAKA,OAAO,EACH,cAAc,EACd,eAAe,EACf,mBAAmB,EACnB,oBAAoB,EACvB,MAAM,YAAY,CAAC;AACpB,OAAO,EACH,eAAe,EACf,cAAc,EACd,kBAAkB,EACrB,MAAM,YAAY,CAAC;AACpB,OAAO,EAAE,gBAAgB,EAAE,qBAAqB,EAAE,MAAM,YAAY,CAAC;AAErE,MAAM,eAAgB,SAAQ,WAAW;IAErC,YAAY,SAAgC,EAAE;QAC1C,KAAK,EAAE,CAAC;;QAOZ,0CAA+B;QAC/B,yDAA6C;QAC7C,6DAAiD;QACjD,kDAAiE;QACjE,sDAAyE;QACzE,yDAAyC;QACzC,yDAA8D;QAZ1D,uBAAA,IAAI,2DACG,cAAc,GACd,MAAM,OACZ,CAAC;IACN,CAAC;IAUM,MAAM;;QACT,uBAAA,IAAI,0CAA0B,uBAAA,IAAI,oEAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAA,CAAC;QAC/D,uBAAA,IAAI,uEAAoB,MAAxB,IAAI,CAAsB,CAAC;QAC3B,uBAAA,IAAI,2EAAwB,MAA5B,IAAI,CAA0B,CAAC;QAC/B,MAAA,uBAAA,IAAI,8CAAuB,0CAAE,UAAU,EAAE,CAAC;QAC1C,uBAAA,IAAI,0CAA0B,IAAI,gBAAgB,CAAC,uBAAA,IAAI,8CAAuB,CAAC,MAAA,CAAC;QAChF,uBAAA,IAAI,2CAAoB,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,oBAA6B,EAAQ,EAAE;YACtH,uBAAA,IAAI,8CAAuB,CAAC,OAAO,CAAC,oBAAoB,EAAE;gBACtD,SAAS,EAAE,IAAI;aAClB,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;CAoDJ;weAlDkB,IAA0B,EAAE,MAAkC;IACzE,IAAI,CAAC,aAAa,CACd,IAAI,WAAW,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,CAAC,CACpC,CAAC;AACN,CAAC;IAGG,uBAAA,IAAI,0CAA0B,gBAAgB,CAC1C,uBAAA,IAAI,+BAAQ,EACZ,cAAc,CACjB,MAAA,CAAC;IACF,uBAAA,IAAI,mCAAmB,qBAAqB,CAGxC,eAAe,EACf,uBAAA,IAAI,8CAAuB,CAC9B,MAAA,CAAC;AACN,CAAC;IAGG,uBAAA,IAAI,8CAA8B,gBAAgB,CAC9C,uBAAA,IAAI,+BAAQ,EACZ,kBAAkB,EAClB,uBAAA,IAAI,uCAAgB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,OAAO,CAC1D,MAAA,CAAC;IACF,uBAAA,IAAI,uCAAuB,qBAAqB,CAG5C,mBAAmB,EACnB,uBAAA,IAAI,kDAA2B,CAClC,MAAA,CAAC;IACF,uBAAA,IAAI,kEAAe,MAAnB,IAAI,EACA,oBAAoB,CAAC,sBAAsB,kCAEpC,uBAAA,IAAI,uCAAgB,GACpB,uBAAA,IAAI,2CAAoB,EAElC,CAAC;AACN,CAAC,+EAEgB,SAA2B;IACxC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE,UAAU,EAAE,EAAQ,EAAE;QACvC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAa,EAAQ,EAAE;YACvC,IAAI,IAAI,CAAC,SAAS,KAAK,eAAe,CAAC,iBAAiB,EAAE;gBACtD,uBAAA,IAAI,2EAAwB,MAA5B,IAAI,CAA0B,CAAC;aAClC;QACL,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACP,CAAC;AAIL,OAAO,EACH,eAAe,EACf,oBAAoB,EAEvB,CAAC",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ae885ba8da23d26eef4e150c648a42de3f255a71"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_2m9674fn89=function(){return actualCoverage;};}return actualCoverage;}cov_2m9674fn89();var _HAQuerySelector_instances,_HAQuerySelector_config,_HAQuerySelector_homeAssistantRootTree,_HAQuerySelector_homeAssistantResolverTree,_HAQuerySelector_haRootElements,_HAQuerySelector_haResolverElements,_HAQuerySelector_panelResolverObserver,_HAQuerySelector_watchDashboardsBinded,_HAQuerySelector_dispatchEvent,_HAQuerySelector_updateRootElements,_HAQuerySelector_updateResolverElements,_HAQuerySelector_watchDashboards;class HAQuerySelector extends EventTarget{constructor(config=(cov_2m9674fn89().b[0][0]++,{})){cov_2m9674fn89().f[0]++;cov_2m9674fn89().s[0]++;super();cov_2m9674fn89().s[1]++;_HAQuerySelector_instances.add(this);cov_2m9674fn89().s[2]++;_HAQuerySelector_config.set(this,void 0);cov_2m9674fn89().s[3]++;_HAQuerySelector_homeAssistantRootTree.set(this,void 0);cov_2m9674fn89().s[4]++;_HAQuerySelector_homeAssistantResolverTree.set(this,void 0);cov_2m9674fn89().s[5]++;_HAQuerySelector_haRootElements.set(this,void 0);cov_2m9674fn89().s[6]++;_HAQuerySelector_haResolverElements.set(this,void 0);cov_2m9674fn89().s[7]++;_HAQuerySelector_panelResolverObserver.set(this,void 0);cov_2m9674fn89().s[8]++;_HAQuerySelector_watchDashboardsBinded.set(this,void 0);cov_2m9674fn89().s[9]++;__classPrivateFieldSet(this,_HAQuerySelector_config,Object.assign(Object.assign({},DEFAULT_CONFIG),config),"f");}listen(){cov_2m9674fn89().f[1]++;var _a;cov_2m9674fn89().s[10]++;__classPrivateFieldSet(this,_HAQuerySelector_watchDashboardsBinded,__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_watchDashboards).bind(this),"f");cov_2m9674fn89().s[11]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateRootElements).call(this);cov_2m9674fn89().s[12]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateResolverElements).call(this);cov_2m9674fn89().s[13]++;(cov_2m9674fn89().b[2][0]++,(_a=__classPrivateFieldGet(this,_HAQuerySelector_panelResolverObserver,"f"))===null)||(cov_2m9674fn89().b[2][1]++,_a===void 0)?(cov_2m9674fn89().b[1][0]++,void 0):(cov_2m9674fn89().b[1][1]++,_a.disconnect());cov_2m9674fn89().s[14]++;__classPrivateFieldSet(this,_HAQuerySelector_panelResolverObserver,new MutationObserver(__classPrivateFieldGet(this,_HAQuerySelector_watchDashboardsBinded,"f")),"f");cov_2m9674fn89().s[15]++;__classPrivateFieldGet(this,_HAQuerySelector_haResolverElements,"f")[HA_RESOLVER_ELEMENT.PARTIAL_PANEL_RESOLVER].element.then(partialPanelResolver=>{cov_2m9674fn89().f[2]++;cov_2m9674fn89().s[16]++;__classPrivateFieldGet(this,_HAQuerySelector_panelResolverObserver,"f").observe(partialPanelResolver,{childList:true});});}}cov_2m9674fn89().s[17]++;_HAQuerySelector_config=new WeakMap(),_HAQuerySelector_homeAssistantRootTree=new WeakMap(),_HAQuerySelector_homeAssistantResolverTree=new WeakMap(),_HAQuerySelector_haRootElements=new WeakMap(),_HAQuerySelector_haResolverElements=new WeakMap(),_HAQuerySelector_panelResolverObserver=new WeakMap(),_HAQuerySelector_watchDashboardsBinded=new WeakMap(),_HAQuerySelector_instances=new WeakSet(),_HAQuerySelector_dispatchEvent=function _HAQuerySelector_dispatchEvent(type,detail){cov_2m9674fn89().f[3]++;cov_2m9674fn89().s[18]++;this.dispatchEvent(new CustomEvent(type,{detail}));},_HAQuerySelector_updateRootElements=function _HAQuerySelector_updateRootElements(){cov_2m9674fn89().f[4]++;cov_2m9674fn89().s[19]++;__classPrivateFieldSet(this,_HAQuerySelector_homeAssistantRootTree,getAsyncElements(__classPrivateFieldGet(this,_HAQuerySelector_config,"f"),ROOT_SELECTORS),"f");cov_2m9674fn89().s[20]++;__classPrivateFieldSet(this,_HAQuerySelector_haRootElements,flatHomeAssistantTree(HA_ROOT_ELEMENT,__classPrivateFieldGet(this,_HAQuerySelector_homeAssistantRootTree,"f")),"f");},_HAQuerySelector_updateResolverElements=function _HAQuerySelector_updateResolverElements(){cov_2m9674fn89().f[5]++;cov_2m9674fn89().s[21]++;__classPrivateFieldSet(this,_HAQuerySelector_homeAssistantResolverTree,getAsyncElements(__classPrivateFieldGet(this,_HAQuerySelector_config,"f"),RESOLVER_SELECTORS,__classPrivateFieldGet(this,_HAQuerySelector_haRootElements,"f")[HA_ROOT_ELEMENT.HA_DRAWER].element),"f");cov_2m9674fn89().s[22]++;__classPrivateFieldSet(this,_HAQuerySelector_haResolverElements,flatHomeAssistantTree(HA_RESOLVER_ELEMENT,__classPrivateFieldGet(this,_HAQuerySelector_homeAssistantResolverTree,"f")),"f");cov_2m9674fn89().s[23]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_dispatchEvent).call(this,HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD,Object.assign(Object.assign({},__classPrivateFieldGet(this,_HAQuerySelector_haRootElements,"f")),__classPrivateFieldGet(this,_HAQuerySelector_haResolverElements,"f")));},_HAQuerySelector_watchDashboards=function _HAQuerySelector_watchDashboards(mutations){cov_2m9674fn89().f[6]++;cov_2m9674fn89().s[24]++;mutations.forEach(({addedNodes})=>{cov_2m9674fn89().f[7]++;cov_2m9674fn89().s[25]++;addedNodes.forEach(node=>{cov_2m9674fn89().f[8]++;cov_2m9674fn89().s[26]++;if(node.localName===QUERY_SELECTORS.HA_PANEL_LOVELACE){cov_2m9674fn89().b[3][0]++;cov_2m9674fn89().s[27]++;__classPrivateFieldGet(this,_HAQuerySelector_instances,"m",_HAQuerySelector_updateResolverElements).call(this);}else {cov_2m9674fn89().b[3][1]++;}});});};

    window.HAQuerySelector = HAQuerySelector;

})();
