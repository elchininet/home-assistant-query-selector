(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['exports'], factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.HAQuerySelectorBundle = {}));
})(this, (function (exports) { 'use strict';

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise, SuppressedError, Symbol */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __rest(s, e) {
        var t = {};
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
            t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                    t[p[i]] = s[p[i]];
            }
        return t;
    }

    typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
        var e = new Error(message);
        return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
    };

    function cov_jnkfhc2pd(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts";var hash="8264fff19969478c1f35fd122fea8fbee8f90e6a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:18}},"1":{start:{line:2,column:32},end:{line:2,column:35}},"2":{start:{line:3,column:28},end:{line:6,column:1}},"3":{start:{line:8,column:0},end:{line:14,column:46}},"4":{start:{line:9,column:4},end:{line:9,column:57}},"5":{start:{line:10,column:4},end:{line:10,column:67}},"6":{start:{line:11,column:4},end:{line:11,column:47}},"7":{start:{line:12,column:4},end:{line:12,column:49}},"8":{start:{line:13,column:4},end:{line:13,column:73}},"9":{start:{line:16,column:0},end:{line:21,column:54}},"10":{start:{line:17,column:4},end:{line:17,column:67}},"11":{start:{line:18,column:4},end:{line:18,column:49}},"12":{start:{line:19,column:4},end:{line:19,column:45}},"13":{start:{line:20,column:4},end:{line:20,column:49}},"14":{start:{line:23,column:0},end:{line:30,column:50}},"15":{start:{line:24,column:4},end:{line:24,column:69}},"16":{start:{line:25,column:4},end:{line:25,column:49}},"17":{start:{line:26,column:4},end:{line:26,column:65}},"18":{start:{line:27,column:4},end:{line:27,column:79}},"19":{start:{line:28,column:4},end:{line:28,column:109}},"20":{start:{line:29,column:4},end:{line:29,column:87}},"21":{start:{line:32,column:0},end:{line:39,column:56}},"22":{start:{line:33,column:4},end:{line:33,column:51}},"23":{start:{line:34,column:4},end:{line:34,column:58}},"24":{start:{line:35,column:4},end:{line:35,column:75}},"25":{start:{line:36,column:4},end:{line:36,column:78}},"26":{start:{line:37,column:4},end:{line:37,column:97}},"27":{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:1},end:{line:8,column:2}},loc:{start:{line:8,column:28},end:{line:14,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:1},end:{line:16,column:2}},loc:{start:{line:16,column:32},end:{line:21,column:1}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:1},end:{line:23,column:2}},loc:{start:{line:23,column:30},end:{line:30,column:1}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:1},end:{line:32,column:2}},loc:{start:{line:32,column:33},end:{line:39,column:1}},line:32}},branchMap:{"0":{loc:{start:{line:14,column:3},end:{line:14,column:44}},type:"binary-expr",locations:[{start:{line:14,column:3},end:{line:14,column:18}},{start:{line:14,column:23},end:{line:14,column:43}}],line:14},"1":{loc:{start:{line:21,column:3},end:{line:21,column:52}},type:"binary-expr",locations:[{start:{line:21,column:3},end:{line:21,column:22}},{start:{line:21,column:27},end:{line:21,column:51}}],line:21},"2":{loc:{start:{line:30,column:3},end:{line:30,column:48}},type:"binary-expr",locations:[{start:{line:30,column:3},end:{line:30,column:20}},{start:{line:30,column:25},end:{line:30,column:47}}],line:30},"3":{loc:{start:{line:39,column:3},end:{line:39,column:54}},type:"binary-expr",locations:[{start:{line:39,column:3},end:{line:39,column:23}},{start:{line:39,column:28},end:{line:39,column:53}}],line:39}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/constants/index.ts"],sourcesContent:["export const $ = '$';\n\nexport const TIMESTAMP_THESHOLD = 500;\n\nexport const DEFAULT_CONFIG = {\n    retries: 100,\n    delay: 50\n};\n\nexport enum HA_ROOT_ELEMENT {\n    HOME_ASSISTANT = 'HOME_ASSISTANT',\n    HOME_ASSISTANT_MAIN = 'HOME_ASSISTANT_MAIN',\n    HA_DRAWER = 'HA_DRAWER',\n    HA_SIDEBAR = 'HA_SIDEBAR',\n    PARTIAL_PANEL_RESOLVER = 'PARTIAL_PANEL_RESOLVER',\n}\n\nexport enum HA_LOVELACE_ELEMENT {\n    HA_PANEL_LOVELACE = 'HA_PANEL_LOVELACE',\n    HUI_ROOT = 'HUI_ROOT',\n    HEADER = 'HEADER',\n    HUI_VIEW = 'HUI_VIEW'\n}\n\nexport enum HA_DIALOG_ELEMENT {\n    HA_MORE_INFO_DIALOG = 'HA_MORE_INFO_DIALOG',\n    HA_DIALOG = 'HA_DIALOG',\n    HA_DIALOG_CONTENT = 'HA_DIALOG_CONTENT',\n    HA_MORE_INFO_DIALOG_INFO = 'HA_MORE_INFO_DIALOG_INFO',\n    HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK = 'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK',\n    HA_DIALOG_MORE_INFO_SETTINGS = 'HA_DIALOG_MORE_INFO_SETTINGS'\n\n}\n\nexport enum HAQuerySelectorEvent {\n    ON_LISTEN = 'onListen',\n    ON_PANEL_LOAD = 'onPanelLoad',\n    ON_LOVELACE_PANEL_LOAD = 'onLovelacePanelLoad',\n    ON_MORE_INFO_DIALOG_OPEN = 'onMoreInfoDialogOpen',\n    ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN = 'onHistoryAndLogBookDialogOpen',\n    ON_SETTINGS_DIALOG_OPEN = 'onSettingsDialogOpen'\n}"],names:[],mappings:"AAAA,MAAM,CAAC,IAAM,CAAC,GAAG,GAAG,CAAC;AAErB,MAAM,CAAC,IAAM,kBAAkB,GAAG,GAAG,CAAC;AAEtC,MAAM,CAAC,IAAM,cAAc,GAAG;IAC1B,OAAO,EAAE,GAAG;IACZ,KAAK,EAAE,EAAE;CACZ,CAAC;AAEF,MAAM,CAAN,IAAY,eAMX;AAND,WAAY,eAAe;IACvB,oDAAiC,CAAA;IACjC,8DAA2C,CAAA;IAC3C,0CAAuB,CAAA;IACvB,4CAAyB,CAAA;IACzB,oEAAiD,CAAA;AACrD,CAAC,EANW,eAAe,KAAf,eAAe,QAM1B;AAED,MAAM,CAAN,IAAY,mBAKX;AALD,WAAY,mBAAmB;IAC3B,8DAAuC,CAAA;IACvC,4CAAqB,CAAA;IACrB,wCAAiB,CAAA;IACjB,4CAAqB,CAAA;AACzB,CAAC,EALW,mBAAmB,KAAnB,mBAAmB,QAK9B;AAED,MAAM,CAAN,IAAY,iBAQX;AARD,WAAY,iBAAiB;IACzB,gEAA2C,CAAA;IAC3C,4CAAuB,CAAA;IACvB,4DAAuC,CAAA;IACvC,0EAAqD,CAAA;IACrD,wGAAmF,CAAA;IACnF,kFAA6D,CAAA;AAEjE,CAAC,EARW,iBAAiB,KAAjB,iBAAiB,QAQ5B;AAED,MAAM,CAAN,IAAY,oBAOX;AAPD,WAAY,oBAAoB;IAC5B,8CAAsB,CAAA;IACtB,qDAA6B,CAAA;IAC7B,sEAA8C,CAAA;IAC9C,yEAAiD,CAAA;IACjD,4FAAoE,CAAA;IACpE,wEAAgD,CAAA;AACpD,CAAC,EAPW,oBAAoB,KAApB,oBAAoB,QAO/B",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8264fff19969478c1f35fd122fea8fbee8f90e6a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_jnkfhc2pd=function(){return actualCoverage;};}return actualCoverage;}cov_jnkfhc2pd();var $=(cov_jnkfhc2pd().s[0]++,'$');var TIMESTAMP_THESHOLD=(cov_jnkfhc2pd().s[1]++,500);var DEFAULT_CONFIG=(cov_jnkfhc2pd().s[2]++,{retries:100,delay:50});var HA_ROOT_ELEMENT;cov_jnkfhc2pd().s[3]++;(function(HA_ROOT_ELEMENT){cov_jnkfhc2pd().f[0]++;cov_jnkfhc2pd().s[4]++;HA_ROOT_ELEMENT["HOME_ASSISTANT"]="HOME_ASSISTANT";cov_jnkfhc2pd().s[5]++;HA_ROOT_ELEMENT["HOME_ASSISTANT_MAIN"]="HOME_ASSISTANT_MAIN";cov_jnkfhc2pd().s[6]++;HA_ROOT_ELEMENT["HA_DRAWER"]="HA_DRAWER";cov_jnkfhc2pd().s[7]++;HA_ROOT_ELEMENT["HA_SIDEBAR"]="HA_SIDEBAR";cov_jnkfhc2pd().s[8]++;HA_ROOT_ELEMENT["PARTIAL_PANEL_RESOLVER"]="PARTIAL_PANEL_RESOLVER";})((cov_jnkfhc2pd().b[0][0]++,HA_ROOT_ELEMENT)||(cov_jnkfhc2pd().b[0][1]++,HA_ROOT_ELEMENT={}));var HA_LOVELACE_ELEMENT;cov_jnkfhc2pd().s[9]++;(function(HA_LOVELACE_ELEMENT){cov_jnkfhc2pd().f[1]++;cov_jnkfhc2pd().s[10]++;HA_LOVELACE_ELEMENT["HA_PANEL_LOVELACE"]="HA_PANEL_LOVELACE";cov_jnkfhc2pd().s[11]++;HA_LOVELACE_ELEMENT["HUI_ROOT"]="HUI_ROOT";cov_jnkfhc2pd().s[12]++;HA_LOVELACE_ELEMENT["HEADER"]="HEADER";cov_jnkfhc2pd().s[13]++;HA_LOVELACE_ELEMENT["HUI_VIEW"]="HUI_VIEW";})((cov_jnkfhc2pd().b[1][0]++,HA_LOVELACE_ELEMENT)||(cov_jnkfhc2pd().b[1][1]++,HA_LOVELACE_ELEMENT={}));var HA_DIALOG_ELEMENT;cov_jnkfhc2pd().s[14]++;(function(HA_DIALOG_ELEMENT){cov_jnkfhc2pd().f[2]++;cov_jnkfhc2pd().s[15]++;HA_DIALOG_ELEMENT["HA_MORE_INFO_DIALOG"]="HA_MORE_INFO_DIALOG";cov_jnkfhc2pd().s[16]++;HA_DIALOG_ELEMENT["HA_DIALOG"]="HA_DIALOG";cov_jnkfhc2pd().s[17]++;HA_DIALOG_ELEMENT["HA_DIALOG_CONTENT"]="HA_DIALOG_CONTENT";cov_jnkfhc2pd().s[18]++;HA_DIALOG_ELEMENT["HA_MORE_INFO_DIALOG_INFO"]="HA_MORE_INFO_DIALOG_INFO";cov_jnkfhc2pd().s[19]++;HA_DIALOG_ELEMENT["HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK"]="HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK";cov_jnkfhc2pd().s[20]++;HA_DIALOG_ELEMENT["HA_DIALOG_MORE_INFO_SETTINGS"]="HA_DIALOG_MORE_INFO_SETTINGS";})((cov_jnkfhc2pd().b[2][0]++,HA_DIALOG_ELEMENT)||(cov_jnkfhc2pd().b[2][1]++,HA_DIALOG_ELEMENT={}));exports.HAQuerySelectorEvent = void 0;cov_jnkfhc2pd().s[21]++;(function(HAQuerySelectorEvent){cov_jnkfhc2pd().f[3]++;cov_jnkfhc2pd().s[22]++;HAQuerySelectorEvent["ON_LISTEN"]="onListen";cov_jnkfhc2pd().s[23]++;HAQuerySelectorEvent["ON_PANEL_LOAD"]="onPanelLoad";cov_jnkfhc2pd().s[24]++;HAQuerySelectorEvent["ON_LOVELACE_PANEL_LOAD"]="onLovelacePanelLoad";cov_jnkfhc2pd().s[25]++;HAQuerySelectorEvent["ON_MORE_INFO_DIALOG_OPEN"]="onMoreInfoDialogOpen";cov_jnkfhc2pd().s[26]++;HAQuerySelectorEvent["ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN"]="onHistoryAndLogBookDialogOpen";cov_jnkfhc2pd().s[27]++;HAQuerySelectorEvent["ON_SETTINGS_DIALOG_OPEN"]="onSettingsDialogOpen";})((cov_jnkfhc2pd().b[3][0]++,exports.HAQuerySelectorEvent)||(cov_jnkfhc2pd().b[3][1]++,exports.HAQuerySelectorEvent={}));

    function cov_6tb7t1v3w(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts";var hash="745f151f22684f2db0869ec8bd033c1d00d11cff";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts",statementMap:{"0":{start:{line:4,column:0},end:{line:20,column:46}},"1":{start:{line:5,column:4},end:{line:5,column:57}},"2":{start:{line:6,column:4},end:{line:6,column:67}},"3":{start:{line:7,column:4},end:{line:7,column:47}},"4":{start:{line:8,column:4},end:{line:8,column:49}},"5":{start:{line:9,column:4},end:{line:9,column:73}},"6":{start:{line:10,column:4},end:{line:10,column:63}},"7":{start:{line:11,column:4},end:{line:11,column:45}},"8":{start:{line:12,column:4},end:{line:12,column:42}},"9":{start:{line:13,column:4},end:{line:13,column:45}},"10":{start:{line:14,column:4},end:{line:14,column:67}},"11":{start:{line:15,column:4},end:{line:15,column:47}},"12":{start:{line:16,column:4},end:{line:16,column:54}},"13":{start:{line:17,column:4},end:{line:17,column:70}},"14":{start:{line:18,column:4},end:{line:18,column:100}},"15":{start:{line:19,column:4},end:{line:19,column:78}},"16":{start:{line:21,column:29},end:{line:58,column:6}},"17":{start:{line:59,column:33},end:{line:86,column:6}},"18":{start:{line:87,column:30},end:{line:122,column:1}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:1},end:{line:4,column:2}},loc:{start:{line:4,column:28},end:{line:20,column:1}},line:4}},branchMap:{"0":{loc:{start:{line:20,column:3},end:{line:20,column:44}},type:"binary-expr",locations:[{start:{line:20,column:3},end:{line:20,column:18}},{start:{line:20,column:23},end:{line:20,column:43}}],line:20}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0},b:{"0":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/selectors/index.ts"],sourcesContent:["import { HomeAssistantNodeDescriptor } from '@types';\nimport {\n    $,\n    HA_ROOT_ELEMENT,\n    HA_LOVELACE_ELEMENT,\n    HA_DIALOG_ELEMENT\n} from '@constants';\n\nexport enum QUERY_SELECTORS {\n    HOME_ASSISTANT = 'home-assistant',\n    HOME_ASSISTANT_MAIN = 'home-assistant-main',\n    HA_DRAWER = 'ha-drawer',\n    HA_SIDEBAR = 'ha-sidebar',\n    PARTIAL_PANEL_RESOLVER = 'partial-panel-resolver',\n    HA_PANEL_LOVELACE = 'ha-panel-lovelace',\n    HUI_ROOT = 'hui-root',\n    HEADER = '.header',\n    HUI_VIEW = 'hui-view',\n    HA_MORE_INFO_DIALOG = 'ha-more-info-dialog',\n    HA_DIALOG = 'ha-dialog',\n    HA_DIALOG_CONTENT = '.content',\n    HA_MORE_INFO_DIALOG_INFO = 'ha-more-info-info',\n    HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK = 'ha-more-info-history-and-logbook',\n    HA_DIALOG_MORE_INFO_SETTINGS = 'ha-more-info-settings'\n}\n\nexport const ROOT_SELECTORS: HomeAssistantNodeDescriptor = {\n    [HA_ROOT_ELEMENT.HOME_ASSISTANT]: {\n        selector: QUERY_SELECTORS.HOME_ASSISTANT,\n        children: {\n            shadowRoot: {\n                selector: $,\n                children: {\n                    [HA_ROOT_ELEMENT.HOME_ASSISTANT_MAIN]: {\n                        selector: QUERY_SELECTORS.HOME_ASSISTANT_MAIN,\n                        children: {\n                            shadowRoot: {\n                                selector: $,\n                                children: {\n                                    [HA_ROOT_ELEMENT.HA_DRAWER]: {\n                                        selector: QUERY_SELECTORS.HA_DRAWER,\n                                        children: {\n                                            [HA_ROOT_ELEMENT.HA_SIDEBAR]: {\n                                                selector: QUERY_SELECTORS.HA_SIDEBAR,\n                                                children: {\n                                                    shadowRoot: {\n                                                        selector: $\n                                                    }\n                                                }\n                                            },\n                                            [HA_ROOT_ELEMENT.PARTIAL_PANEL_RESOLVER]: {\n                                                selector: QUERY_SELECTORS.PARTIAL_PANEL_RESOLVER\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport const LOVELACE_SELECTORS: HomeAssistantNodeDescriptor = {\n    [HA_LOVELACE_ELEMENT.HA_PANEL_LOVELACE]: {\n        selector: QUERY_SELECTORS.HA_PANEL_LOVELACE,\n        children: {\n            shadowRoot: {\n                selector: $,\n                children: {\n                    [HA_LOVELACE_ELEMENT.HUI_ROOT]: {\n                        selector: QUERY_SELECTORS.HUI_ROOT,\n                        children: {\n                            shadowRoot: {\n                                selector: $,\n                                children: {\n                                    [HA_LOVELACE_ELEMENT.HEADER]: {\n                                        selector: QUERY_SELECTORS.HEADER,\n                                    },\n                                    [HA_LOVELACE_ELEMENT.HUI_VIEW]: {\n                                        selector: QUERY_SELECTORS.HUI_VIEW\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport const DIALOG_SELECTORS: HomeAssistantNodeDescriptor = {\n    shadowRoot: {\n        selector: $,\n        children: {\n            [HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG]: {\n                selector: QUERY_SELECTORS.HA_MORE_INFO_DIALOG,\n                children: {\n                    shadowRoot: {\n                        selector: $,\n                        children: {\n                            [HA_DIALOG_ELEMENT.HA_DIALOG]: {\n                                selector: QUERY_SELECTORS.HA_DIALOG,\n                                children: {\n                                    [HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT]: {\n                                        selector: QUERY_SELECTORS.HA_DIALOG_CONTENT,\n                                        children: {\n                                            [HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]: {\n                                                selector: QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO\n                                            },\n                                            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]: {\n                                                selector: QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK\n                                            },\n                                            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]: {\n                                                selector: QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n};"],names:[],mappings:"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",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"745f151f22684f2db0869ec8bd033c1d00d11cff"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_6tb7t1v3w=function(){return actualCoverage;};}return actualCoverage;}cov_6tb7t1v3w();var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l;var QUERY_SELECTORS;cov_6tb7t1v3w().s[0]++;(function(QUERY_SELECTORS){cov_6tb7t1v3w().f[0]++;cov_6tb7t1v3w().s[1]++;QUERY_SELECTORS["HOME_ASSISTANT"]="home-assistant";cov_6tb7t1v3w().s[2]++;QUERY_SELECTORS["HOME_ASSISTANT_MAIN"]="home-assistant-main";cov_6tb7t1v3w().s[3]++;QUERY_SELECTORS["HA_DRAWER"]="ha-drawer";cov_6tb7t1v3w().s[4]++;QUERY_SELECTORS["HA_SIDEBAR"]="ha-sidebar";cov_6tb7t1v3w().s[5]++;QUERY_SELECTORS["PARTIAL_PANEL_RESOLVER"]="partial-panel-resolver";cov_6tb7t1v3w().s[6]++;QUERY_SELECTORS["HA_PANEL_LOVELACE"]="ha-panel-lovelace";cov_6tb7t1v3w().s[7]++;QUERY_SELECTORS["HUI_ROOT"]="hui-root";cov_6tb7t1v3w().s[8]++;QUERY_SELECTORS["HEADER"]=".header";cov_6tb7t1v3w().s[9]++;QUERY_SELECTORS["HUI_VIEW"]="hui-view";cov_6tb7t1v3w().s[10]++;QUERY_SELECTORS["HA_MORE_INFO_DIALOG"]="ha-more-info-dialog";cov_6tb7t1v3w().s[11]++;QUERY_SELECTORS["HA_DIALOG"]="ha-dialog";cov_6tb7t1v3w().s[12]++;QUERY_SELECTORS["HA_DIALOG_CONTENT"]=".content";cov_6tb7t1v3w().s[13]++;QUERY_SELECTORS["HA_MORE_INFO_DIALOG_INFO"]="ha-more-info-info";cov_6tb7t1v3w().s[14]++;QUERY_SELECTORS["HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK"]="ha-more-info-history-and-logbook";cov_6tb7t1v3w().s[15]++;QUERY_SELECTORS["HA_DIALOG_MORE_INFO_SETTINGS"]="ha-more-info-settings";})((cov_6tb7t1v3w().b[0][0]++,QUERY_SELECTORS)||(cov_6tb7t1v3w().b[0][1]++,QUERY_SELECTORS={}));var ROOT_SELECTORS=(cov_6tb7t1v3w().s[16]++,(_a={},_a[HA_ROOT_ELEMENT.HOME_ASSISTANT]={selector:QUERY_SELECTORS.HOME_ASSISTANT,children:{shadowRoot:{selector:$,children:(_b={},_b[HA_ROOT_ELEMENT.HOME_ASSISTANT_MAIN]={selector:QUERY_SELECTORS.HOME_ASSISTANT_MAIN,children:{shadowRoot:{selector:$,children:(_c={},_c[HA_ROOT_ELEMENT.HA_DRAWER]={selector:QUERY_SELECTORS.HA_DRAWER,children:(_d={},_d[HA_ROOT_ELEMENT.HA_SIDEBAR]={selector:QUERY_SELECTORS.HA_SIDEBAR,children:{shadowRoot:{selector:$}}},_d[HA_ROOT_ELEMENT.PARTIAL_PANEL_RESOLVER]={selector:QUERY_SELECTORS.PARTIAL_PANEL_RESOLVER},_d)},_c)}}},_b)}}},_a));var LOVELACE_SELECTORS=(cov_6tb7t1v3w().s[17]++,(_e={},_e[HA_LOVELACE_ELEMENT.HA_PANEL_LOVELACE]={selector:QUERY_SELECTORS.HA_PANEL_LOVELACE,children:{shadowRoot:{selector:$,children:(_f={},_f[HA_LOVELACE_ELEMENT.HUI_ROOT]={selector:QUERY_SELECTORS.HUI_ROOT,children:{shadowRoot:{selector:$,children:(_g={},_g[HA_LOVELACE_ELEMENT.HEADER]={selector:QUERY_SELECTORS.HEADER},_g[HA_LOVELACE_ELEMENT.HUI_VIEW]={selector:QUERY_SELECTORS.HUI_VIEW},_g)}}},_f)}}},_e));var DIALOG_SELECTORS=(cov_6tb7t1v3w().s[18]++,{shadowRoot:{selector:$,children:(_h={},_h[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG]={selector:QUERY_SELECTORS.HA_MORE_INFO_DIALOG,children:{shadowRoot:{selector:$,children:(_j={},_j[HA_DIALOG_ELEMENT.HA_DIALOG]={selector:QUERY_SELECTORS.HA_DIALOG,children:(_k={},_k[HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT]={selector:QUERY_SELECTORS.HA_DIALOG_CONTENT,children:(_l={},_l[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]={selector:QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO},_l[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]={selector:QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK},_l[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]={selector:QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS},_l)},_k)},_j)}}},_h)}});

    var n=function(){return n=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},n.apply(this,arguments)};function t(n,t,e,r){return new(e||(e=Promise))((function(o,u){function i(n){try{c(r.next(n));}catch(n){u(n);}}function a(n){try{c(r.throw(n));}catch(n){u(n);}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t);}))).then(i,a);}c((r=r.apply(n,t||[])).next());}))}function e(n,t){var e,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(a){return function(c){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,a[0]&&(i=0)),i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(n,i);}catch(n){a=[6,n],r=0;}finally{e=o=0;}if(5&a[0])throw a[1];return {value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}"function"==typeof SuppressedError&&SuppressedError;var r="$",o=":host",u="invalid selector",i=10,a=10,c=function(n){var t,e=n[0],r=n[1];return (t=e)&&(t instanceof Document||t instanceof Element||t instanceof ShadowRoot)&&"string"==typeof r};function l(n,t){return function(n){return n.split(",").map((function(n){return n.trim()}))}(n).map((function(n){var e=function(n){return n.split(r).map((function(n){return n.trim()}))}(n);return t(e)}))}var s=function(n,t,e,r){return new Promise((function(o){var u=0,i=function(){var a=n();t(a)?o(a):++u<e?setTimeout(i,r):o(a);};i();}))};function f(n,t){var e=t?" If you want to select a shadowRoot, use ".concat(t," instead."):"";return "".concat(n," cannot be used with a selector ending in a shadowRoot (").concat(r,").").concat(e)}function d(n){return n instanceof Promise?n:Promise.resolve(n)}function h(){return "You can not select a shadowRoot (".concat(r,") of the document.")}function v(){return "You can not select a shadowRoot (".concat(r,") of a shadowRoot.")}function y(n,t){for(var e,r,u=null,i=n.length,a=0;a<i;a++){if(0===a)if(n[a].length)u=t.querySelector(n[a]);else {if(t instanceof Document)throw new SyntaxError(h());if(t instanceof ShadowRoot)throw new SyntaxError(v());u=(null===(e=t.shadowRoot)||void 0===e?void 0:e.querySelector(n[++a]))||null;}else u=(null===(r=u.shadowRoot)||void 0===r?void 0:r.querySelector("".concat(o," ").concat(n[a])))||null;if(null===u)return null}return u}function m(n,t){var e,r=function(n,t,e){if(e||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}([],n,!0),u=r.pop();if(!r.length)return t.querySelectorAll(u);var i=y(r,t);return (null===(e=null==i?void 0:i.shadowRoot)||void 0===e?void 0:e.querySelectorAll("".concat(o," ").concat(u)))||null}function p(n,t){if(1===n.length&&!n[0].length){if(t instanceof Document)throw new SyntaxError(h());if(t instanceof ShadowRoot)throw new SyntaxError(v());return t.shadowRoot}var e=y(n,t);return (null==e?void 0:e.shadowRoot)||null}function w(n,t,e,r){void 0===e&&(e="querySelector"),void 0===r&&(r="shadowRootQuerySelector");for(var o=l(n,(function(n){if(!n[n.length-1].length)throw new SyntaxError(f(e,r));return n})),u=o.length,i=0;i<u;i++){var a=y(o[i],t);if(a)return a}return null}function g(n,t,e){void 0===e&&(e="querySelectorAll");for(var r=l(n,(function(n){if(!n[n.length-1].length)throw new SyntaxError(f(e));return n})),o=r.length,i=0;i<o;i++){var a=m(r[i],t);if(null==a?void 0:a.length)return a}return document.querySelectorAll(u)}function S(n,t,e,o){void 0===e&&(e="shadowRootQuerySelector"),void 0===o&&(o="querySelector");for(var u=l(n,(function(n){if(n.pop().length)throw new SyntaxError(function(n,t){return "".concat(n," must be used with a selector ending in a shadowRoot (").concat(r,"). If you don't want to select a shadowRoot, use ").concat(t," instead.")}(e,o));return n})),i=u.length,a=0;a<i;a++){var c=p(u[a],t);if(c)return c}return null}function b(n,r,o,u){return t(this,void 0,void 0,(function(){return e(this,(function(t){return [2,s((function(){return w(n,r,"asyncQuerySelector","asyncShadowRootQuerySelector")}),(function(n){return !!n}),o,u)]}))}))}function P(n,r,o,u){return t(this,void 0,void 0,(function(){return e(this,(function(t){return [2,s((function(){return g(n,r,"asyncQuerySelectorAll")}),(function(n){return !!n.length}),o,u)]}))}))}function R(n,r,o,u){return t(this,void 0,void 0,(function(){return e(this,(function(t){return [2,s((function(){return S(n,r,"asyncShadowRootQuerySelector","asyncQuerySelector")}),(function(n){return !!n}),o,u)]}))}))}var _=function(n,t){var e=n.querySelectorAll(t);if(e.length)return e;if(n instanceof Element&&n.shadowRoot){var r=_(n.shadowRoot,t);if(r.length)return r}for(var o=0,i=Array.from(n.querySelectorAll("*"));o<i.length;o++){var a=i[o],c=_(a,t);if(c.length)return c}return document.querySelectorAll(u)},q=function(n,t,e,r){return s((function(){return _(n,t)}),(function(n){return !!n.length}),e,r)};function Q(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(this,void 0,void 0,(function(){var t,r,o,u,l;return e(this,(function(e){switch(e.label){case 0:return c(n)?(t=n[0],r=n[1],o=n[2],[4,b(r,t,(null==o?void 0:o.retries)||i,(null==o?void 0:o.delay)||a)]):[3,2];case 1:case 3:return [2,e.sent()];case 2:return u=n[0],l=n[1],[4,b(u,document,(null==l?void 0:l.retries)||i,(null==l?void 0:l.delay)||a)]}}))}))}function j(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(this,void 0,void 0,(function(){var t,r,o,u,l;return e(this,(function(e){switch(e.label){case 0:return c(n)?(t=n[0],r=n[1],o=n[2],[4,P(r,t,(null==o?void 0:o.retries)||i,(null==o?void 0:o.delay)||a)]):[3,2];case 1:return [2,e.sent()];case 2:return u=n[0],l=n[1],[2,P(u,document,(null==l?void 0:l.retries)||i,(null==l?void 0:l.delay)||a)]}}))}))}function D(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(this,void 0,void 0,(function(){var t,r,o,u,l;return e(this,(function(e){switch(e.label){case 0:return c(n)?(t=n[0],r=n[1],o=n[2],[4,R(r,t,(null==o?void 0:o.retries)||i,(null==o?void 0:o.delay)||a)]):[3,2];case 1:return [2,e.sent()];case 2:return u=n[0],l=n[1],[2,R(u,document,(null==l?void 0:l.retries)||i,(null==l?void 0:l.delay)||a)]}}))}))}var I=function(){function o(t,e){t instanceof Node||t instanceof Promise?(this._element=t,this._asyncParams=n({retries:i,delay:a},e||{})):(this._element=document,this._asyncParams=n({retries:i,delay:a},t||{}));}return Object.defineProperty(o.prototype,"element",{get:function(){return d(this._element).then((function(n){return n instanceof NodeList?n[0]||null:n}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,r,{get:function(){var n=this;return new o(d(this._element).then((function(t){return t instanceof Document||t instanceof ShadowRoot||null===t||t instanceof NodeList&&0===t.length?null:t instanceof NodeList?D(t[0],r,n._asyncParams):D(t,r,n._asyncParams)})),this._asyncParams)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"all",{get:function(){return d(this._element).then((function(n){return n instanceof NodeList?n:document.querySelectorAll(u)}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"asyncParams",{get:function(){return this._asyncParams},enumerable:!1,configurable:!0}),o.prototype.eq=function(n){return t(this,void 0,void 0,(function(){return e(this,(function(t){return [2,d(this._element).then((function(t){return t instanceof NodeList&&t[n]||null}))]}))}))},o.prototype.query=function(n){var t=this;return new o(d(this._element).then((function(e){return null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?j(e[0],n,t._asyncParams):j(e,n,t._asyncParams)})),this._asyncParams)},o.prototype.deepQuery=function(n){var t=this;return new o(d(this._element).then((function(e){return null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?Promise.race(Array.from(e).map((function(e){return q(e,n,t._asyncParams.retries,t._asyncParams.delay)}))):q(e,n,t._asyncParams.retries,t._asyncParams.delay)})),this._asyncParams)},o}();

    function cov_1h2goi2f99(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts";var hash="7dd3fc7b59c86380111238c7bdcad2042ccbf000";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts",statementMap:{"0":{start:{line:4,column:15},end:{line:6,column:17}},"1":{start:{line:4,column:49},end:{line:6,column:15}},"2":{start:{line:7,column:30},end:{line:33,column:1}},"3":{start:{line:8,column:4},end:{line:8,column:55}},"4":{start:{line:8,column:34},end:{line:8,column:53}},"5":{start:{line:9,column:4},end:{line:9,column:66}},"6":{start:{line:9,column:39},end:{line:9,column:64}},"7":{start:{line:10,column:18},end:{line:10,column:44}},"8":{start:{line:11,column:4},end:{line:32,column:11}},"9":{start:{line:12,column:18},end:{line:12,column:26}},"10":{start:{line:12,column:45},end:{line:12,column:53}},"11":{start:{line:13,column:8},end:{line:17,column:9}},"12":{start:{line:15,column:12},end:{line:16,column:122}},"13":{start:{line:18,column:22},end:{line:25,column:65}},"14":{start:{line:20,column:16},end:{line:22,column:17}},"15":{start:{line:21,column:20},end:{line:21,column:116}},"16":{start:{line:23,column:16},end:{line:23,column:28}},"17":{start:{line:26,column:8},end:{line:30,column:10}},"18":{start:{line:31,column:8},end:{line:31,column:19}},"19":{start:{line:34,column:24},end:{line:48,column:1}},"20":{start:{line:35,column:18},end:{line:35,column:38}},"21":{start:{line:36,column:4},end:{line:47,column:5}},"22":{start:{line:36,column:18},end:{line:36,column:19}},"23":{start:{line:36,column:33},end:{line:36,column:40}},"24":{start:{line:37,column:20},end:{line:37,column:33}},"25":{start:{line:38,column:8},end:{line:46,column:9}},"26":{start:{line:39,column:12},end:{line:39,column:28}},"27":{start:{line:42,column:26},end:{line:42,column:60}},"28":{start:{line:43,column:12},end:{line:45,column:13}},"29":{start:{line:44,column:16},end:{line:44,column:31}},"30":{start:{line:49,column:35},end:{line:57,column:1}},"31":{start:{line:50,column:26},end:{line:50,column:50}},"32":{start:{line:51,column:4},end:{line:56,column:11}},"33":{start:{line:52,column:19},end:{line:52,column:40}},"34":{start:{line:53,column:23},end:{line:53,column:36}},"35":{start:{line:53,column:45},end:{line:53,column:71}},"36":{start:{line:54,column:8},end:{line:54,column:38}},"37":{start:{line:55,column:8},end:{line:55,column:19}},"38":{start:{line:58,column:36},end:{line:70,column:1}},"39":{start:{line:59,column:22},end:{line:64,column:5}},"40":{start:{line:65,column:18},end:{line:68,column:5}},"41":{start:{line:66,column:8},end:{line:66,column:34}},"42":{start:{line:67,column:8},end:{line:67,column:20}},"43":{start:{line:69,column:4},end:{line:69,column:43}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:15},end:{line:4,column:16}},loc:{start:{line:4,column:47},end:{line:6,column:17}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:7,column:30},end:{line:7,column:31}},loc:{start:{line:7,column:85},end:{line:33,column:1}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:11,column:26},end:{line:11,column:27}},loc:{start:{line:11,column:48},end:{line:32,column:5}},line:11},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:31},end:{line:19,column:32}},loc:{start:{line:19,column:50},end:{line:24,column:13}},line:19},"4":{name:"(anonymous_4)",decl:{start:{line:34,column:24},end:{line:34,column:25}},loc:{start:{line:34,column:45},end:{line:48,column:1}},line:34},"5":{name:"(anonymous_5)",decl:{start:{line:49,column:35},end:{line:49,column:36}},loc:{start:{line:49,column:64},end:{line:57,column:1}},line:49},"6":{name:"(anonymous_6)",decl:{start:{line:51,column:34},end:{line:51,column:35}},loc:{start:{line:51,column:54},end:{line:56,column:5}},line:51},"7":{name:"(anonymous_7)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:71},end:{line:70,column:1}},line:58},"8":{name:"(anonymous_8)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:39},end:{line:68,column:5}},line:65}},branchMap:{"0":{loc:{start:{line:4,column:56},end:{line:6,column:14}},type:"cond-expr",locations:[{start:{line:5,column:6},end:{line:5,column:24}},{start:{line:6,column:6},end:{line:6,column:14}}],line:4},"1":{loc:{start:{line:8,column:4},end:{line:8,column:55}},type:"if",locations:[{start:{line:8,column:4},end:{line:8,column:55}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:8},"2":{loc:{start:{line:9,column:4},end:{line:9,column:66}},type:"if",locations:[{start:{line:9,column:4},end:{line:9,column:66}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:9},"3":{loc:{start:{line:10,column:33},end:{line:10,column:43}},type:"binary-expr",locations:[{start:{line:10,column:33},end:{line:10,column:37}},{start:{line:10,column:41},end:{line:10,column:43}}],line:10},"4":{loc:{start:{line:13,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:13,column:8},end:{line:17,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:13},"5":{loc:{start:{line:13,column:12},end:{line:14,column:23}},type:"binary-expr",locations:[{start:{line:13,column:12},end:{line:13,column:41}},{start:{line:14,column:12},end:{line:14,column:23}}],line:13},"6":{loc:{start:{line:15,column:19},end:{line:16,column:121}},type:"cond-expr",locations:[{start:{line:16,column:18},end:{line:16,column:115}},{start:{line:16,column:118},end:{line:16,column:121}}],line:15},"7":{loc:{start:{line:18,column:22},end:{line:25,column:65}},type:"cond-expr",locations:[{start:{line:19,column:14},end:{line:24,column:14}},{start:{line:25,column:14},end:{line:25,column:65}}],line:18},"8":{loc:{start:{line:20,column:16},end:{line:22,column:17}},type:"if",locations:[{start:{line:20,column:16},end:{line:22,column:17}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:20},"9":{loc:{start:{line:38,column:8},end:{line:46,column:9}},type:"if",locations:[{start:{line:38,column:8},end:{line:46,column:9}},{start:{line:41,column:13},end:{line:46,column:9}}],line:38},"10":{loc:{start:{line:43,column:12},end:{line:45,column:13}},type:"if",locations:[{start:{line:43,column:12},end:{line:45,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:43}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/utilities/index.ts"],sourcesContent:["import {\n    HAQuerySelectorConfig,\n    HomeAssistantNodeDescriptor,\n    HomeAssistantElement,\n    NodeDescriptorProps,\n    ElementProps,\n    HAElement\n} from '@types';\nimport { $, HA_DIALOG_ELEMENT } from '@constants';\nimport { AsyncSelector, asyncQuerySelector } from 'shadow-dom-selector';\n\nconst getQuery = (selector: string, shadowRoot: boolean) => shadowRoot\n    ? $ + ' ' + selector\n    : selector;\n\nexport const getAsyncElements = (\n    config: HAQuerySelectorConfig,\n    node: HomeAssistantNodeDescriptor,\n    fromElement: Promise<Element> = null,\n    insideShadowRoot = false,\n): HomeAssistantElement => {\n\n    const entries = Object.entries(node || {});\n\n    return entries.reduce((acc: HomeAssistantElement, entry: [string, NodeDescriptorProps]): HomeAssistantElement => {\n\n        const [key, nodeDescriptor] = entry;\n\n        if (\n            nodeDescriptor.selector === $ &&\n            fromElement\n        ) {\n\n            return nodeDescriptor.children\n                ? {\n                    ...acc,\n                    ...getAsyncElements(\n                        config,\n                        nodeDescriptor.children,\n                        fromElement,\n                        true\n                    )\n                }\n                : acc;\n\n        }\n\n        const element: Promise<Element> = fromElement\n            ? fromElement.then((element: Element | null) => {\n                if (element) {\n                    return asyncQuerySelector(\n                        element,\n                        getQuery(nodeDescriptor.selector, insideShadowRoot),\n                        config\n                    );\n                }\n                return null;\n            })\n            : asyncQuerySelector(nodeDescriptor.selector, config);\n\n        acc[key] = {\n            element,\n            children: getAsyncElements(\n                config,\n                nodeDescriptor.children,\n                element\n            ),\n            selector: new AsyncSelector(\n                element,\n                config\n            )\n        };\n\n        return acc;\n\n    }, {} as HomeAssistantElement);\n\n};\n\nexport const searchNode = (\n    key: string,\n    node: HomeAssistantElement\n): ElementProps => {\n    const entries = Object.entries(node) as [string, ElementProps][];\n    for (const entry of entries) {\n        if (entry[0] === key) {\n            return entry[1];\n        } else {\n            const noeDeep = searchNode(key, entry[1].children);\n            if (noeDeep) {\n                return noeDeep;\n            }\n        }\n    }\n};\n\nexport const flatHomeAssistantTree = <T extends object>(\n    rootElement: object,\n    tree: HomeAssistantElement\n): T => {\n    const rootElementKeys = Object.keys(rootElement);\n    return rootElementKeys.reduce(\n        (acc: Record<string, HAElement>, key: string): Record<string, HAElement> => {\n            const node = searchNode(key, tree);\n            const { children, ...rest } = node;\n            acc[key] = {\n                ...rest\n            };\n            return acc;\n        },\n        {} as Record<string, HAElement>\n    ) as T;\n};\n\nexport const getFinalDialogFlatTree = (\n    flatTree: Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>,\n    dialogElement: (\n        'HA_MORE_INFO_DIALOG_INFO' |\n        'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK' |\n        'HA_DIALOG_MORE_INFO_SETTINGS'\n    )\n): Record<keyof typeof HA_DIALOG_ELEMENT, HAElement> => {\n    const extractKeys = [\n        HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG,\n        HA_DIALOG_ELEMENT.HA_DIALOG,\n        HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT,\n        dialogElement\n    ];\n    const reducer = (\n        tree: Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>,\n        key: keyof typeof HA_DIALOG_ELEMENT\n    ): Record<keyof typeof HA_DIALOG_ELEMENT, HAElement> => {\n        tree[key] = flatTree[key];\n        return tree;\n    };\n    return extractKeys.reduce(\n        reducer,\n        {} as Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>\n    );\n};"],names:[],mappings:"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",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7dd3fc7b59c86380111238c7bdcad2042ccbf000"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_1h2goi2f99=function(){return actualCoverage;};}return actualCoverage;}cov_1h2goi2f99();cov_1h2goi2f99().s[0]++;var getQuery=function(selector,shadowRoot){cov_1h2goi2f99().f[0]++;cov_1h2goi2f99().s[1]++;return shadowRoot?(cov_1h2goi2f99().b[0][0]++,$+' '+selector):(cov_1h2goi2f99().b[0][1]++,selector);};cov_1h2goi2f99().s[2]++;var getAsyncElements=function(config,node,fromElement,insideShadowRoot){cov_1h2goi2f99().f[1]++;cov_1h2goi2f99().s[3]++;if(fromElement===void 0){cov_1h2goi2f99().b[1][0]++;cov_1h2goi2f99().s[4]++;fromElement=null;}else {cov_1h2goi2f99().b[1][1]++;}cov_1h2goi2f99().s[5]++;if(insideShadowRoot===void 0){cov_1h2goi2f99().b[2][0]++;cov_1h2goi2f99().s[6]++;insideShadowRoot=false;}else {cov_1h2goi2f99().b[2][1]++;}var entries=(cov_1h2goi2f99().s[7]++,Object.entries((cov_1h2goi2f99().b[3][0]++,node)||(cov_1h2goi2f99().b[3][1]++,{})));cov_1h2goi2f99().s[8]++;return entries.reduce(function(acc,entry){cov_1h2goi2f99().f[2]++;var key=(cov_1h2goi2f99().s[9]++,entry[0]),nodeDescriptor=(cov_1h2goi2f99().s[10]++,entry[1]);cov_1h2goi2f99().s[11]++;if((cov_1h2goi2f99().b[5][0]++,nodeDescriptor.selector===$)&&(cov_1h2goi2f99().b[5][1]++,fromElement)){cov_1h2goi2f99().b[4][0]++;cov_1h2goi2f99().s[12]++;return nodeDescriptor.children?(cov_1h2goi2f99().b[6][0]++,__assign(__assign({},acc),getAsyncElements(config,nodeDescriptor.children,fromElement,true))):(cov_1h2goi2f99().b[6][1]++,acc);}else {cov_1h2goi2f99().b[4][1]++;}var element=(cov_1h2goi2f99().s[13]++,fromElement?(cov_1h2goi2f99().b[7][0]++,fromElement.then(function(element){cov_1h2goi2f99().f[3]++;cov_1h2goi2f99().s[14]++;if(element){cov_1h2goi2f99().b[8][0]++;cov_1h2goi2f99().s[15]++;return Q(element,getQuery(nodeDescriptor.selector,insideShadowRoot),config);}else {cov_1h2goi2f99().b[8][1]++;}cov_1h2goi2f99().s[16]++;return null;})):(cov_1h2goi2f99().b[7][1]++,Q(nodeDescriptor.selector,config)));cov_1h2goi2f99().s[17]++;acc[key]={element:element,children:getAsyncElements(config,nodeDescriptor.children,element),selector:new I(element,config)};cov_1h2goi2f99().s[18]++;return acc;},{});};cov_1h2goi2f99().s[19]++;var searchNode=function(key,node){cov_1h2goi2f99().f[4]++;var entries=(cov_1h2goi2f99().s[20]++,Object.entries(node));cov_1h2goi2f99().s[21]++;for(var _i=(cov_1h2goi2f99().s[22]++,0),entries_1=(cov_1h2goi2f99().s[23]++,entries);_i<entries_1.length;_i++){var entry=(cov_1h2goi2f99().s[24]++,entries_1[_i]);cov_1h2goi2f99().s[25]++;if(entry[0]===key){cov_1h2goi2f99().b[9][0]++;cov_1h2goi2f99().s[26]++;return entry[1];}else {cov_1h2goi2f99().b[9][1]++;var noeDeep=(cov_1h2goi2f99().s[27]++,searchNode(key,entry[1].children));cov_1h2goi2f99().s[28]++;if(noeDeep){cov_1h2goi2f99().b[10][0]++;cov_1h2goi2f99().s[29]++;return noeDeep;}else {cov_1h2goi2f99().b[10][1]++;}}}};cov_1h2goi2f99().s[30]++;var flatHomeAssistantTree=function(rootElement,tree){cov_1h2goi2f99().f[5]++;var rootElementKeys=(cov_1h2goi2f99().s[31]++,Object.keys(rootElement));cov_1h2goi2f99().s[32]++;return rootElementKeys.reduce(function(acc,key){cov_1h2goi2f99().f[6]++;var node=(cov_1h2goi2f99().s[33]++,searchNode(key,tree));(cov_1h2goi2f99().s[34]++,node.children);var rest=(cov_1h2goi2f99().s[35]++,__rest(node,["children"]));cov_1h2goi2f99().s[36]++;acc[key]=__assign({},rest);cov_1h2goi2f99().s[37]++;return acc;},{});};cov_1h2goi2f99().s[38]++;var getFinalDialogFlatTree=function(flatTree,dialogElement){cov_1h2goi2f99().f[7]++;var extractKeys=(cov_1h2goi2f99().s[39]++,[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG,HA_DIALOG_ELEMENT.HA_DIALOG,HA_DIALOG_ELEMENT.HA_DIALOG_CONTENT,dialogElement]);cov_1h2goi2f99().s[40]++;var reducer=function(tree,key){cov_1h2goi2f99().f[8]++;cov_1h2goi2f99().s[41]++;tree[key]=flatTree[key];cov_1h2goi2f99().s[42]++;return tree;};cov_1h2goi2f99().s[43]++;return extractKeys.reduce(reducer,{});};

    function cov_2m9674fn89(){var path="/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts";var hash="d62ef961c09269355157f5731bd5d54a3f1a0d5a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts",statementMap:{"0":{start:{line:5,column:28},end:{line:34,column:3}},"1":{start:{line:7,column:8},end:{line:7,column:58}},"2":{start:{line:9,column:4},end:{line:16,column:6}},"3":{start:{line:11,column:19},end:{line:11,column:21}},"4":{start:{line:12,column:8},end:{line:14,column:9}},"5":{start:{line:12,column:22},end:{line:12,column:23}},"6":{start:{line:13,column:12},end:{line:13,column:37}},"7":{start:{line:15,column:8},end:{line:15,column:62}},"8":{start:{line:17,column:4},end:{line:24,column:6}},"9":{start:{line:19,column:19},end:{line:19,column:21}},"10":{start:{line:20,column:8},end:{line:22,column:9}},"11":{start:{line:20,column:22},end:{line:20,column:23}},"12":{start:{line:21,column:12},end:{line:21,column:37}},"13":{start:{line:23,column:8},end:{line:23,column:66}},"14":{start:{line:25,column:4},end:{line:32,column:6}},"15":{start:{line:27,column:19},end:{line:27,column:21}},"16":{start:{line:28,column:8},end:{line:30,column:9}},"17":{start:{line:28,column:22},end:{line:28,column:23}},"18":{start:{line:29,column:12},end:{line:29,column:37}},"19":{start:{line:31,column:8},end:{line:31,column:72}},"20":{start:{line:33,column:4},end:{line:33,column:32}},"21":{start:{line:35,column:23},end:{line:182,column:23}},"22":{start:{line:36,column:4},end:{line:36,column:39}},"23":{start:{line:38,column:8},end:{line:38,column:47}},"24":{start:{line:38,column:33},end:{line:38,column:45}},"25":{start:{line:39,column:20},end:{line:39,column:45}},"26":{start:{line:40,column:8},end:{line:40,column:71}},"27":{start:{line:41,column:8},end:{line:41,column:21}},"28":{start:{line:43,column:4},end:{line:45,column:6}},"29":{start:{line:44,column:8},end:{line:44,column:70}},"30":{start:{line:46,column:4},end:{line:67,column:6}},"31":{start:{line:48,column:20},end:{line:48,column:24}},"32":{start:{line:49,column:8},end:{line:49,column:101}},"33":{start:{line:49,column:40},end:{line:49,column:99}},"34":{start:{line:50,column:8},end:{line:50,column:121}},"35":{start:{line:51,column:31},end:{line:51,column:89}},"36":{start:{line:52,column:8},end:{line:59,column:11}},"37":{start:{line:55,column:12},end:{line:55,column:55}},"38":{start:{line:56,column:12},end:{line:58,column:15}},"39":{start:{line:60,column:8},end:{line:60,column:89}},"40":{start:{line:61,column:41},end:{line:65,column:14}},"41":{start:{line:66,column:8},end:{line:66,column:94}},"42":{start:{line:68,column:4},end:{line:92,column:6}},"43":{start:{line:69,column:20},end:{line:69,column:24}},"44":{start:{line:70,column:8},end:{line:70,column:85}},"45":{start:{line:71,column:8},end:{line:71,column:99}},"46":{start:{line:72,column:8},end:{line:79,column:11}},"47":{start:{line:75,column:12},end:{line:75,column:48}},"48":{start:{line:76,column:12},end:{line:78,column:15}},"49":{start:{line:80,column:8},end:{line:89,column:11}},"50":{start:{line:83,column:12},end:{line:83,column:54}},"51":{start:{line:84,column:12},end:{line:88,column:13}},"52":{start:{line:85,column:16},end:{line:87,column:19}},"53":{start:{line:90,column:8},end:{line:90,column:82}},"54":{start:{line:91,column:8},end:{line:91,column:86}},"55":{start:{line:93,column:4},end:{line:113,column:6}},"56":{start:{line:94,column:20},end:{line:94,column:24}},"57":{start:{line:95,column:24},end:{line:95,column:34}},"58":{start:{line:96,column:8},end:{line:98,column:9}},"59":{start:{line:97,column:12},end:{line:97,column:19}},"60":{start:{line:99,column:8},end:{line:99,column:35}},"61":{start:{line:100,column:8},end:{line:100,column:150}},"62":{start:{line:101,column:8},end:{line:101,column:111}},"63":{start:{line:102,column:8},end:{line:112,column:11}},"64":{start:{line:105,column:12},end:{line:105,column:49}},"65":{start:{line:106,column:12},end:{line:111,column:13}},"66":{start:{line:107,column:16},end:{line:109,column:19}},"67":{start:{line:110,column:16},end:{line:110,column:156}},"68":{start:{line:114,column:4},end:{line:124,column:6}},"69":{start:{line:115,column:20},end:{line:115,column:24}},"70":{start:{line:116,column:8},end:{line:123,column:11}},"71":{start:{line:117,column:29},end:{line:117,column:42}},"72":{start:{line:118,column:12},end:{line:122,column:15}},"73":{start:{line:119,column:16},end:{line:121,column:17}},"74":{start:{line:120,column:20},end:{line:120,column:50}},"75":{start:{line:125,column:4},end:{line:142,column:6}},"76":{start:{line:126,column:20},end:{line:126,column:24}},"77":{start:{line:127,column:8},end:{line:141,column:11}},"78":{start:{line:128,column:29},end:{line:128,column:42}},"79":{start:{line:129,column:12},end:{line:140,column:15}},"80":{start:{line:131,column:31},end:{line:135,column:22}},"81":{start:{line:136,column:16},end:{line:139,column:17}},"82":{start:{line:137,column:45},end:{line:137,column:59}},"83":{start:{line:138,column:20},end:{line:138,column:77}},"84":{start:{line:143,column:4},end:{line:154,column:6}},"85":{start:{line:144,column:20},end:{line:144,column:24}},"86":{start:{line:145,column:8},end:{line:153,column:11}},"87":{start:{line:146,column:29},end:{line:146,column:42}},"88":{start:{line:147,column:12},end:{line:152,column:15}},"89":{start:{line:148,column:16},end:{line:148,column:96}},"90":{start:{line:149,column:16},end:{line:151,column:17}},"91":{start:{line:150,column:20},end:{line:150,column:52}},"92":{start:{line:155,column:4},end:{line:165,column:6}},"93":{start:{line:156,column:20},end:{line:156,column:24}},"94":{start:{line:157,column:8},end:{line:164,column:11}},"95":{start:{line:158,column:29},end:{line:158,column:42}},"96":{start:{line:159,column:12},end:{line:163,column:15}},"97":{start:{line:160,column:16},end:{line:162,column:17}},"98":{start:{line:161,column:20},end:{line:161,column:52}},"99":{start:{line:166,column:4},end:{line:177,column:6}},"100":{start:{line:167,column:8},end:{line:167,column:65}},"101":{start:{line:168,column:8},end:{line:168,column:79}},"102":{start:{line:169,column:8},end:{line:169,column:71}},"103":{start:{line:170,column:8},end:{line:170,column:67}},"104":{start:{line:171,column:8},end:{line:171,column:79}},"105":{start:{line:172,column:8},end:{line:172,column:93}},"106":{start:{line:173,column:8},end:{line:173,column:88}},"107":{start:{line:174,column:8},end:{line:174,column:81}},"108":{start:{line:175,column:8},end:{line:175,column:35}},"109":{start:{line:176,column:8},end:{line:176,column:39}},"110":{start:{line:178,column:4},end:{line:180,column:6}},"111":{start:{line:179,column:8},end:{line:179,column:78}},"112":{start:{line:181,column:4},end:{line:181,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:28},end:{line:5,column:29}},loc:{start:{line:5,column:40},end:{line:34,column:1}},line:5},"1":{name:"DelegatedEventTarget",decl:{start:{line:6,column:13},end:{line:6,column:33}},loc:{start:{line:6,column:36},end:{line:8,column:5}},line:6},"2":{name:"(anonymous_2)",decl:{start:{line:9,column:54},end:{line:9,column:55}},loc:{start:{line:9,column:66},end:{line:16,column:5}},line:9},"3":{name:"(anonymous_3)",decl:{start:{line:17,column:51},end:{line:17,column:52}},loc:{start:{line:17,column:63},end:{line:24,column:5}},line:17},"4":{name:"(anonymous_4)",decl:{start:{line:25,column:57},end:{line:25,column:58}},loc:{start:{line:25,column:69},end:{line:32,column:5}},line:25},"5":{name:"(anonymous_5)",decl:{start:{line:35,column:23},end:{line:35,column:24}},loc:{start:{line:35,column:41},end:{line:182,column:1}},line:35},"6":{name:"HAQuerySelector",decl:{start:{line:37,column:13},end:{line:37,column:28}},loc:{start:{line:37,column:37},end:{line:42,column:5}},line:37},"7":{name:"(anonymous_7)",decl:{start:{line:43,column:47},end:{line:43,column:48}},loc:{start:{line:43,column:71},end:{line:45,column:5}},line:43},"8":{name:"(anonymous_8)",decl:{start:{line:46,column:54},end:{line:46,column:55}},loc:{start:{line:46,column:79},end:{line:67,column:5}},line:46},"9":{name:"(anonymous_9)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:43},end:{line:59,column:9}},line:54},"10":{name:"(anonymous_10)",decl:{start:{line:68,column:52},end:{line:68,column:53}},loc:{start:{line:68,column:64},end:{line:92,column:5}},line:68},"11":{name:"(anonymous_11)",decl:{start:{line:74,column:18},end:{line:74,column:19}},loc:{start:{line:74,column:40},end:{line:79,column:9}},line:74},"12":{name:"(anonymous_12)",decl:{start:{line:82,column:18},end:{line:82,column:19}},loc:{start:{line:82,column:50},end:{line:89,column:9}},line:82},"13":{name:"(anonymous_13)",decl:{start:{line:93,column:56},end:{line:93,column:57}},loc:{start:{line:93,column:68},end:{line:113,column:5}},line:93},"14":{name:"(anonymous_14)",decl:{start:{line:104,column:18},end:{line:104,column:19}},loc:{start:{line:104,column:43},end:{line:112,column:9}},line:104},"15":{name:"(anonymous_15)",decl:{start:{line:114,column:46},end:{line:114,column:47}},loc:{start:{line:114,column:67},end:{line:124,column:5}},line:114},"16":{name:"(anonymous_16)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:40},end:{line:123,column:9}},line:116},"17":{name:"(anonymous_17)",decl:{start:{line:118,column:31},end:{line:118,column:32}},loc:{start:{line:118,column:47},end:{line:122,column:13}},line:118},"18":{name:"(anonymous_18)",decl:{start:{line:125,column:53},end:{line:125,column:54}},loc:{start:{line:125,column:74},end:{line:142,column:5}},line:125},"19":{name:"(anonymous_19)",decl:{start:{line:127,column:26},end:{line:127,column:27}},loc:{start:{line:127,column:40},end:{line:141,column:9}},line:127},"20":{name:"(anonymous_20)",decl:{start:{line:129,column:31},end:{line:129,column:32}},loc:{start:{line:129,column:47},end:{line:140,column:13}},line:129},"21":{name:"(anonymous_21)",decl:{start:{line:143,column:49},end:{line:143,column:50}},loc:{start:{line:143,column:70},end:{line:154,column:5}},line:143},"22":{name:"(anonymous_22)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:40},end:{line:153,column:9}},line:145},"23":{name:"(anonymous_23)",decl:{start:{line:147,column:31},end:{line:147,column:32}},loc:{start:{line:147,column:47},end:{line:152,column:13}},line:147},"24":{name:"(anonymous_24)",decl:{start:{line:155,column:47},end:{line:155,column:48}},loc:{start:{line:155,column:68},end:{line:165,column:5}},line:155},"25":{name:"(anonymous_25)",decl:{start:{line:157,column:26},end:{line:157,column:27}},loc:{start:{line:157,column:40},end:{line:164,column:9}},line:157},"26":{name:"(anonymous_26)",decl:{start:{line:159,column:31},end:{line:159,column:32}},loc:{start:{line:159,column:47},end:{line:163,column:13}},line:159},"27":{name:"(anonymous_27)",decl:{start:{line:166,column:39},end:{line:166,column:40}},loc:{start:{line:166,column:51},end:{line:177,column:5}},line:166},"28":{name:"(anonymous_28)",decl:{start:{line:178,column:49},end:{line:178,column:50}},loc:{start:{line:178,column:84},end:{line:180,column:5}},line:178}},branchMap:{"0":{loc:{start:{line:38,column:8},end:{line:38,column:47}},type:"if",locations:[{start:{line:38,column:8},end:{line:38,column:47}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:38},"1":{loc:{start:{line:39,column:20},end:{line:39,column:45}},type:"binary-expr",locations:[{start:{line:39,column:20},end:{line:39,column:37}},{start:{line:39,column:41},end:{line:39,column:45}}],line:39},"2":{loc:{start:{line:49,column:8},end:{line:49,column:101}},type:"if",locations:[{start:{line:49,column:8},end:{line:49,column:101}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:49},"3":{loc:{start:{line:84,column:12},end:{line:88,column:13}},type:"if",locations:[{start:{line:84,column:12},end:{line:88,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:84},"4":{loc:{start:{line:96,column:8},end:{line:98,column:9}},type:"if",locations:[{start:{line:96,column:8},end:{line:98,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:96},"5":{loc:{start:{line:106,column:12},end:{line:111,column:13}},type:"if",locations:[{start:{line:106,column:12},end:{line:111,column:13}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:106},"6":{loc:{start:{line:119,column:16},end:{line:121,column:17}},type:"if",locations:[{start:{line:119,column:16},end:{line:121,column:17}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:119},"7":{loc:{start:{line:136,column:16},end:{line:139,column:17}},type:"if",locations:[{start:{line:136,column:16},end:{line:139,column:17}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:136},"8":{loc:{start:{line:136,column:20},end:{line:136,column:63}},type:"binary-expr",locations:[{start:{line:136,column:20},end:{line:136,column:34}},{start:{line:136,column:38},end:{line:136,column:63}}],line:136},"9":{loc:{start:{line:149,column:16},end:{line:151,column:17}},type:"if",locations:[{start:{line:149,column:16},end:{line:151,column:17}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:149},"10":{loc:{start:{line:160,column:16},end:{line:162,column:17}},type:"if",locations:[{start:{line:160,column:16},end:{line:162,column:17}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:160}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},inputSourceMap:{version:3,sources:["/Users/elchininet/DATOS/PINCHAS/MyProjects/home-assistant-query-selector/src/index.ts"],sourcesContent:["import {\n    HAQuerySelectorConfig,\n    HomeAssistantElement,\n    HAElement,\n    HAQuerySelectorEventListener\n} from '@types';\nimport {\n    DEFAULT_CONFIG,\n    HA_ROOT_ELEMENT,\n    HA_LOVELACE_ELEMENT,\n    HA_DIALOG_ELEMENT,\n    TIMESTAMP_THESHOLD,\n    HAQuerySelectorEvent\n} from '@constants';\nimport {\n    QUERY_SELECTORS,\n    ROOT_SELECTORS,\n    LOVELACE_SELECTORS,\n    DIALOG_SELECTORS\n} from '@selectors';\nimport {\n    getAsyncElements,\n    flatHomeAssistantTree,\n    getFinalDialogFlatTree\n} from '@utilities';\n\ntype OnListenDetail = Record<\n    keyof typeof HA_ROOT_ELEMENT,\n    HAElement\n>;\n\ntype OnPanelLoadDetail = Record<\n    keyof typeof HA_ROOT_ELEMENT,\n    HAElement\n>;\n\ntype OnLovelacePanelLoadDetail = Record<\n    keyof typeof HA_ROOT_ELEMENT |\n    keyof typeof HA_LOVELACE_ELEMENT,\n    HAElement\n>;\n\ntype OnMoreInfoDialogOpenDetail = Record<\n    Exclude<\n        keyof typeof HA_DIALOG_ELEMENT,\n        'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK' |\n        'HA_DIALOG_MORE_INFO_SETTINGS'\n    >,\n    HAElement\n>;\n\ntype OnHistoryAndLogBookDialogOpenDetail = Record<\n    Exclude<\n        keyof typeof HA_DIALOG_ELEMENT,\n        'HA_MORE_INFO_DIALOG_INFO' |\n        'HA_DIALOG_MORE_INFO_SETTINGS'\n    >,\n    HAElement\n>;\n\ntype OnSettingsDialogOpenDetail = Record<\n    Exclude<\n        keyof typeof HA_DIALOG_ELEMENT,\n        'HA_MORE_INFO_DIALOG_INFO' |\n        'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK'\n    >,\n    HAElement\n>;\n\nclass DelegatedEventTarget implements EventTarget {\n    private delegate = document.createDocumentFragment();\n    addEventListener(...args: Parameters<EventTarget['addEventListener']>): void {\n        this.delegate.addEventListener(...args);\n    }\n    dispatchEvent(...args: Parameters<EventTarget['dispatchEvent']>): boolean {\n        return this.delegate.dispatchEvent(...args);\n    }\n    removeEventListener(...args: Parameters<EventTarget['removeEventListener']>): void {\n        return this.delegate.removeEventListener(...args);\n    }\n}\n\nclass HAQuerySelector extends DelegatedEventTarget {\n\n    constructor(config: HAQuerySelectorConfig = {}) {\n        super();\n        this._config = {\n            ...DEFAULT_CONFIG,\n            ...config\n        };\n    }\n\n    private _config: HAQuerySelectorConfig;\n\n    private _dialogTree: HomeAssistantElement;\n    private _homeAssistantRootTree: HomeAssistantElement;\n    private _homeAssistantResolverTree: HomeAssistantElement;\n\n    private _haDialogElements: Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>;\n    private _haRootElements: Record<keyof typeof HA_ROOT_ELEMENT, HAElement>;\n    private _haResolverElements: Record<keyof typeof HA_LOVELACE_ELEMENT, HAElement>;\n\n    private _dialogsObserver: MutationObserver;\n    private _dialogsContentObserver: MutationObserver;\n    private _panelResolverObserver: MutationObserver;\n    private _lovelaceObserver: MutationObserver;\n\n    private _watchDialogsBinded: (mutations: MutationRecord[]) => void;\n    private _watchDialogsContentBinded: (mutations: MutationRecord[]) => void;\n    private _watchDashboardsBinded: (mutations: MutationRecord[]) => void;\n    private _watchLovelaceBinded: (mutations: MutationRecord[]) => void;\n\n    private _timestap: number;\n\n    private _dispatchEvent(type: HAQuerySelectorEvent, detail?: Record<string, HAElement>) {\n        this.dispatchEvent(\n            new CustomEvent(type, { detail })\n        );\n    }\n\n    private _updateDialogElements(\n        dialogElement: (\n            'HA_MORE_INFO_DIALOG_INFO' |\n            'HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK' |\n            'HA_DIALOG_MORE_INFO_SETTINGS'\n        ) = HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO\n    ) {\n        this._dialogTree = getAsyncElements(\n            this._config,\n            DIALOG_SELECTORS,\n            this._haRootElements.HOME_ASSISTANT.element\n        );\n        const haDialogElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_DIALOG_ELEMENT, HAElement>\n        >(\n            HA_DIALOG_ELEMENT,\n            this._dialogTree\n        );\n        haDialogElements.HA_DIALOG_CONTENT\n            .element\n            .then((dialogContent: Element) => {\n                this._dialogsContentObserver.disconnect();\n                this._dialogsContentObserver.observe(dialogContent, {\n                    childList: true\n                });\n            });\n        this._haDialogElements = getFinalDialogFlatTree(\n            haDialogElements,\n            dialogElement\n        );\n        const MoreInfoDialogEventMapper = {\n            [HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]: HAQuerySelectorEvent.ON_MORE_INFO_DIALOG_OPEN,\n            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]: HAQuerySelectorEvent.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN,\n            [HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]: HAQuerySelectorEvent.ON_SETTINGS_DIALOG_OPEN,\n        } as const;\n        this._dispatchEvent(\n            MoreInfoDialogEventMapper[dialogElement],\n            this._haDialogElements\n        );\n    }\n\n    private _updateRootElements() {\n        this._homeAssistantRootTree = getAsyncElements(\n            this._config,\n            ROOT_SELECTORS\n        );\n        this._haRootElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_ROOT_ELEMENT, HAElement>\n        >(\n            HA_ROOT_ELEMENT,\n            this._homeAssistantRootTree\n        );\n        this._haRootElements[HA_ROOT_ELEMENT.HOME_ASSISTANT]\n            .selector.$.element\n            .then((shadowRoot: ShadowRoot): void => {\n                this._dialogsObserver.disconnect();\n                this._dialogsObserver.observe(shadowRoot, {\n                    childList: true\n                });\n            });\n        this._haRootElements[HA_ROOT_ELEMENT.PARTIAL_PANEL_RESOLVER]\n            .element\n            .then((partialPanelResolver: Element): void => {\n                this._panelResolverObserver.disconnect();\n                if (partialPanelResolver) {\n                    this._panelResolverObserver.observe(partialPanelResolver, {\n                        childList: true\n                    });\n                }\n        });\n        this._dispatchEvent(\n            HAQuerySelectorEvent.ON_LISTEN,\n            this._haRootElements\n        );\n        this._dispatchEvent(\n            HAQuerySelectorEvent.ON_PANEL_LOAD,\n            this._haRootElements\n        );\n    }\n\n    private _updateLovelaceElements() {\n        // Avoid triggering onLovelacePanelLoad twice on yaml mode\n        const timestamp = Date.now();\n        if (timestamp - this._timestap < TIMESTAMP_THESHOLD) {\n            return;\n        }\n        this._timestap = timestamp;\n        this._homeAssistantResolverTree = getAsyncElements(\n            this._config,\n            LOVELACE_SELECTORS,\n            this._haRootElements[HA_ROOT_ELEMENT.HA_DRAWER].element\n        );\n        this._haResolverElements = flatHomeAssistantTree<\n            Record<keyof typeof HA_LOVELACE_ELEMENT, HAElement>\n        >(\n            HA_LOVELACE_ELEMENT,\n            this._homeAssistantResolverTree\n        );\n        this._haResolverElements[HA_LOVELACE_ELEMENT.HA_PANEL_LOVELACE]\n            .element\n            .then((lovelacePanel: Element) => {\n                this._lovelaceObserver.disconnect();\n                if (lovelacePanel) {\n                    this._lovelaceObserver.observe(lovelacePanel.shadowRoot, {\n                        childList: true\n                    });\n                    this._dispatchEvent(\n                        HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD,\n                        {\n                            ...this._haRootElements,\n                            ...this._haResolverElements\n                        }\n                    );\n                }\n            });\n    }\n\n    private _watchDialogs(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                if (node.localName === QUERY_SELECTORS.HA_MORE_INFO_DIALOG) {\n                    this._updateDialogElements();\n                }\n            });\n        });\n    }\n\n    private _watchDialogsContent(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                const mappers = {\n                    [QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO]: HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO,\n                    [QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]: HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,\n                    [QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS]: HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS,\n                } as const;\n                if (node.localName && node.localName in mappers) {\n                    const dialogElementQuery = node.localName as keyof typeof mappers;\n                    this._updateDialogElements(mappers[dialogElementQuery]);\n                }\n            });\n          });\n    }\n\n    private _watchDashboards(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                this._dispatchEvent(\n                    HAQuerySelectorEvent.ON_PANEL_LOAD,\n                    this._haRootElements\n                );\n                if (node.localName === QUERY_SELECTORS.HA_PANEL_LOVELACE) {\n                    this._updateLovelaceElements();\n                }\n            });\n        });\n    }\n\n    private _watchLovelace(mutations: MutationRecord[]) {\n        mutations.forEach(({ addedNodes }): void => {\n            addedNodes.forEach((node: Element): void => {\n                if (node.localName === QUERY_SELECTORS.HUI_ROOT) {\n                    this._updateLovelaceElements();\n                }\n            });\n        });\n    }\n\n    public listen() {\n\n        this._watchDialogsBinded = this._watchDialogs.bind(this);\n        this._watchDialogsContentBinded = this._watchDialogsContent.bind(this);\n        this._watchDashboardsBinded = this._watchDashboards.bind(this);\n        this._watchLovelaceBinded = this._watchLovelace.bind(this);\n\n        this._dialogsObserver = new MutationObserver(this._watchDialogsBinded);\n        this._dialogsContentObserver = new MutationObserver(this._watchDialogsContentBinded);\n        this._panelResolverObserver = new MutationObserver(this._watchDashboardsBinded);\n        this._lovelaceObserver = new MutationObserver(this._watchLovelaceBinded);\n\n        this._updateRootElements();\n        this._updateLovelaceElements();\n    }\n    \n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_LISTEN}`,\n        callback:  HAQuerySelectorEventListener<\n            OnListenDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_PANEL_LOAD}`,\n        callback:  HAQuerySelectorEventListener<\n            OnPanelLoadDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD}`,\n        callback: HAQuerySelectorEventListener<\n            OnLovelacePanelLoadDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_MORE_INFO_DIALOG_OPEN}`,\n        callback: HAQuerySelectorEventListener<\n            OnMoreInfoDialogOpenDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN}`,\n        callback: HAQuerySelectorEventListener<\n            OnHistoryAndLogBookDialogOpenDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: `${HAQuerySelectorEvent.ON_SETTINGS_DIALOG_OPEN}`,\n        callback: HAQuerySelectorEventListener<\n            OnSettingsDialogOpenDetail\n        >,\n        options?: boolean | AddEventListenerOptions\n    ): void;\n    public override addEventListener(\n        type: string,\n        callback: EventListenerOrEventListenerObject,\n        options?: boolean | AddEventListenerOptions\n    ): void {\n        super.addEventListener(type, callback, options);\n    }\n\n}\n\nexport {\n    HAQuerySelector,\n    HAQuerySelectorEvent,\n    HAElement,\n    OnListenDetail,\n    OnPanelLoadDetail,\n    OnLovelacePanelLoadDetail,\n    OnMoreInfoDialogOpenDetail,\n    OnHistoryAndLogBookDialogOpenDetail,\n    OnSettingsDialogOpenDetail\n};"],names:[],mappings:"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",file:null},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d62ef961c09269355157f5731bd5d54a3f1a0d5a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
    cov_2m9674fn89=function(){return actualCoverage;};}return actualCoverage;}cov_2m9674fn89();var DelegatedEventTarget=(cov_2m9674fn89().s[0]++,function(){cov_2m9674fn89().f[0]++;function DelegatedEventTarget(){cov_2m9674fn89().f[1]++;cov_2m9674fn89().s[1]++;this.delegate=document.createDocumentFragment();}cov_2m9674fn89().s[2]++;DelegatedEventTarget.prototype.addEventListener=function(){cov_2m9674fn89().f[2]++;var _a;var args=(cov_2m9674fn89().s[3]++,[]);cov_2m9674fn89().s[4]++;for(var _i=(cov_2m9674fn89().s[5]++,0);_i<arguments.length;_i++){cov_2m9674fn89().s[6]++;args[_i]=arguments[_i];}cov_2m9674fn89().s[7]++;(_a=this.delegate).addEventListener.apply(_a,args);};cov_2m9674fn89().s[8]++;DelegatedEventTarget.prototype.dispatchEvent=function(){cov_2m9674fn89().f[3]++;var _a;var args=(cov_2m9674fn89().s[9]++,[]);cov_2m9674fn89().s[10]++;for(var _i=(cov_2m9674fn89().s[11]++,0);_i<arguments.length;_i++){cov_2m9674fn89().s[12]++;args[_i]=arguments[_i];}cov_2m9674fn89().s[13]++;return (_a=this.delegate).dispatchEvent.apply(_a,args);};cov_2m9674fn89().s[14]++;DelegatedEventTarget.prototype.removeEventListener=function(){cov_2m9674fn89().f[4]++;var _a;var args=(cov_2m9674fn89().s[15]++,[]);cov_2m9674fn89().s[16]++;for(var _i=(cov_2m9674fn89().s[17]++,0);_i<arguments.length;_i++){cov_2m9674fn89().s[18]++;args[_i]=arguments[_i];}cov_2m9674fn89().s[19]++;return (_a=this.delegate).removeEventListener.apply(_a,args);};cov_2m9674fn89().s[20]++;return DelegatedEventTarget;}());var HAQuerySelector=(cov_2m9674fn89().s[21]++,function(_super){cov_2m9674fn89().f[5]++;cov_2m9674fn89().s[22]++;__extends(HAQuerySelector,_super);function HAQuerySelector(config){cov_2m9674fn89().f[6]++;cov_2m9674fn89().s[23]++;if(config===void 0){cov_2m9674fn89().b[0][0]++;cov_2m9674fn89().s[24]++;config={};}else {cov_2m9674fn89().b[0][1]++;}var _this=(cov_2m9674fn89().s[25]++,(cov_2m9674fn89().b[1][0]++,_super.call(this))||(cov_2m9674fn89().b[1][1]++,this));cov_2m9674fn89().s[26]++;_this._config=__assign(__assign({},DEFAULT_CONFIG),config);cov_2m9674fn89().s[27]++;return _this;}cov_2m9674fn89().s[28]++;HAQuerySelector.prototype._dispatchEvent=function(type,detail){cov_2m9674fn89().f[7]++;cov_2m9674fn89().s[29]++;this.dispatchEvent(new CustomEvent(type,{detail:detail}));};cov_2m9674fn89().s[30]++;HAQuerySelector.prototype._updateDialogElements=function(dialogElement){cov_2m9674fn89().f[8]++;var _a;var _this=(cov_2m9674fn89().s[31]++,this);cov_2m9674fn89().s[32]++;if(dialogElement===void 0){cov_2m9674fn89().b[2][0]++;cov_2m9674fn89().s[33]++;dialogElement=HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO;}else {cov_2m9674fn89().b[2][1]++;}cov_2m9674fn89().s[34]++;this._dialogTree=getAsyncElements(this._config,DIALOG_SELECTORS,this._haRootElements.HOME_ASSISTANT.element);var haDialogElements=(cov_2m9674fn89().s[35]++,flatHomeAssistantTree(HA_DIALOG_ELEMENT,this._dialogTree));cov_2m9674fn89().s[36]++;haDialogElements.HA_DIALOG_CONTENT.element.then(function(dialogContent){cov_2m9674fn89().f[9]++;cov_2m9674fn89().s[37]++;_this._dialogsContentObserver.disconnect();cov_2m9674fn89().s[38]++;_this._dialogsContentObserver.observe(dialogContent,{childList:true});});cov_2m9674fn89().s[39]++;this._haDialogElements=getFinalDialogFlatTree(haDialogElements,dialogElement);var MoreInfoDialogEventMapper=(cov_2m9674fn89().s[40]++,(_a={},_a[HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO]=exports.HAQuerySelectorEvent.ON_MORE_INFO_DIALOG_OPEN,_a[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=exports.HAQuerySelectorEvent.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN,_a[HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS]=exports.HAQuerySelectorEvent.ON_SETTINGS_DIALOG_OPEN,_a));cov_2m9674fn89().s[41]++;this._dispatchEvent(MoreInfoDialogEventMapper[dialogElement],this._haDialogElements);};cov_2m9674fn89().s[42]++;HAQuerySelector.prototype._updateRootElements=function(){cov_2m9674fn89().f[10]++;var _this=(cov_2m9674fn89().s[43]++,this);cov_2m9674fn89().s[44]++;this._homeAssistantRootTree=getAsyncElements(this._config,ROOT_SELECTORS);cov_2m9674fn89().s[45]++;this._haRootElements=flatHomeAssistantTree(HA_ROOT_ELEMENT,this._homeAssistantRootTree);cov_2m9674fn89().s[46]++;this._haRootElements[HA_ROOT_ELEMENT.HOME_ASSISTANT].selector.$.element.then(function(shadowRoot){cov_2m9674fn89().f[11]++;cov_2m9674fn89().s[47]++;_this._dialogsObserver.disconnect();cov_2m9674fn89().s[48]++;_this._dialogsObserver.observe(shadowRoot,{childList:true});});cov_2m9674fn89().s[49]++;this._haRootElements[HA_ROOT_ELEMENT.PARTIAL_PANEL_RESOLVER].element.then(function(partialPanelResolver){cov_2m9674fn89().f[12]++;cov_2m9674fn89().s[50]++;_this._panelResolverObserver.disconnect();cov_2m9674fn89().s[51]++;if(partialPanelResolver){cov_2m9674fn89().b[3][0]++;cov_2m9674fn89().s[52]++;_this._panelResolverObserver.observe(partialPanelResolver,{childList:true});}else {cov_2m9674fn89().b[3][1]++;}});cov_2m9674fn89().s[53]++;this._dispatchEvent(exports.HAQuerySelectorEvent.ON_LISTEN,this._haRootElements);cov_2m9674fn89().s[54]++;this._dispatchEvent(exports.HAQuerySelectorEvent.ON_PANEL_LOAD,this._haRootElements);};cov_2m9674fn89().s[55]++;HAQuerySelector.prototype._updateLovelaceElements=function(){cov_2m9674fn89().f[13]++;var _this=(cov_2m9674fn89().s[56]++,this);var timestamp=(cov_2m9674fn89().s[57]++,Date.now());cov_2m9674fn89().s[58]++;if(timestamp-this._timestap<TIMESTAMP_THESHOLD){cov_2m9674fn89().b[4][0]++;cov_2m9674fn89().s[59]++;return;}else {cov_2m9674fn89().b[4][1]++;}cov_2m9674fn89().s[60]++;this._timestap=timestamp;cov_2m9674fn89().s[61]++;this._homeAssistantResolverTree=getAsyncElements(this._config,LOVELACE_SELECTORS,this._haRootElements[HA_ROOT_ELEMENT.HA_DRAWER].element);cov_2m9674fn89().s[62]++;this._haResolverElements=flatHomeAssistantTree(HA_LOVELACE_ELEMENT,this._homeAssistantResolverTree);cov_2m9674fn89().s[63]++;this._haResolverElements[HA_LOVELACE_ELEMENT.HA_PANEL_LOVELACE].element.then(function(lovelacePanel){cov_2m9674fn89().f[14]++;cov_2m9674fn89().s[64]++;_this._lovelaceObserver.disconnect();cov_2m9674fn89().s[65]++;if(lovelacePanel){cov_2m9674fn89().b[5][0]++;cov_2m9674fn89().s[66]++;_this._lovelaceObserver.observe(lovelacePanel.shadowRoot,{childList:true});cov_2m9674fn89().s[67]++;_this._dispatchEvent(exports.HAQuerySelectorEvent.ON_LOVELACE_PANEL_LOAD,__assign(__assign({},_this._haRootElements),_this._haResolverElements));}else {cov_2m9674fn89().b[5][1]++;}});};cov_2m9674fn89().s[68]++;HAQuerySelector.prototype._watchDialogs=function(mutations){cov_2m9674fn89().f[15]++;var _this=(cov_2m9674fn89().s[69]++,this);cov_2m9674fn89().s[70]++;mutations.forEach(function(_a){cov_2m9674fn89().f[16]++;var addedNodes=(cov_2m9674fn89().s[71]++,_a.addedNodes);cov_2m9674fn89().s[72]++;addedNodes.forEach(function(node){cov_2m9674fn89().f[17]++;cov_2m9674fn89().s[73]++;if(node.localName===QUERY_SELECTORS.HA_MORE_INFO_DIALOG){cov_2m9674fn89().b[6][0]++;cov_2m9674fn89().s[74]++;_this._updateDialogElements();}else {cov_2m9674fn89().b[6][1]++;}});});};cov_2m9674fn89().s[75]++;HAQuerySelector.prototype._watchDialogsContent=function(mutations){cov_2m9674fn89().f[18]++;var _this=(cov_2m9674fn89().s[76]++,this);cov_2m9674fn89().s[77]++;mutations.forEach(function(_a){cov_2m9674fn89().f[19]++;var addedNodes=(cov_2m9674fn89().s[78]++,_a.addedNodes);cov_2m9674fn89().s[79]++;addedNodes.forEach(function(node){cov_2m9674fn89().f[20]++;var _a;var mappers=(cov_2m9674fn89().s[80]++,(_a={},_a[QUERY_SELECTORS.HA_MORE_INFO_DIALOG_INFO]=HA_DIALOG_ELEMENT.HA_MORE_INFO_DIALOG_INFO,_a[QUERY_SELECTORS.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,_a[QUERY_SELECTORS.HA_DIALOG_MORE_INFO_SETTINGS]=HA_DIALOG_ELEMENT.HA_DIALOG_MORE_INFO_SETTINGS,_a));cov_2m9674fn89().s[81]++;if((cov_2m9674fn89().b[8][0]++,node.localName)&&(cov_2m9674fn89().b[8][1]++,node.localName in mappers)){cov_2m9674fn89().b[7][0]++;var dialogElementQuery=(cov_2m9674fn89().s[82]++,node.localName);cov_2m9674fn89().s[83]++;_this._updateDialogElements(mappers[dialogElementQuery]);}else {cov_2m9674fn89().b[7][1]++;}});});};cov_2m9674fn89().s[84]++;HAQuerySelector.prototype._watchDashboards=function(mutations){cov_2m9674fn89().f[21]++;var _this=(cov_2m9674fn89().s[85]++,this);cov_2m9674fn89().s[86]++;mutations.forEach(function(_a){cov_2m9674fn89().f[22]++;var addedNodes=(cov_2m9674fn89().s[87]++,_a.addedNodes);cov_2m9674fn89().s[88]++;addedNodes.forEach(function(node){cov_2m9674fn89().f[23]++;cov_2m9674fn89().s[89]++;_this._dispatchEvent(exports.HAQuerySelectorEvent.ON_PANEL_LOAD,_this._haRootElements);cov_2m9674fn89().s[90]++;if(node.localName===QUERY_SELECTORS.HA_PANEL_LOVELACE){cov_2m9674fn89().b[9][0]++;cov_2m9674fn89().s[91]++;_this._updateLovelaceElements();}else {cov_2m9674fn89().b[9][1]++;}});});};cov_2m9674fn89().s[92]++;HAQuerySelector.prototype._watchLovelace=function(mutations){cov_2m9674fn89().f[24]++;var _this=(cov_2m9674fn89().s[93]++,this);cov_2m9674fn89().s[94]++;mutations.forEach(function(_a){cov_2m9674fn89().f[25]++;var addedNodes=(cov_2m9674fn89().s[95]++,_a.addedNodes);cov_2m9674fn89().s[96]++;addedNodes.forEach(function(node){cov_2m9674fn89().f[26]++;cov_2m9674fn89().s[97]++;if(node.localName===QUERY_SELECTORS.HUI_ROOT){cov_2m9674fn89().b[10][0]++;cov_2m9674fn89().s[98]++;_this._updateLovelaceElements();}else {cov_2m9674fn89().b[10][1]++;}});});};cov_2m9674fn89().s[99]++;HAQuerySelector.prototype.listen=function(){cov_2m9674fn89().f[27]++;cov_2m9674fn89().s[100]++;this._watchDialogsBinded=this._watchDialogs.bind(this);cov_2m9674fn89().s[101]++;this._watchDialogsContentBinded=this._watchDialogsContent.bind(this);cov_2m9674fn89().s[102]++;this._watchDashboardsBinded=this._watchDashboards.bind(this);cov_2m9674fn89().s[103]++;this._watchLovelaceBinded=this._watchLovelace.bind(this);cov_2m9674fn89().s[104]++;this._dialogsObserver=new MutationObserver(this._watchDialogsBinded);cov_2m9674fn89().s[105]++;this._dialogsContentObserver=new MutationObserver(this._watchDialogsContentBinded);cov_2m9674fn89().s[106]++;this._panelResolverObserver=new MutationObserver(this._watchDashboardsBinded);cov_2m9674fn89().s[107]++;this._lovelaceObserver=new MutationObserver(this._watchLovelaceBinded);cov_2m9674fn89().s[108]++;this._updateRootElements();cov_2m9674fn89().s[109]++;this._updateLovelaceElements();};cov_2m9674fn89().s[110]++;HAQuerySelector.prototype.addEventListener=function(type,callback,options){cov_2m9674fn89().f[28]++;cov_2m9674fn89().s[111]++;_super.prototype.addEventListener.call(this,type,callback,options);};cov_2m9674fn89().s[112]++;return HAQuerySelector;}(DelegatedEventTarget));

    exports.HAQuerySelector = HAQuerySelector;

}));
